(function(t){function e(e){for(var n,s,c=e[0],o=e[1],l=e[2],d=0,m=[];d<c.length;d++)s=c[d],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&m.push(i[s][0]),i[s]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n]);u&&u(e);while(m.length)m.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],n=!0,c=1;c<a.length;c++){var o=a[c];0!==i[o]&&(n=!1)}n&&(r.splice(e--,1),t=s(s.s=a[0]))}return t}var n={},i={app:0},r=[];function s(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=n,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(a,n,function(e){return t[e]}.bind(null,n));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=o;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"01a1":function(t,e,a){},"020a":function(t,e,a){"use strict";var n=a("68a8"),i=a.n(n);i.a},"034f":function(t,e,a){"use strict";var n=a("19b3"),i=a.n(n);i.a},"19b3":function(t,e,a){},2042:function(t,e,a){"use strict";var n=a("a334"),i=a.n(n);i.a},2848:function(t,e,a){},"2ae1":function(t,e,a){},3486:function(t,e,a){},"3afa":function(t,e,a){"use strict";var n=a("fa89"),i=a.n(n);i.a},"490c":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);var n={};a.r(n);a("b0c0"),a("e260"),a("e6cf"),a("cca6"),a("a79d");var i=a("2b0e"),r=a("ecee"),s=a("c074"),c=a("f2d1"),o=a("ad3d");r["c"].add(s["a"]),r["c"].add(c["a"]),i["a"].component("font-awesome-icon",o["a"]);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.loading?a("div",[a("v-app",{attrs:{id:"app"}},[a("v-content",{staticClass:"content"},[a("loading")],1)],1)],1):a("div",[t.isInitialized?a("div",[a("Main")],1):a("div",[a("v-app",{attrs:{id:"app"}},[t.currentUser?a("v-content",{staticClass:"content"},[a("initialize",{on:{initialized:t.checkInitialized}})],1):a("v-content",{staticClass:"content"},[a("login")],1)],1)],1)])])},u=[],d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-row",[a("v-card",{staticClass:"col-8 mx-auto",attrs:{raised:"",shaped:""}},[a("v-card-text",[a("p",{staticClass:"display-1 text--primary"},[t._v("Zaloguj")]),a("v-form",{nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.authenticate()}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-text-field",{attrs:{rules:t.rules.credentials.email,type:"email",label:"Email",required:""},model:{value:t.credentials.email,callback:function(e){t.$set(t.credentials,"email",e)},expression:"credentials.email"}}),a("v-text-field",{attrs:{rules:[t.rules.credentials.password.required,t.rules.credentials.password.min],type:"password",label:"Hasło",required:""},model:{value:t.credentials.password,callback:function(e){t.$set(t.credentials,"password",e)},expression:"credentials.password"}})],1)],1),a("v-card-actions",[a("v-btn",{staticClass:"mx-auto font-weight-bold",attrs:{text:"",disabled:!t.valid},on:{click:t.authenticate}},[t._v(" Zaloguj ")])],1)],1)],1)],1)},m=[],v=(a("d3b7"),a("caad"),a("45fc"),a("2532"),a("bc3a")),p=a.n(v);function h(t,e){e.beforeEach((function(e,a,n){var i=t.state.currentUser;if(!e.meta.forVisitors||!i){if(e.matched.some((function(t){return t.meta.roles}))){if(!i)return n({path:"/login"});if(!e.meta.roles.includes(i.role.name))return n({path:"/"})}return n()}return n({path:"/"})})),p.a.interceptors.request.use((function(t){return t.baseURL="https://backend.sms.sikorski.dev/",t})),p.a.interceptors.response.use(null,(function(a){switch(a.response.status){case 400:i["a"].toasted.show(a.response.data.message,{type:"error"});break;case 401:i["a"].toasted.show(a.response.data.message,{type:"error"}),t.commit("logout"),e.push("/login");break;case 404:e.push("/");break}})),t.getters.currentUser&&f(t.getters.getToken)}function f(t){p.a.defaults.headers.common["Authorization"]="Bearer ".concat(t)}function g(t){return new Promise((function(e){p.a.post("/api/auth/login",t).then((function(t){f(t.data.data.token),e(t.data)}))}))}function b(){var t=localStorage.getItem("user");return t?JSON.parse(t):null}var _={name:"Login",methods:{authenticate:function(){var t=this;this.$store.dispatch("login"),g(this.$data.credentials).then((function(e){t.$store.commit("loginSuccess",e),t.$router.push({path:"/"})}))}},data:function(){return{valid:!1,credentials:{email:"",password:""},rules:{credentials:{email:[function(t){return!!t||"Adres email jest wymagany."},function(t){return/.+@.+/.test(t)||"Wprowawdź prawidłowy adres E-mail"}],password:{required:function(t){return!!t||"Hasło jest wymagane."},min:function(t){return t.length>=6||"Minimum 6 znaków."}}}}}}},k=_,y=a("2877"),x=a("6544"),w=a.n(x),C=a("8336"),V=a("b0af"),$=a("99d9"),z=a("a523"),S=a("4bd4"),j=a("0fd9"),T=a("8654"),D=Object(y["a"])(k,d,m,!1,null,null,null),O=D.exports;w()(D,{VBtn:C["a"],VCard:V["a"],VCardActions:$["a"],VCardText:$["b"],VContainer:z["a"],VForm:S["a"],VRow:j["a"],VTextField:T["a"]});var E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-row",[a("v-stepper",{staticClass:"col-10 mx-auto",model:{value:t.step,callback:function(e){t.step=e},expression:"step"}},[a("v-stepper-header",[a("v-stepper-step",{attrs:{complete:t.step>1,step:"1"}},[t._v("Tworzenie serwisu")]),a("v-divider"),a("v-stepper-step",{attrs:{complete:t.step>2,step:"2"}},[t._v("Tworzenie pierwszego oddziału")]),a("v-divider"),a("v-stepper-step",{attrs:{complete:t.step>3,step:"3"}},[t._v("Gotowe!")])],1),a("v-stepper-items",[a("v-stepper-content",{attrs:{step:"1"}},[a("service-form",{ref:"createServiceForm",on:{valid:t.checkValid}}),a("v-btn",{attrs:{color:"primary",disabled:!t.valid},on:{click:function(e){return t.initializeService()}}},[t._v(" Utwórz serwis ")])],1),a("v-stepper-content",{attrs:{step:"2"}},[a("agency-form",{ref:"createAgencyForm",on:{valid:t.checkValid}}),a("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.createAgency()}}},[t._v(" Utwórz oddział ")])],1),a("v-stepper-content",{attrs:{step:"3"}},[a("v-btn",{staticClass:"mx-auto",attrs:{color:"primary",block:""},on:{click:function(e){return t.checkInitialized()}}},[t._v(" Aby przejść do panelu odśwież stronę bądź klinij tutaj ")])],1)],1)],1)],1)],1)},A=[],U=(a("96cf"),a("89ba")),R=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-form",{model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-text-field",{attrs:{rules:t.rules.service.name,label:"Nazwa serwisu",required:""},model:{value:t.credentials.name,callback:function(e){t.$set(t.credentials,"name",e)},expression:"credentials.name"}}),a("v-text-field",{attrs:{rules:t.rules.service.address,label:"Adres",required:""},model:{value:t.credentials.address,callback:function(e){t.$set(t.credentials,"address",e)},expression:"credentials.address"}}),a("v-text-field",{attrs:{rules:t.rules.service.NIP,label:"Numer NIP",required:""},model:{value:t.credentials.NIP,callback:function(e){t.$set(t.credentials,"NIP",e)},expression:"credentials.NIP"}}),a("v-text-field",{attrs:{rules:t.rules.service.phone_number,label:"Numer telefonu",required:""},model:{value:t.credentials.phone_number,callback:function(e){t.$set(t.credentials,"phone_number",e)},expression:"credentials.phone_number"}}),a("v-text-field",{attrs:{rules:t.rules.service.description,label:"Opis",required:""},model:{value:t.credentials.description,callback:function(e){t.$set(t.credentials,"description",e)},expression:"credentials.description"}})],1)},N=[],L={name:"ServiceForm",props:{service:{}},data:function(){return{valid:!1,credentials:{},rules:{service:{name:[function(t){return!!t||"Nazwa jest wymagana."}],address:[function(t){return!!t||"Adres jest wymagany."}],description:[function(t){return!!t||"Opis jest wymagany."}],phone_number:[function(t){return!!t||"Numer telefonu jest wymagany."}],NIP:[function(t){return!!t||"Numer NIP jest wymagany."}]}}}},methods:{parseFormData:function(){this.service&&(this.credentials=JSON.parse(JSON.stringify(this.service)))}},created:function(){this.parseFormData()},watch:{valid:function(t){this.$emit("valid",t)}}},I=L,F=Object(y["a"])(I,R,N,!1,null,null,null),P=F.exports;w()(F,{VForm:S["a"],VTextField:T["a"]});var q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-form",{model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-text-field",{attrs:{rules:t.rules.agency.name,label:"Nazwa oddziału",required:""},model:{value:t.credentials.name,callback:function(e){t.$set(t.credentials,"name",e)},expression:"credentials.name"}}),a("v-text-field",{attrs:{rules:t.rules.agency.address,label:"Adres",required:""},model:{value:t.credentials.address,callback:function(e){t.$set(t.credentials,"address",e)},expression:"credentials.address"}}),a("v-text-field",{attrs:{rules:t.rules.agency.phone_number,label:"Numer telefonu",required:""},model:{value:t.credentials.phone_number,callback:function(e){t.$set(t.credentials,"phone_number",e)},expression:"credentials.phone_number"}})],1)},B=[],M={name:"AgencyForm",props:{agency:{}},data:function(){return{valid:!1,credentials:{},rules:{agency:{name:[function(t){return!!t||"Nazwa jest wymagana."}],address:[function(t){return!!t||"Adres jest wymagany."}],phone_number:[function(t){return!!t||"Numer telefonu jest wymagany."}]}}}},methods:{parseFormData:function(){this.agency&&(this.credentials=JSON.parse(JSON.stringify(this.agency)))}},created:function(){this.parseFormData()},watch:{valid:function(t){this.$emit("valid",t)}}},Z=M,J=Object(y["a"])(Z,q,B,!1,null,null,null),H=J.exports;w()(J,{VForm:S["a"],VTextField:T["a"]});var K={name:"ServiceInitialize",props:{loading:{}},components:{ServiceForm:P,AgencyForm:H},data:function(){return{step:1,valid:!1}},methods:{initializeService:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$http.post("/api/service/initialize",this.$refs.createServiceForm.credentials).then((function(t){t.data.success&&(e.step=2)}));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),createAgency:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$http.post("/api/agency",this.$refs.createAgencyForm.credentials).then((function(){e.$toasted.show("Utworzono oddział",{type:"success"}),e.step=3}));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),checkService:function(){var t=this;this.$http.get("/api/service").then((function(e){e.data.data.service.length&&(t.checkAgency(),t.step=2)}))},checkAgency:function(){var t=this;this.$http.get("/api/agencies").then((function(e){e.data.data.agencies.length&&(t.step=3)}))},checkInitialized:function(){this.$emit("initialized")},checkValid:function(t){this.valid=t}},created:function(){this.checkService()}},W=K,G=(a("3afa"),a("ce7e")),Q=a("7e85"),X=a("e516"),Y=a("9c54"),tt=a("56a4"),et=Object(y["a"])(W,E,A,!1,null,null,null),at=et.exports;w()(et,{VBtn:C["a"],VContainer:z["a"],VDivider:G["a"],VRow:j["a"],VStepper:Q["a"],VStepperContent:X["a"],VStepperHeader:Y["a"],VStepperItems:Y["b"],VStepperStep:tt["a"]});var nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"app"}},[a("v-navigation-drawer",{attrs:{app:"",clipped:"",dark:"",color:"#202338"},scopedSlots:t._u([{key:"append",fn:function(){return[t.currentUser?a("v-list-item",{attrs:{link:"",ripple:{class:"red-text"}},on:{click:t.logout}},[a("v-list-item-action",[a("font-awesome-icon",{staticClass:"red--text",attrs:{icon:"sign-out-alt",size:"lg"}})],1),a("v-list-item-content",[a("v-list-item-title",{staticClass:"red--text"},[t._v("Wyloguj")])],1)],1):a("router-link",{staticClass:"route",attrs:{to:{name:"Login"}}},[a("v-list-item",{attrs:{link:"",ripple:{class:"green-text"}}},[a("v-list-item-action",[a("font-awesome-icon",{staticClass:"green--text",attrs:{icon:"sign-in-alt",size:"lg"}})],1),a("v-list-item-content",[a("v-list-item-title",{staticClass:"green--text"},[t._v("Zaloguj")])],1)],1)],1)]},proxy:!0}]),model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[t.currentUser?a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",{staticClass:"title"},[t._v(" "+t._s(t.currentUser.name)+" "+t._s(t.currentUser.surname)+" ")]),a("v-list-item-subtitle",[t._v(" "+t._s(t.currentUser.role.name)+" ")])],1)],1):t._e(),a("NavigationDrawerItems")],1),a("Toolbar",[a("v-app-bar-nav-icon",{on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}})],1),a("v-content",{staticClass:"content"},[a("router-view")],1)],1)},it=[],rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app-bar",{attrs:{app:"",dense:"","clipped-left":"",dark:"",color:"#60687b"}},[t._t("default"),a("v-toolbar-title",[t._v(t._s(t.applicationName))])],2)},st=[],ct={data:function(){return{applicationName:"Zarządzanie serwisem"}}},ot=ct,lt=a("40dc"),ut=a("2a7f"),dt=Object(y["a"])(ot,rt,st,!1,null,"0baf510a",null),mt=dt.exports;w()(dt,{VAppBar:lt["a"],VToolbarTitle:ut["a"]});var vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list",{attrs:{dense:"",shaped:""}},[t.isManager()&&t.currentUser.agency_id?a("v-list-item",{staticClass:"route",attrs:{ripple:"",link:"",to:{name:"AgencySummary",params:{id:t.currentUser.agency_id}},"active-class":"item-active",exact:""}},[a("v-list-item-action",[a("font-awesome-icon",{attrs:{icon:"toolbox",size:"lg"}})],1),a("v-list-item-content",[a("v-list-item-title",[t._v(" Oddział ")])],1)],1):t._e(),t._l(t.categories,(function(e){return a("span",{key:e.name},[t.categoryAvailable(e)?a("v-subheader",{staticClass:"mt-4 white--text font-weight-bold text--darken-1"},[t._v(t._s(e.name))]):t._e(),t._l(e.links,(function(e){return a("span",{key:e.route},[t.checkPermitted(e.route)?a("v-list-item",{staticClass:"route",attrs:{ripple:"",link:"",to:{name:e.route},"active-class":"item-active",exact:""}},[a("v-list-item-action",[a("font-awesome-icon",{attrs:{icon:e.icon,size:"lg"}})],1),a("v-list-item-content",[a("v-list-item-title",[t._v(" "+t._s(e.label)+" ")])],1)],1):t._e()],1)}))],2)}))],2)},pt=[],ht=(a("4160"),a("159b"),{data:function(){return{drawer:null,applicationName:"Service Management System",logged:!0,categories:[{name:"Główne",available:0,links:[{route:"HomePage",label:"Strona głowna",icon:"home"}]},{name:"Zgłoszenia",available:0,links:[{route:"TicketCheckStatus",label:"Sprawdź status zgłoszenia",icon:"clipboard-check"},{route:"TicketsList",label:"Lista zgłoszeń",icon:"clipboard-list"},{route:"TicketCreate",label:"Dodaj zgłoszenie",icon:"plus"}]},{name:"Klienci",available:0,links:[{route:"ClientList",label:"Lista klientów",icon:"users"},{route:"ClientCreate",label:"Dodaj klienta",icon:"user-plus"}]},{name:"Urządzenia",available:0,links:[{route:"DeviceList",label:"Lista urządzeń",icon:"laptop"},{route:"DeviceCreate",label:"Dodaj urządzenie",icon:"laptop-medical"}]},{name:"Użytkownicy",available:0,links:[{route:"UsersList",label:"Lista użytkowników",icon:"users"},{route:"UserCreate",label:"Dodaj użytkownika",icon:"user-plus"}]},{name:"Oddziały",available:0,links:[{route:"AgencyList",label:"Lista oddziałów",icon:"city"},{route:"AgencyCreate",label:"Dodaj oddział",icon:"clinic-medical"}]}]}},methods:{checkPermitted:function(t){return!this.$router.resolve({name:t}).route.meta.roles||!!this.$store.state.currentUser&&this.$router.resolve({name:t}).route.meta.roles.includes(this.$store.state.currentUser.role.name)},categoryAvailable:function(t){var e=this,a=0;return t.links.forEach((function(t){e.checkPermitted(t.route)&&a++})),a}}}),ft=ht,gt=(a("ec53"),a("8860")),bt=a("da13"),_t=a("1800"),kt=a("5d23"),yt=a("e0c7"),xt=Object(y["a"])(ft,vt,pt,!1,null,"01b0aaf9",null),wt=xt.exports;w()(xt,{VList:gt["a"],VListItem:bt["a"],VListItemAction:_t["a"],VListItemContent:kt["a"],VListItemTitle:kt["c"],VSubheader:yt["a"]});var Ct={name:"MainLayout",components:{Toolbar:mt,NavigationDrawerItems:wt},data:function(){return{drawer:null,service:{}}},methods:{fetchService:function(){var t=this;this.$http.get("/api/service").then((function(e){t.service=e.data.data.service,document.title=t.service.name}))},logout:function(){this.$store.commit("logout"),this.$router.push("/login")}},created:function(){this.fetchService()}},Vt=Ct,$t=(a("fa6f"),a("7496")),zt=a("5bc1"),St=a("a75b"),jt=a("f774"),Tt=Object(y["a"])(Vt,nt,it,!1,null,"c742420c",null),Dt=Tt.exports;w()(Tt,{VApp:$t["a"],VAppBarNavIcon:zt["a"],VContent:St["a"],VListItem:bt["a"],VListItemAction:_t["a"],VListItemContent:kt["a"],VListItemSubtitle:kt["b"],VListItemTitle:kt["c"],VNavigationDrawer:jt["a"]});var Ot=a("f9a2"),Et={name:"App",components:{Main:Dt,Login:O,Initialize:at,Loading:Ot["default"]},data:function(){return{service:[],logged:!1,loading:!0}},methods:{checkInitialized:function(){var t=this;this.$http.get("/api/service/initialized").then((function(e){t.isInitialized=e.data.data.initialized,t.loading=!1}))}},created:function(){this.checkInitialized()}},At=Et,Ut=(a("034f"),Object(y["a"])(At,l,u,!1,null,null,null)),Rt=Ut.exports;w()(Ut,{VApp:$t["a"],VContent:St["a"]});var Nt=a("8c4f"),Lt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticClass:"pa-0",attrs:{fluid:""}},[n("section",[n("v-parallax",{attrs:{src:a("b5e0"),height:"600"}},[n("v-layout",{staticClass:"white--text",attrs:{column:"","align-center":"","justify-center":""}},[n("img",{attrs:{src:a("cf05"),alt:"Vuetify.js",height:"200"}}),n("h1",{staticClass:"white--text mb-2 display-4 text-center font-weight-bold"},[t._v(t._s(t.service.name))]),n("div",{staticClass:"subheading mb-4 text-center"},[t._v("Oparty na systemie zarządzania serwisem")])]),n("v-row",{attrs:{align:"end"}},[n("div",{staticClass:"col-2 pa-0"},[n("a",{staticStyle:{"background-color":"rgba(255, 255, 255, 0.2)",color:"white","text-decoration":"none",padding:"4px 6px","font-family":'-apple-system, BlinkMacSystemFont, "San Francisco", "Helvetica Neue", Helvetica, Ubuntu, Roboto, Noto, "Segoe UI", Arial, sans-serif',"font-size":"12px","font-weight":"bold","line-height":"1.2",display:"inline-block","border-radius":"3px"},attrs:{href:"https://unsplash.com/@helloquence?utm_medium=referral&utm_campaign=photographer-credit&utm_content=creditBadge",target:"_blank",rel:"noopener noreferrer",title:"Download free do whatever you want high-resolution photos from Helloquence"}},[n("span",{staticStyle:{padding:"2px 3px"}},[n("svg",{staticStyle:{height:"12px",width:"auto",position:"relative","vertical-align":"middle",top:"-2px",fill:"white"},attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"}},[n("title",[t._v("unsplash-logo")]),n("path",{attrs:{d:"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z"}})])]),n("span",{staticStyle:{display:"inline-block",padding:"2px 3px"}},[t._v("Helloquence")])])])])],1)],1),n("section",{attrs:{id:"about"}},[n("v-layout",{staticClass:"my-12",attrs:{column:"",wrap:"","align-center":""}},[n("v-flex",{attrs:{xs12:""}},[n("v-container",{attrs:{"grid-list-xl":""}},[n("v-layout",{attrs:{row:"",wrap:"","align-center":""}},[n("v-flex",{attrs:{xs12:"",md4:""}},[n("v-card",{staticClass:"transparent",attrs:{flat:""}},[n("v-card-text",{staticClass:"text-center"},[n("v-icon",{staticClass:"blue--text text--lighten-2",attrs:{"x-large":""}},[t._v("mdi-palette")])],1),n("v-card-title",{staticClass:"layout justify-center",attrs:{"primary-title":""}},[n("div",{staticClass:"headline text-center"},[t._v("Material Design")])]),n("v-card-text",[t._v(" Cras facilisis mi vitae nunc lobortis pharetra. Nulla volutpat tincidunt ornare. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Nullam in aliquet odio. Aliquam eu est vitae tellus bibendum tincidunt. Suspendisse potenti. ")])],1)],1),n("v-flex",{attrs:{xs12:"",md4:""}},[n("v-card",{staticClass:"transparent",attrs:{flat:""}},[n("v-card-text",{staticClass:"text-center"},[n("v-icon",{staticClass:"blue--text text--lighten-2",attrs:{"x-large":""}},[t._v("mdi-flash")])],1),n("v-card-title",{staticClass:"layout justify-center",attrs:{"primary-title":""}},[n("div",{staticClass:"headline"},[t._v("Fast development")])]),n("v-card-text",[t._v(" Cras facilisis mi vitae nunc lobortis pharetra. Nulla volutpat tincidunt ornare. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Nullam in aliquet odio. Aliquam eu est vitae tellus bibendum tincidunt. Suspendisse potenti. ")])],1)],1),n("v-flex",{attrs:{xs12:"",md4:""}},[n("v-card",{staticClass:"transparent",attrs:{flat:""}},[n("v-card-text",{staticClass:"text-center"},[n("v-icon",{staticClass:"blue--text text--lighten-2",attrs:{"x-large":""}},[t._v("mdi-wrench")])],1),n("v-card-title",{staticClass:"layout justify-center",attrs:{"primary-title":""}},[n("div",{staticClass:"headline text-center"},[t._v("Completely Open Sourced")])]),n("v-card-text",[t._v(" Cras facilisis mi vitae nunc lobortis pharetra. Nulla volutpat tincidunt ornare. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Nullam in aliquet odio. Aliquam eu est vitae tellus bibendum tincidunt. Suspendisse potenti. ")])],1)],1)],1)],1)],1)],1)],1),n("section",[n("v-parallax",{attrs:{src:a("d6f1"),height:"200"}})],1),n("section",[n("v-container",{attrs:{"grid-list-xl":""}},[n("v-layout",{staticClass:"my-12",attrs:{row:"",wrap:"","justify-center":""}},[n("v-flex",{attrs:{xs12:"",sm4:""}},[n("v-card",{staticClass:"transparent",attrs:{flat:""}},[n("v-card-title",{staticClass:"layout justify-center",attrs:{"primary-title":""}},[n("div",{staticClass:"headline"},[t._v("O nas")])]),n("v-card-text",[t._v(" "+t._s(t.service.description)+" ")])],1)],1),n("v-flex",{attrs:{xs12:"",sm4:"","offset-sm1":""}},[n("v-card",{staticClass:"transparent",attrs:{flat:""}},[n("v-card-title",{staticClass:"layout justify-center",attrs:{"primary-title":""}},[n("div",{staticClass:"headline"},[t._v("Kontakt")])]),n("v-card-text",[t._v(" Masz jakieś pytania, bądź chcesz się umówić? Skontaktuj się z nami! ")]),n("v-list",{staticClass:"transparent"},[n("v-list-item",[n("v-list-item-action",[n("v-icon",{staticClass:"blue--text text--lighten-2"},[t._v("mdi-phone")])],1),n("v-list-item-content",[n("v-list-item-title",[n("a",{attrs:{href:"tel:"+t.service.phone_number}},[t._v(" "+t._s(t.service.phone_number)+" ")])])],1)],1),n("v-list-item",[n("v-list-item-action",[n("v-icon",{staticClass:"blue--text text--lighten-2"},[t._v("mdi-map-marker")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v(t._s(t.service.address))])],1)],1),n("v-list-item",[n("v-list-item-action",[n("v-icon",{staticClass:"blue--text text--lighten-2"},[t._v("mdi-email")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v(t._s(t.service.email))])],1)],1)],1)],1)],1)],1)],1)],1)])},It=[],Ft={data:function(){return{service:{}}},methods:{fetchService:function(){var t=this;this.$http.get("/api/service").then((function(e){t.service=e.data.data.service}))}},created:function(){this.fetchService()}},Pt=Ft,qt=a("0e8f"),Bt=a("132d"),Mt=a("a722"),Zt=a("8b9c"),Jt=Object(y["a"])(Pt,Lt,It,!1,null,null,null),Ht=Jt.exports;w()(Jt,{VCard:V["a"],VCardText:$["b"],VCardTitle:$["c"],VContainer:z["a"],VFlex:qt["a"],VIcon:Bt["a"],VLayout:Mt["a"],VList:gt["a"],VListItem:bt["a"],VListItemAction:_t["a"],VListItemContent:kt["a"],VListItemTitle:kt["c"],VParallax:Zt["a"],VRow:j["a"]});var Kt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-col",{staticClass:"col-12"},[a("v-card",{staticClass:"ma-3",attrs:{elevation:5}},[a("v-card-title",[t._v(" Tworzenie zgłoszenia ")])],1)],1),a("v-col",{staticClass:"col-12"},[a("v-card",{staticClass:"ma-3",attrs:{elevation:"5"}},[a("v-card-text",[a("ticket-form",{ref:"createForm",on:{valid:t.checkValid}})],1),a("v-card-actions",[a("v-btn",{staticClass:"mx-auto font-weight-bold",attrs:{text:"",disabled:!t.valid},on:{click:t.createTicket}},[t._v(" Dodaj zgłoszenie ")])],1)],1)],1)],1)],1)},Wt=[],Gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-form",{model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-text-field",{attrs:{rules:t.rules.ticket.description,label:"Opis zgłoszenia",required:""},model:{value:t.credentials.description,callback:function(e){t.$set(t.credentials,"description",e)},expression:"credentials.description"}}),a("v-text-field",{attrs:{label:"Dodatkowe informacje",required:""},model:{value:t.credentials.additional_information,callback:function(e){t.$set(t.credentials,"additional_information",e)},expression:"credentials.additional_information"}}),t.edit?t._e():[t.isAdmin()?a("agencies-autocomplete",{model:{value:t.credentials.agency_id,callback:function(e){t.$set(t.credentials,"agency_id",e)},expression:"credentials.agency_id"}}):t._e(),a("clients-autocomplete",{attrs:{agency_id:t.credentials.agency_id},model:{value:t.credentials.client_id,callback:function(e){t.$set(t.credentials,"client_id",e)},expression:"credentials.client_id"}}),a("devices-autocomplete",{attrs:{agency_id:t.credentials.agency_id},model:{value:t.credentials.device_id,callback:function(e){t.$set(t.credentials,"device_id",e)},expression:"credentials.device_id"}})],t.edit?[a("v-text-field",{attrs:{label:"Wiadomość zwrotna."},model:{value:t.credentials.message,callback:function(e){t.$set(t.credentials,"message",e)},expression:"credentials.message"}})]:t._e()],2)},Qt=[],Xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-autocomplete",{attrs:{items:t.agencies,rules:t.rules.agency_id.required,label:"Oddział","item-text":"agencyString","item-value":"id",required:""},scopedSlots:t._u([{key:"item",fn:function(e){return[a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(e.item.name))]),a("v-list-item-subtitle",[t._v(t._s(e.item.address))])],1)]}}]),model:{value:t.agency_id,callback:function(e){t.agency_id=e},expression:"agency_id"}})},Yt=[],te={name:"AgenciesAutocomplete",data:function(){return{agencies:[],agency_id:null,rules:{agency_id:{required:[function(t){return!!t||"Oddział jest wymagany."}]}}}},methods:{createAgenciesString:function(){this.agencies.forEach((function(t){t["agencyString"]=t.name+" "+t.address}))},fetchAgencies:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$http.get("/api/agencies").then((function(t){e.agencies=t.data.data.agencies,e.createAgenciesString()}));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},created:function(){this.fetchAgencies()},watch:{agency_id:function(t){this.$emit("input",t)}}},ee=te,ae=a("c6a6"),ne=Object(y["a"])(ee,Xt,Yt,!1,null,null,null),ie=ne.exports;w()(ne,{VAutocomplete:ae["a"],VListItemContent:kt["a"],VListItemSubtitle:kt["b"],VListItemTitle:kt["c"]});var re=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-autocomplete",{attrs:{disabled:!(t.agency_id||t.devices.length),items:t.devices,rules:t.rules.device_id.required,label:"Urządzenie","item-text":"deviceString","item-value":"id"},scopedSlots:t._u([{key:"item",fn:function(e){return[a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(e.item.name))]),a("v-list-item-subtitle",[t._v(t._s(e.item.serial_number))])],1)]}}]),model:{value:t.device_id,callback:function(e){t.device_id=e},expression:"device_id"}})},se=[],ce={name:"DevicesAutocomplete",props:{agency_id:{}},data:function(){return{device_id:null,devices:[],rules:{device_id:{required:[function(t){return!!t||"Urządzenie jest wymagane."}]}}}},methods:{createDevicesString:function(){this.devices.forEach((function(t){t["deviceString"]=t.name+" "+t.serial_number}))},getUrl:function(){return this.isAdmin()?this.agency_id?"/api/agency/".concat(this.agency_id,"/devices"):void 0:"/api/devices"},fetchDevices:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.getUrl()&&this.$http.get(this.getUrl()).then((function(t){e.devices=t.data.data.devices,e.createDevicesString()}));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},created:function(){this.fetchDevices()},watch:{device_id:function(t){this.$emit("input",t)},agency_id:function(){this.fetchDevices()}}},oe=ce,le=Object(y["a"])(oe,re,se,!1,null,null,null),ue=le.exports;w()(le,{VAutocomplete:ae["a"],VListItemContent:kt["a"],VListItemSubtitle:kt["b"],VListItemTitle:kt["c"]});var de=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-autocomplete",{attrs:{disabled:!(t.agency_id||t.clients.length),items:t.clients,rules:t.rules.client_id.required,label:"Klient","item-text":"clientString","item-value":"id"},scopedSlots:t._u([{key:"item",fn:function(e){return[a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(e.item.name))]),a("v-list-item-subtitle",[t._v(t._s(e.item.address))])],1)]}}]),model:{value:t.client_id,callback:function(e){t.client_id=e},expression:"client_id"}})},me=[],ve={name:"ClientsAutocomplete",props:{agency_id:{}},data:function(){return{client_id:null,clients:[],rules:{client_id:{required:[function(t){return!!t||"Urządzenie jest wymagane."}]}}}},methods:{createClientsString:function(){this.clients.forEach((function(t){t["clientString"]=t.name+" "+t.address}))},getUrl:function(){return this.isAdmin()?this.agency_id?"/api/agency/".concat(this.agency_id,"/clients"):void 0:"/api/clients"},fetchClients:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.getUrl()&&this.$http.get(this.getUrl()).then((function(t){e.clients=t.data.data.clients,e.createClientsString()}));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},created:function(){this.fetchClients()},watch:{client_id:function(t){this.$emit("input",t)},agency_id:function(){this.fetchClients()}}},pe=ve,he=Object(y["a"])(pe,de,me,!1,null,null,null),fe=he.exports;w()(he,{VAutocomplete:ae["a"],VListItemContent:kt["a"],VListItemSubtitle:kt["b"],VListItemTitle:kt["c"]});var ge={name:"TicketForm",props:{ticket:{},edit:{}},components:{AgenciesAutocomplete:ie,DevicesAutocomplete:ue,ClientsAutocomplete:fe},data:function(){return{agency_id:null,valid:!1,credentials:{},rules:{ticket:{description:[function(t){return!!t||"Opis jest wymagany."}],client_id:[function(t){return!!t||"Klient jest wymagany."}],agency_id:[function(t){return!!t||"Oddział jest wymagany."}],device_id:[function(t){return!!t||"Urządzenie jest wymagane."}],ticket_status_id:[function(t){return!!t||"Status zgłoszenia jest wymagany."}]}}}},methods:{parseFormData:function(){this.ticket&&(this.credentials=JSON.parse(JSON.stringify(this.ticket)))}},created:function(){this.parseFormData()},watch:{valid:function(t){this.$emit("valid",t)}}},be=ge,_e=Object(y["a"])(be,Gt,Qt,!1,null,null,null),ke=_e.exports;w()(_e,{VForm:S["a"],VTextField:T["a"]});var ye={name:"TicketCreate",data:function(){return{valid:!1}},components:{TicketForm:ke},methods:{createTicket:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$http.post("/api/ticket",this.$refs.createForm.credentials).then((function(){e.$toasted.show("Utworzono zgłoszenie",{type:"success"})}));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),checkValid:function(t){this.valid=t}}},xe=ye,we=a("62ad"),Ce=Object(y["a"])(xe,Kt,Wt,!1,null,null,null),Ve=Ce.exports;w()(Ce,{VBtn:C["a"],VCard:V["a"],VCardActions:$["a"],VCardText:$["b"],VCardTitle:$["c"],VCol:we["a"],VContainer:z["a"],VRow:j["a"]});var $e=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-row",[a("v-card",{staticClass:"col-8 mx-auto",attrs:{raised:"",shaped:""}},[a("v-card-text",[a("p",{staticClass:"display-1 text--primary"},[t._v("Sprawdź status zgłoszenia")]),a("v-form",{model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-text-field",{attrs:{rules:t.rules.ticket.token,counter:15,label:"Numer zgłoszenia",required:""},model:{value:t.token,callback:function(e){t.token=e},expression:"token"}})],1),t.status?a("v-alert",{attrs:{border:"left","colored-border":"",color:t.status.color,elevation:"2"}},[t._v(" Status zgłoszenia: "+t._s(t.status.name)+" ")]):t._e(),t.loading?a("loading"):t._e()],1),a("v-card-actions",[a("v-btn",{staticClass:"mx-auto font-weight-bold",attrs:{text:"",disabled:!t.valid},on:{click:t.checkStatus}},[t._v(" Sprawdź status ")])],1)],1)],1)],1)},ze=[],Se={name:"CheckStatus",components:{Loading:Ot["default"]},data:function(){return{valid:!1,token:"",loading:!1,status:null,rules:{ticket:{token:[function(t){return!!t||"Numer zgłoszenia jest wymagany."},function(t){return 15===t.length||"Numer zgłoszenia składa się z 15 znaków."}]}}}},methods:{checkStatus:function(){var t=this;this.loading=!0,this.status=null,this.$http.get("/api/ticket/".concat(this.token,"/status")).then((function(e){t.status=e.data.data.status,t.loading=!1}))}}},je=Se,Te=a("0798"),De=Object(y["a"])(je,$e,ze,!1,null,null,null),Oe=De.exports;w()(De,{VAlert:Te["a"],VBtn:C["a"],VCard:V["a"],VCardActions:$["a"],VCardText:$["b"],VContainer:z["a"],VForm:S["a"],VRow:j["a"],VTextField:T["a"]});var Ee=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-col",{staticClass:"col-12"},[a("v-card",{staticClass:"ma-3",attrs:{elevation:5}},[a("v-card-title",[t._v(" Zgłoszenia "),a("v-spacer"),t.isAdmin()?a("v-btn",{attrs:{icon:"",to:{name:"TicketCreate"}}},[a("font-awesome-icon",{attrs:{icon:"plus",size:"lg"}})],1):t._e()],1)],1)],1),a("v-col",{staticClass:"col-12"},[a("v-card",{staticClass:"ma-3",attrs:{elevation:"5"}},[a("v-card-title",[a("v-text-field",{attrs:{"append-icon":"search",label:"Szukaj","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("v-data-table",{attrs:{headers:t.headers,items:t.tickets,search:t.search,loading:t.loading},scopedSlots:t._u([{key:"item.client.name",fn:function(e){var n=e.item;return[a("router-link",{staticClass:"route",attrs:{to:{name:"ClientSummary",params:{id:n.client.id}}}},[t._v(" "+t._s(n.client.name)+" ")])]}},{key:"item.device.name",fn:function(e){var n=e.item;return[a("router-link",{staticClass:"route",attrs:{text:"",to:{name:"DeviceSummary",params:{id:n.device.id}}}},[t._v(" "+t._s(n.device.name)+" ")])]}},{key:"item.ticket_status.name",fn:function(e){var n=e.item;return[a("span",{class:n.ticket_status.color+"--text"},[t._v(" "+t._s(n.ticket_status.name)+" ")])]}},{key:"item.actions",fn:function(e){var n=e.item;return[a("v-btn",{attrs:{text:"",icon:"",color:"info",to:{name:"TicketSummary",params:{id:n.id}},elevation:"2"}},[a("v-icon",[t._v("keyboard_arrow_right")])],1)]}}])})],1)],1)],1)],1)},Ae=[],Ue={name:"List",data:function(){return{search:"",loading:!0,tickets:[],headers:[{text:"Token",value:"token",align:"left",sortable:!1},{text:"Klient",value:"client.name"},{text:"Urządzenie",value:"device.name"},{text:"Numer seryjny",value:"device.serial_number"},{text:"Status",value:"ticket_status.name"},{value:"actions",sortable:!1,align:"right"}]}},methods:{fetchTickets:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.get("/api/tickets").then((function(t){e.tickets=t.data.data.tickets,e.loading=!1}));case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),initPusher:function(){var t=this,e=this.$pusher.subscribe("tickets");e.bind("update",(function(){t.fetchTickets()}))},init:function(){var t=this;this.fetchTickets().then((function(){t.initPusher()}))}},created:function(){this.init()},destroyed:function(){this.$pusher.unsubscribe("tickets")}},Re=Ue,Ne=(a("5b1a"),a("8fea")),Le=a("2fa4"),Ie=Object(y["a"])(Re,Ee,Ae,!1,null,null,null),Fe=Ie.exports;w()(Ie,{VBtn:C["a"],VCard:V["a"],VCardTitle:$["c"],VCol:we["a"],VContainer:z["a"],VDataTable:Ne["a"],VIcon:Bt["a"],VRow:j["a"],VSpacer:Le["a"],VTextField:T["a"]});var Pe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("v-row",{staticClass:"col-12"},[a("v-col",{staticClass:"col-12"},[a("v-card",{staticClass:"ma-3",attrs:{elevation:5}},[a("v-card-title",[t._v(" Informacje o zgłoszeniu: "+t._s(t.ticket.token)+" "),a("v-spacer"),a("ticket-management",{attrs:{ticket:t.ticket}})],1)],1)],1),a("v-col",{staticClass:"col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4"},[a("ticket",{attrs:{ticket:t.ticket,loading:t.loading}}),a("ticket-status",{attrs:{ticket:t.ticket,loading:t.loading}}),a("device",{attrs:{device:t.ticket.device,loading:t.loading}}),a("client",{attrs:{client:t.ticket.client,loading:t.loading}})],1),a("v-col",{staticClass:"col-12 col-sm-12 col-md-6 col-lg-8 col-xl-8"},[a("timeline",{attrs:{loading:t.notesLoading,title:"Notatki",itemsCount:t.notesLength},scopedSlots:t._u([{key:"createForm",fn:function(){return[a("notes-create",{attrs:{ticket_id:t.ticket.id}})]},proxy:!0},{key:"pagination",fn:function(){return[a("v-pagination",{attrs:{length:t.notes.last_page,"total-visible":"7",circle:""},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})]},proxy:!0}])},t._l(t.notes.data,(function(t){return a("note",{key:t.id,attrs:{note:t}})})),1)],1)],1)],1)},qe=[],Be=(a("99af"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[t.editDevice?a("device-edit",{attrs:{device:t.device},on:{editCard:t.deviceEdit}}):a("device-details",{attrs:{device:t.device,loading:t.loading},on:{editCard:t.deviceEdit}})],1)}),Me=[],Ze=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"ma-3 pa-1",attrs:{elevation:5}},[t.loading?a("loading"):a("span",[a("v-card-title",[t._v(" Dane urządzenia "),a("v-spacer"),a("v-btn",{attrs:{icon:"",color:"info"},on:{click:t.changeEditState}},[a("font-awesome-icon",{attrs:{icon:"pen",size:"lg"}})],1),t.checkRoute?t._e():a("v-btn",{attrs:{icon:"",to:{name:"DeviceSummary",params:{id:t.device.id}}}},[a("font-awesome-icon",{attrs:{icon:"external-link-alt",size:"lg"}})],1)],1),a("v-card-text",[a("span",{staticClass:"font-weight-bold"},[t._v(" Nazwa: ")]),t._v(" "+t._s(t.device.name)+" "),a("br"),a("span",{staticClass:"font-weight-bold"},[t._v(" Numer seryjny: ")]),t._v(" "+t._s(t.device.serial_number)+" "),a("br"),a("span",{staticClass:"font-weight-bold"},[t._v(" Opis: ")]),t._v(" "+t._s(t.device.description)+" ")])],1)],1)},Je=[],He={name:"Details",components:{Loading:Ot["default"]},props:{device:{},loading:{}},methods:{changeEditState:function(){this.$emit("editCard",!0)}},computed:{checkRoute:function(){return"DeviceSummary"===this.$router.currentRoute.name}}},Ke=He,We=Object(y["a"])(Ke,Ze,Je,!1,null,null,null),Ge=We.exports;w()(We,{VBtn:C["a"],VCard:V["a"],VCardText:$["b"],VCardTitle:$["c"],VSpacer:Le["a"]});var Qe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"ma-3 pa-1",attrs:{elevation:5}},[t.loading?a("loading"):a("span",[a("v-card-title",[t._v(" Edycja urządzenia "),a("v-spacer"),a("v-btn",{attrs:{color:"green",disabled:!t.valid,icon:""},on:{click:t.updateDevice}},[a("font-awesome-icon",{attrs:{icon:"save",size:"lg"}})],1),a("v-btn",{attrs:{color:"red",icon:""},on:{click:t.changeEditState}},[a("font-awesome-icon",{attrs:{icon:"times",size:"lg"}})],1)],1),a("v-card-text",[a("device-form",{ref:"editForm",attrs:{device:t.device,edit:!0},on:{valid:t.checkValid}})],1)],1)],1)},Xe=[],Ye=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-form",{model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-text-field",{attrs:{rules:t.rules.device.serial_number,label:"Numer seryjny",required:""},model:{value:t.credentials.serial_number,callback:function(e){t.$set(t.credentials,"serial_number",e)},expression:"credentials.serial_number"}}),a("v-text-field",{attrs:{rules:t.rules.device.name,label:"Nazwa urządzenia",required:""},model:{value:t.credentials.name,callback:function(e){t.$set(t.credentials,"name",e)},expression:"credentials.name"}}),a("v-textarea",{attrs:{label:"Opis"},model:{value:t.credentials.description,callback:function(e){t.$set(t.credentials,"description",e)},expression:"credentials.description"}}),t.isAdmin()&&!t.edit?a("agencies-autocomplete",{model:{value:t.credentials.agency_id,callback:function(e){t.$set(t.credentials,"agency_id",e)},expression:"credentials.agency_id"}}):t._e()],1)},ta=[],ea={name:"DeviceForm",props:{device:{},edit:{}},components:{AgenciesAutocomplete:ie},data:function(){return{credentials:{},valid:!1,agencies:[],rules:{device:{name:[function(t){return!!t||"Nazwa jest wymagana."}],serial_number:[function(t){return!!t||"Numer seryjny jest wymagany."}]}}}},methods:{parseFormData:function(){this.device&&(this.credentials=JSON.parse(JSON.stringify(this.device)))},checkValid:function(t){this.valid=t}},created:function(){this.parseFormData()},watch:{valid:function(t){this.$emit("valid",t)}}},aa=ea,na=a("a844"),ia=Object(y["a"])(aa,Ye,ta,!1,null,null,null),ra=ia.exports;w()(ia,{VForm:S["a"],VTextField:T["a"],VTextarea:na["a"]});var sa={name:"Edit",data:function(){return{valid:!1}},props:{device:{},loading:{}},components:{DeviceForm:ra,Loading:Ot["default"]},methods:{updateDevice:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$http.put("/api/device",this.$refs.editForm.credentials).then((function(){e.$toasted.show("Zedytowano Urządzenie",{type:"success"}),e.changeEditState()}));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),changeEditState:function(){this.$emit("editCard",!1)},checkValid:function(t){this.valid=t}},computed:{checkRoute:function(){return"Device"===this.$router.currentRoute.name}}},ca=sa,oa=(a("9e62"),Object(y["a"])(ca,Qe,Xe,!1,null,null,null)),la=oa.exports;w()(oa,{VBtn:C["a"],VCard:V["a"],VCardText:$["b"],VCardTitle:$["c"],VSpacer:Le["a"]});var ua={name:"Device",props:{device:{},loading:{}},components:{DeviceDetails:Ge,DeviceEdit:la},data:function(){return{editDevice:!1}},methods:{deviceEdit:function(t){this.editDevice=t}}},da=ua,ma=Object(y["a"])(da,Be,Me,!1,null,null,null),va=ma.exports,pa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"ma-3 pa-1",attrs:{elevation:5}},[t.loading?a("loading"):a("span",[a("v-card-title",[t._v(" "+t._s(t.title)+" ")]),a("v-card-text",[t._t("createForm"),t.itemsCount?a("v-timeline",{attrs:{dense:""}},[t._t("default")],2):a("v-alert",{attrs:{border:"bottom",color:"#202338",dark:""}},[t._v(" Brak ")])],2),t.itemsCount?a("v-card-actions",[t._t("pagination")],2):t._e()],1)],1)},ha=[],fa={name:"Timeline",props:{loading:{},title:{},itemsCount:{}},components:{Loading:Ot["default"]}},ga=fa,ba=a("8414"),_a=Object(y["a"])(ga,pa,ha,!1,null,null,null),ka=_a.exports;w()(_a,{VAlert:Te["a"],VCard:V["a"],VCardActions:$["a"],VCardText:$["b"],VCardTitle:$["c"],VTimeline:ba["a"]});var ya=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-timeline-item",{attrs:{color:"green lighten-2",icon:"assignment"}},[t.editNote?a("note-edit",{attrs:{note:t.note},on:{editCard:t.noteEdit}}):a("note",{attrs:{note:t.note},on:{editCard:t.noteEdit}})],1)},xa=[],wa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-title",{staticClass:"subtitle-2",attrs:{dense:""}},[t.isAdmin()||t.isManager()&&!t.checkRoute?a("router-link",{staticClass:"route",attrs:{to:{name:"UserSummary",params:{id:t.note.author.id}}}},[a("span",{staticClass:"font-weight-bold"},[t._v(t._s(t.note.author.name)+" "+t._s(t.note.author.surname)+" ")]),a("v-spacer")],1):a("span",{staticClass:"font-weight-bold"},[t._v(t._s(t.note.author.name)+" "+t._s(t.note.author.surname)+" ")]),a("v-spacer"),t.currentUser.id===t.note.author.id&&t.note.editable?a("v-btn",{attrs:{icon:"",color:"info"},on:{click:t.changeEditState}},[a("font-awesome-icon",{attrs:{icon:"pen"}})],1):t._e()],1),a("v-card-text",{staticClass:"white text--primary"},[t._v(" "+t._s(t.note.content)+" ")]),a("v-card-actions",{staticClass:"text--secondary"},[t.note.ticket?a("router-link",{staticClass:"route",attrs:{to:{name:"TicketSummary",params:{id:t.note.ticket.id}}}},[a("span",{staticClass:"text--secondary"},[t._v("Numer zgłoszenia: ")]),t._v(" "+t._s(t.note.ticket.token)+" ")]):t._e(),a("v-spacer"),t._v(" "+t._s(t.note.created_at)+" ")],1)],1)},Ca=[],Va={name:"Note",props:{note:{}},methods:{changeEditState:function(){this.$emit("editCard",!0)}},computed:{checkRoute:function(){return"UserSummary"===this.$router.currentRoute.name}}},$a=Va,za=Object(y["a"])($a,wa,Ca,!1,null,null,null),Sa=za.exports;w()(za,{VBtn:C["a"],VCard:V["a"],VCardActions:$["a"],VCardText:$["b"],VCardTitle:$["c"],VSpacer:Le["a"]});var ja=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-title",{staticClass:"subtitle-2",attrs:{dense:""}},[t._v(" Edytuj notatkę "),a("v-spacer"),a("v-btn",{attrs:{color:"green",disabled:!t.valid,icon:""},on:{click:t.editNote}},[a("font-awesome-icon",{attrs:{icon:"save",size:"lg"}})],1),a("v-btn",{attrs:{color:"red",icon:""},on:{click:t.changeEditState}},[a("font-awesome-icon",{attrs:{icon:"times",size:"lg"}})],1)],1),a("v-card-text",{staticClass:"white text--primary"},[a("edit-form",{ref:"editForm",attrs:{ticket_id:t.currentUser.id,note:t.note},on:{valid:t.checkValid}})],1)],1)},Ta=[],Da=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-form",{model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-text-field",{staticClass:"mb-2",attrs:{"hide-details":"",label:"Treść notatki",rules:t.rules.note.content,rows:"1"},model:{value:t.credentials.content,callback:function(e){t.$set(t.credentials,"content",e)},expression:"credentials.content"}})],1)},Oa=[],Ea={name:"NoteForm",props:{note:{},edit:{},ticket_id:{},author_id:{}},data:function(){return{valid:!1,credentials:{content:""},rules:{note:{content:[function(t){return!!t||"Treść jest wymagana."}]}}}},methods:{parseFormData:function(){this.credentials=JSON.parse(JSON.stringify(this.note))},init:function(){this.note?this.parseFormData():(this.credentials.ticket_id=this.ticket_id,this.credentials.author_id=this.currentUser.id)}},created:function(){this.init()},watch:{valid:function(t){this.$emit("valid",t)}}},Aa=Ea,Ua=Object(y["a"])(Aa,Da,Oa,!1,null,null,null),Ra=Ua.exports;w()(Ua,{VForm:S["a"],VTextField:T["a"]});var Na={name:"Notes",props:{note:{}},components:{EditForm:Ra},data:function(){return{valid:!1}},methods:{editNote:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$http.put("/api/note",this.$refs.editForm.credentials).then((function(){e.$toasted.show("Zedytowano zgłoszenie",{type:"success"}),e.changeEditState()}));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),changeEditState:function(){this.$emit("editCard",!1)},checkValid:function(t){this.valid=t}}},La=Na,Ia=Object(y["a"])(La,ja,Ta,!1,null,null,null),Fa=Ia.exports;w()(Ia,{VBtn:C["a"],VCard:V["a"],VCardText:$["b"],VCardTitle:$["c"],VSpacer:Le["a"]});var Pa={name:"Notes",props:{note:{}},components:{Note:Sa,NoteEdit:Fa},data:function(){return{editNote:!1}},methods:{noteEdit:function(t){this.editNote=t}},computed:{checkRoute:function(){return"UserSummary"===this.$router.currentRoute.name}}},qa=Pa,Ba=a("1e06"),Ma=Object(y["a"])(qa,ya,xa,!1,null,null,null),Za=Ma.exports;w()(Ma,{VTimelineItem:Ba["a"]});var Ja=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[t.editClient?a("client-edit",{attrs:{client:t.client},on:{editCard:t.clientEdit}}):a("client-details",{attrs:{client:t.client,loading:t.loading},on:{editCard:t.clientEdit}})],1)},Ha=[],Ka=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"ma-3 pa-1",attrs:{elevation:5}},[t.loading?a("loading"):a("span",[a("v-card-title",[t._v(" Dane klienta "),a("v-spacer"),a("v-btn",{attrs:{icon:"",color:"info"},on:{click:t.changeEditState}},[a("font-awesome-icon",{attrs:{icon:"user-edit",size:"lg"}})],1),t.checkRoute?t._e():a("v-btn",{attrs:{icon:"",to:{name:"ClientSummary",params:{id:t.client.id}}}},[a("font-awesome-icon",{attrs:{icon:"external-link-alt",size:"lg"}})],1)],1),a("v-card-text",[a("span",{staticClass:"font-weight-bold"},[t._v(" Nazwa: ")]),t._v(" "+t._s(t.client.name)+" "),a("br"),a("span",{staticClass:"font-weight-bold"},[t._v(" Adres: ")]),t._v(" "+t._s(t.client.address)+" "),t.client.NIP?a("span",[a("br"),a("span",{staticClass:"font-weight-bold"},[t._v(" NIP: ")]),t._v(" "+t._s(t.client.NIP)+" ")]):t._e(),a("br"),a("span",{staticClass:"font-weight-bold"},[t._v(" Email: ")]),a("a",{attrs:{href:"mailto:"+t.client.email}},[t._v(" "+t._s(t.client.email)+" ")]),a("br"),a("span",{staticClass:"font-weight-bold"},[t._v(" Numer telefonu: ")]),a("a",{attrs:{href:"tel:"+t.client.phone_number}},[t._v(" "+t._s(t.client.phone_number)+" ")]),a("br"),a("span",{staticClass:"font-weight-bold"},[t._v(" Opis: ")]),t._v(" "+t._s(t.client.description)+" ")])],1)],1)},Wa=[],Ga={name:"ClientDetails",props:{client:{},loading:{}},components:{Loading:Ot["default"]},methods:{changeEditState:function(){this.$emit("editCard",!0)}},computed:{checkRoute:function(){return"ClientSummary"===this.$router.currentRoute.name}}},Qa=Ga,Xa=(a("c615"),Object(y["a"])(Qa,Ka,Wa,!1,null,null,null)),Ya=Xa.exports;w()(Xa,{VBtn:C["a"],VCard:V["a"],VCardText:$["b"],VCardTitle:$["c"],VSpacer:Le["a"]});var tn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"ma-3 pa-1",attrs:{elevation:5}},[t.loading?a("loading"):a("span",[a("v-card-title",[t._v(" Edycja klienta "),a("v-spacer"),a("v-btn",{attrs:{color:"green",disabled:!t.valid,icon:""},on:{click:t.updateClient}},[a("font-awesome-icon",{attrs:{icon:"save",size:"lg"}})],1),a("v-btn",{attrs:{color:"red",icon:""},on:{click:t.changeEditState}},[a("font-awesome-icon",{attrs:{icon:"times",size:"lg"}})],1)],1),a("v-card-text",[a("client-form",{ref:"editForm",attrs:{client:t.client,edit:!0},on:{valid:t.checkValid}})],1)],1)],1)},en=[],an=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-form",{model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-text-field",{attrs:{rules:t.rules.client.name,label:"Nazwa klienta",required:""},model:{value:t.credentials.name,callback:function(e){t.$set(t.credentials,"name",e)},expression:"credentials.name"}}),a("v-text-field",{attrs:{rules:t.rules.client.address,label:"Adres",required:"","aria-multiline":"true"},model:{value:t.credentials.address,callback:function(e){t.$set(t.credentials,"address",e)},expression:"credentials.address"}}),a("v-text-field",{attrs:{label:"Numer NIP",required:""},model:{value:t.credentials.NIP,callback:function(e){t.$set(t.credentials,"NIP",e)},expression:"credentials.NIP"}}),a("v-text-field",{attrs:{rules:t.rules.client.phone_number,label:"Numer telefonu",required:""},model:{value:t.credentials.phone_number,callback:function(e){t.$set(t.credentials,"phone_number",e)},expression:"credentials.phone_number"}}),a("v-text-field",{attrs:{rules:t.rules.client.email,label:"Email",required:""},model:{value:t.credentials.email,callback:function(e){t.$set(t.credentials,"email",e)},expression:"credentials.email"}}),a("v-textarea",{attrs:{label:"Opis"},model:{value:t.credentials.description,callback:function(e){t.$set(t.credentials,"description",e)},expression:"credentials.description"}}),t.isAdmin()&&!t.edit?a("agencies-autocomplete",{model:{value:t.credentials.agency_id,callback:function(e){t.$set(t.credentials,"agency_id",e)},expression:"credentials.agency_id"}}):t._e()],1)},nn=[],rn={name:"ClientForm",props:{client:{},edit:{}},components:{AgenciesAutocomplete:ie},data:function(){return{credentials:{},valid:!1,rules:{client:{description:[function(t){return!!t||"Opis jest wymagany."}],name:[function(t){return!!t||"Nazwa jest wymagana."}],address:[function(t){return!!t||"Adres jest wymagany."}],phone_number:[function(t){return!!t||"Numer telefonu jest wymagany."}],email:[function(t){return/.+@.+/.test(t)||"Wprowawdź prawidłowy adres E-mail"}]}}}},methods:{parseFormData:function(){this.client&&(this.credentials=JSON.parse(JSON.stringify(this.client)))}},created:function(){this.parseFormData()},watch:{valid:function(t){this.$emit("valid",t)}}},sn=rn,cn=Object(y["a"])(sn,an,nn,!1,null,null,null),on=cn.exports;w()(cn,{VForm:S["a"],VTextField:T["a"],VTextarea:na["a"]});var ln={name:"ClientEdit",props:{client:{},loading:{}},components:{ClientForm:on,Loading:Ot["default"]},data:function(){return{valid:!1}},methods:{updateClient:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$http.put("/api/client",this.$refs.editForm.credentials).then((function(){e.$toasted.show("Zedytowano Klienta",{type:"success"}),e.changeEditState()}));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),changeEditState:function(){this.$emit("editCard",!1)},checkValid:function(t){this.valid=t}},computed:{checkRoute:function(){return"Client"===this.$router.currentRoute.name}}},un=ln,dn=(a("2042"),Object(y["a"])(un,tn,en,!1,null,null,null)),mn=dn.exports;w()(dn,{VBtn:C["a"],VCard:V["a"],VCardText:$["b"],VCardTitle:$["c"],VSpacer:Le["a"]});var vn={name:"Client",props:{client:{},loading:{}},components:{ClientDetails:Ya,ClientEdit:mn},data:function(){return{editClient:!1}},methods:{clientEdit:function(t){this.editClient=t}}},pn=vn,hn=Object(y["a"])(pn,Ja,Ha,!1,null,null,null),fn=hn.exports,gn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[t.editTicket?a("ticket-edit",{attrs:{ticket:t.ticket},on:{editCard:t.ticketEdit}}):a("ticket-details",{attrs:{ticket:t.ticket,loading:t.loading},on:{editCard:t.ticketEdit}})],1)},bn=[],_n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"ma-3 pa-1",attrs:{elevation:5}},[t.loading?a("Loading"):a("span",[a("v-card-title",[t._v(" Dane zgłoszenia "),a("v-spacer"),a("v-btn",{attrs:{icon:"",color:"info"},on:{click:t.changeEditState}},[a("font-awesome-icon",{attrs:{icon:"user-edit",size:"lg"}})],1),t.checkRoute?t._e():a("v-btn",{attrs:{icon:"",to:{name:"TicketSummary",params:{id:t.ticket.id}}}},[a("font-awesome-icon",{attrs:{icon:"external-link-alt",size:"lg"}})],1)],1),a("v-card-text",[a("span",{staticClass:"font-weight-bold"},[t._v(" Numer: ")]),t._v(" "+t._s(t.ticket.token)+" "),a("br"),a("span",{staticClass:"font-weight-bold"},[t._v(" Opis: ")]),t._v(" "+t._s(t.ticket.description)+" "),a("br"),a("span",{staticClass:"font-weight-bold"},[t._v(" Dodatkowe informacje: ")]),t._v(" "+t._s(t.ticket.additional_information)+" "),t.ticket.message?a("span",[a("br"),a("span",{staticClass:"font-weight-bold"},[t._v(" Wiadomość zwrotna: ")]),t._v(" "+t._s(t.ticket.message)+" ")]):t._e()])],1)],1)},kn=[],yn={name:"TicketDetails",props:{ticket:{},loading:{}},components:{Loading:Ot["default"]},methods:{changeEditState:function(){this.$emit("editCard",!0)}},computed:{checkRoute:function(){return"TicketSummary"===this.$router.currentRoute.name}}},xn=yn,wn=(a("5e8b"),Object(y["a"])(xn,_n,kn,!1,null,null,null)),Cn=wn.exports;w()(wn,{VBtn:C["a"],VCard:V["a"],VCardText:$["b"],VCardTitle:$["c"],VSpacer:Le["a"]});var Vn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"ma-3 pa-1",attrs:{elevation:5}},[t.loading?a("loading"):a("span",[a("v-card-title",[t._v(" Edycja Zgłoszenia "),a("v-spacer"),a("v-btn",{attrs:{color:"green",disabled:!t.valid,icon:""},on:{click:t.updateTicket}},[a("font-awesome-icon",{attrs:{icon:"save",size:"lg"}})],1),a("v-btn",{attrs:{color:"red",icon:""},on:{click:t.changeEditState}},[a("font-awesome-icon",{attrs:{icon:"times",size:"lg"}})],1)],1),a("v-card-text",[a("ticket-form",{ref:"editForm",attrs:{ticket:t.ticket,edit:!0},on:{valid:t.checkValid}})],1)],1)],1)},$n=[],zn={name:"TicketEdit",props:{ticket:{},loading:{}},components:{TicketForm:ke,Loading:Ot["default"]},data:function(){return{valid:!1}},methods:{updateTicket:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$http.put("/api/ticket",this.$refs.editForm.credentials).then((function(){e.$toasted.show("Zedytowano zgłoszenie",{type:"success"}),e.changeEditState()}));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),changeEditState:function(){this.$emit("editCard",!1)},checkValid:function(t){this.valid=t}}},Sn=zn,jn=Object(y["a"])(Sn,Vn,$n,!1,null,null,null),Tn=jn.exports;w()(jn,{VBtn:C["a"],VCard:V["a"],VCardText:$["b"],VCardTitle:$["c"],VSpacer:Le["a"]});var Dn={name:"Client",props:{ticket:{},loading:{}},components:{TicketDetails:Cn,TicketEdit:Tn},data:function(){return{editTicket:!1}},methods:{ticketEdit:function(t){this.editTicket=t}}},On=Dn,En=Object(y["a"])(On,gn,bn,!1,null,null,null),An=En.exports,Un=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"ma-3 pa-1",attrs:{elevation:5}},[t.loading?a("Loading"):a("span",[a("v-card-title",[t._v(" Status zgłoszenia ")]),a("v-card-text",[a("ticket-statuses-select",{attrs:{ticket:t.ticket},model:{value:t.ticket_status_id,callback:function(e){t.ticket_status_id=e},expression:"ticket_status_id"}})],1)],1)],1)},Rn=[],Nn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-select",{attrs:{items:t.ticketStatuses,rules:t.rules.ticket_status_id.required,label:"Status zgłoszenia","item-text":"name","item-value":"id",disabled:t.disabled()},model:{value:t.ticketStatusId,callback:function(e){t.ticketStatusId=e},expression:"ticketStatusId"}})},Ln=[],In={name:"TicketStatusesSelect",props:{ticket:{}},data:function(){return{ticketStatuses:[],ticketStatusId:{},rules:{ticket_status_id:{required:[function(t){return!!t||"Status zgłoszenia jest wymagany."}]}}}},methods:{fetchTicketStatuses:function(){var t=this;this.$http.get("/api/ticket/".concat(this.ticket.id,"/statuses")).then((function(e){t.ticketStatuses=e.data.data.ticket_statuses}))},changeTicketStatus:function(){var t=this;this.$http.put("/api/ticket/".concat(this.ticket.id,"/status/").concat(this.ticketStatusId)).then((function(e){t.ticketStatuses=e.data.data.ticket_statuses}))},disabled:function(){var t=["zakończone","anulowane"];return t.includes(this.ticket.ticket_status.name)}},created:function(){var t=this;this.ticketStatusId=this.ticket.ticket_status_id,this.fetchTicketStatuses(),this.$watch("ticketStatusId",(function(e){t.changeTicketStatus(),t.$emit("input",e)}))},watch:{ticket:function(t,e){t.ticket_status_id!==e.ticket_status_id&&this.fetchTicketStatuses()}}},Fn=In,Pn=a("b974"),qn=Object(y["a"])(Fn,Nn,Ln,!1,null,null,null),Bn=qn.exports;w()(qn,{VSelect:Pn["a"]});var Mn={name:"TicketStatus",props:{ticket:{},loading:{}},components:{Loading:Ot["default"],TicketStatusesSelect:Bn},data:function(){return{ticket_status_id:null}},methods:{init:function(){this.ticket_status_id=this.ticket.ticket_status_id}},created:function(){this.init()}},Zn=Mn,Jn=(a("020a"),Object(y["a"])(Zn,Un,Rn,!1,null,null,null)),Hn=Jn.exports;w()(Jn,{VCard:V["a"],VCardText:$["b"],VCardTitle:$["c"]});var Kn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("note-form",{ref:"createForm",attrs:{ticket_id:t.ticket_id},on:{valid:t.checkValid}}),a("v-btn",{staticClass:"mb-3",attrs:{block:"",disabled:!t.valid},on:{click:function(e){return t.addNote()}}},[t._v(" Dodaj notatkę ")])],1)},Wn=[],Gn={name:"NoteCreate",props:{ticket_id:{}},components:{NoteForm:Ra},data:function(){return{valid:!1}},methods:{addNote:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$http.post("/api/note",this.$refs.createForm.credentials).then((function(){e.$toasted.show("Dodano notatkę.",{type:"success"})}));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),checkValid:function(t){this.valid=t}}},Qn=Gn,Xn=Object(y["a"])(Qn,Kn,Wn,!1,null,null,null),Yn=Xn.exports;w()(Xn,{VBtn:C["a"]});var ti=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("v-menu",{attrs:{bottom:"",left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-btn",t._g({attrs:{icon:""}},n),[a("v-icon",[t._v("mdi-dots-vertical")])],1)]}}])},[a("v-list",[a("v-list-item",{on:{click:function(e){t.generateDocuments=!0}}},[a("v-list-item-title",[t._v("Wygeneruj dokumenty")])],1),a("v-list-item",{on:{click:function(e){t.removeTicket=!0}}},[a("v-list-item-title",{staticClass:"red--text"},[t._v("Usuń")])],1)],1)],1),a("remove-ticket-dialog",{attrs:{modal:t.removeTicket,ticket:t.ticket},on:{modal:t.removeDialog}}),a("generate-documents-dialog",{attrs:{modal:t.generateDocuments,ticket:t.ticket},on:{modal:t.generateDocumentsDialog}})],1)},ei=[],ai=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{"max-width":"500px"},on:{"click:outside":function(e){return t.closeDialog()}},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("v-card",[a("v-card-title",[t._v(" Usuń zgłoszenie "+t._s(t.ticket.token)+" ")]),a("v-card-text",[t._v(" Czy napewno chcesz usunąć zgłoszenie "),a("strong",[t._v(t._s(t.ticket.token))]),t._v("? "),a("br"),a("span",{staticClass:"error--text font-weight-bold text-uppercase mx-auto"},[t._v("Usuniętych elementów nie można przywrócić")])]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(e){return t.removeTicket()}}},[t._v("Usuń")]),a("v-btn",{attrs:{color:"darken-1",text:""},on:{click:function(e){return t.closeDialog()}}},[t._v("Anuluj")])],1)],1)],1)},ni=[],ii={name:"RemoveTicketDialog",props:{modal:{},ticket:{}},methods:{removeTicket:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$http.delete("/api/ticket/".concat(this.ticket.id)).then((function(){e.$toasted.show("Usunięto zgloszenie.",{type:"success"}),e.$router.push("/tickets")}));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),closeDialog:function(){this.$emit("modal",!1)}}},ri=ii,si=a("169a"),ci=Object(y["a"])(ri,ai,ni,!1,null,null,null),oi=ci.exports;w()(ci,{VBtn:C["a"],VCard:V["a"],VCardActions:$["a"],VCardText:$["b"],VCardTitle:$["c"],VDialog:si["a"],VSpacer:Le["a"]});var li=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{"max-width":"500px"},on:{"click:outside":function(e){return t.closeDialog()}},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("v-card",[a("v-card-title",[t._v(" Generowanie dokumentów ")]),a("v-card-text",[a("v-btn",{attrs:{text:"",block:""},on:{click:function(e){return t.generateCreationDocument("creation")}}},[t._v(" Dokument utworzenia zgłoszenia ")]),a("v-btn",{attrs:{text:"",block:""},on:{click:function(e){return t.generateCreationDocument("resignation")}}},[t._v(" Dokument rezygnacji ze zgłoszenia ")]),a("v-btn",{attrs:{text:"",block:""},on:{click:function(e){return t.generateCreationDocument("returning")}}},[t._v("Dokument zakończenia zgłoszenia (odbioru) ")])],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"darken-1",text:""},on:{click:function(e){return t.closeDialog()}}},[t._v("Anuluj")])],1)],1)],1)},ui=[],di=(a("3ca3"),a("ddb0"),a("2b3d"),{name:"GenerateDocumentDialog",props:{modal:{},ticket:{}},data:function(){return{url:{}}},methods:{generateCreationDocument:function(t){var e,a=this;switch(t){case"creation":e="utworzenia";break;case"resignation":e="rezygnacji";break;case"returning":e="zakonczenia";break;default:e="zgloszenie"}this.$http.get("/api/document/".concat(this.ticket.id,"/").concat(t),{responseType:"blob"}).then((function(t){a.downloadDocument(t,"potwierdzenie_".concat(e,"-").concat(a.ticket.token))}))},downloadDocument:function(t,e){var a=window.URL.createObjectURL(new Blob([t.data])),n=document.createElement("a");n.href=a,n.setAttribute("download","".concat(e,".pdf")),document.body.appendChild(n),n.click()},closeDialog:function(){this.$emit("modal",!1)}}}),mi=di,vi=Object(y["a"])(mi,li,ui,!1,null,null,null),pi=vi.exports;w()(vi,{VBtn:C["a"],VCard:V["a"],VCardActions:$["a"],VCardText:$["b"],VCardTitle:$["c"],VDialog:si["a"],VSpacer:Le["a"]});var hi={name:"ClientManagement",props:{ticket:{}},components:{RemoveTicketDialog:oi,GenerateDocumentsDialog:pi},data:function(){return{removeTicket:!1,generateDocuments:!1}},methods:{closeDialog:function(){this.$emit("modal",!1)},removeDialog:function(t){this.removeTicket=t},generateDocumentsDialog:function(t){this.generateDocuments=t}}},fi=hi,gi=a("e449"),bi=Object(y["a"])(fi,ti,ei,!1,null,null,null),_i=bi.exports;w()(bi,{VBtn:C["a"],VIcon:Bt["a"],VList:gt["a"],VListItem:bt["a"],VListItemTitle:kt["c"],VMenu:gi["a"]});var ki={name:"TicketSummary",data:function(){return{ticket:[],notes:[],notesLoading:!0,page:1,loading:!0,note:{credentials:{}}}},components:{Device:va,Client:fn,Timeline:ka,Note:Za,Ticket:An,NotesCreate:Yn,TicketManagement:_i,TicketStatus:Hn},methods:{init:function(){var t=this;this.fetchTicket().then((function(){t.getTicketNotes(),t.initPusher()}))},fetchTicket:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.get("/api/ticket/".concat(this.$route.params.id)).then((function(t){e.ticket=t.data.data.ticket,e.loading=!1,e.note.credentials.ticket_id=e.ticket.id}));case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getTicketNotes:function(){var t=this;this.$http.get("/api/ticket/".concat(this.$route.params.id,"/notes?page=").concat(this.page)).then((function(e){t.notes=e.data.data.notes,t.notesLoading=!1}))},addNote:function(){var t=this;this.$http.post("/api/note",this.note.credentials).then((function(){t.$toasted.show("Utworzono notatkę",{type:"success"})}))},initPusher:function(){var t=this,e=this.$pusher.subscribe("ticket-".concat(this.ticket.id)),a=this.$pusher.subscribe("device-".concat(this.ticket.device.id)),n=this.$pusher.subscribe("client-".concat(this.ticket.client.id));a.bind("update",(function(e){t.ticket.device=e.device})),n.bind("update",(function(e){t.ticket.client=e.client})),e.bind("remove",(function(){t.$router.push("/tickets")})),e.bind("update",this.fetchTicket),e.bind("notes",(function(){t.getTicketNotes(t.page)}))}},created:function(){this.init()},computed:{notesLength:function(){return this.notes.data?this.notes.data.length:0}},watch:{page:function(t){this.getTicketNotes(t)}},destroyed:function(){this.$pusher.unsubscribe("ticket-".concat(this.ticket.id)),this.$pusher.unsubscribe("device-".concat(this.ticket.device.id)),this.$pusher.unsubscribe("client-".concat(this.ticket.client.id))}},yi=ki,xi=a("891e"),wi=Object(y["a"])(yi,Pe,qe,!1,null,null,null),Ci=wi.exports;w()(wi,{VCard:V["a"],VCardTitle:$["c"],VCol:we["a"],VContainer:z["a"],VPagination:xi["a"],VRow:j["a"],VSpacer:Le["a"]});var Vi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-col",{staticClass:"col-12"},[a("v-card",{staticClass:"ma-3",attrs:{elevation:5}},[a("v-card-title",[t._v(" Informacje o urządzeniu: "+t._s(t.device.name)+" "),a("v-spacer"),a("device-management",{attrs:{device:t.device}})],1)],1)],1),a("v-col",{staticClass:"col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4"},[a("device",{attrs:{device:t.device,loading:t.loading}})],1),a("v-col",{staticClass:"col-12 col-sm-12 col-md-6 col-lg-8 col-xl-8"},[a("timeline",{attrs:{loading:t.loading,title:"Zgłoszenia",itemsCount:t.ticketsLength},scopedSlots:t._u([{key:"pagination",fn:function(){return[a("v-pagination",{attrs:{length:t.tickets.last_page,"total-visible":"7",circle:""},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})]},proxy:!0}])},t._l(t.tickets.data,(function(t){return a("ticket",{key:t.id,attrs:{ticket:t}})})),1)],1)],1)],1)},$i=[],zi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-timeline-item",{attrs:{color:t.ticket.ticket_status.color},scopedSlots:t._u([{key:"icon",fn:function(){return[a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("font-awesome-icon",t._g({attrs:{icon:"sticky-note",size:"lg",color:"white"}},n))]}}])},[a("span",[t._v(" "+t._s(t.ticket.ticket_status.name)+" ")])])]},proxy:!0}])},[[a("router-link",{staticClass:"route",attrs:{to:{name:"TicketSummary",params:{id:t.ticket.id}}}},[a("span",{staticClass:"font-weight-bold text--primary"},[t._v("Numer zgłoszenia: ")]),t._v(" "+t._s(t.ticket.token)+" ")])],a("v-card",{staticClass:"elevation-2"},[a("v-card-text",{staticClass:"text--primary"},[t._v(" "+t._s(t.ticket.description)+" ")]),a("v-card-actions",{staticClass:"text--secondary"},[a("v-spacer"),t._v(" "+t._s(t.ticket.created_at)+" ")],1)],1)],2)},Si=[],ji={name:"Ticket",props:{ticket:{}}},Ti=ji,Di=a("3a2f"),Oi=Object(y["a"])(Ti,zi,Si,!1,null,null,null),Ei=Oi.exports;w()(Oi,{VCard:V["a"],VCardActions:$["a"],VCardText:$["b"],VSpacer:Le["a"],VTimelineItem:Ba["a"],VTooltip:Di["a"]});var Ai=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("v-menu",{attrs:{bottom:"",left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-btn",t._g({attrs:{icon:""}},n),[a("v-icon",[t._v("mdi-dots-vertical")])],1)]}}])},[a("v-list",[a("v-list-item",{on:{click:function(e){t.removeDevice=!0}}},[a("v-list-item-title",{staticClass:"red--text"},[t._v("Usuń")])],1)],1)],1),a("remove-device-dialog",{attrs:{modal:t.removeDevice,device:t.device},on:{modal:t.removeDialog}})],1)},Ui=[],Ri=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{"max-width":"500px"},on:{"click:outside":function(e){return t.closeDialog()}},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("v-card",[a("v-card-title",[t._v(" Usuń urządzenie "+t._s(t.device.name)+" ")]),a("v-card-text",[t._v(" Czy napewno chcesz usunąć urządzenie "),a("strong",[t._v(t._s(t.device.name))]),t._v("oraz jego elementy: "),a("ul",[a("li",[t._v(" Zgłoszenia ")])]),a("br"),a("span",{staticClass:"error--text font-weight-bold text-uppercase mx-auto"},[t._v("Usuniętych elementów nie można przywrócić")])]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(e){return t.removeDevice()}}},[t._v("Usuń")]),a("v-btn",{attrs:{color:"darken-1",text:""},on:{click:function(e){return t.closeDialog()}}},[t._v("Anuluj")])],1)],1)],1)},Ni=[],Li={name:"RemoveDeviceDialog",props:{modal:{},device:{}},methods:{removeDevice:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$http.delete("/api/device/".concat(this.device.id)).then((function(){e.$toasted.show("Usunięto urządzenie.",{type:"success"}),e.$router.push("/devices")}));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),closeDialog:function(){this.$emit("modal",!1)}}},Ii=Li,Fi=Object(y["a"])(Ii,Ri,Ni,!1,null,null,null),Pi=Fi.exports;w()(Fi,{VBtn:C["a"],VCard:V["a"],VCardActions:$["a"],VCardText:$["b"],VCardTitle:$["c"],VDialog:si["a"],VSpacer:Le["a"]});var qi={name:"DeviceManagement",props:{device:{}},components:{RemoveDeviceDialog:Pi},data:function(){return{removeDevice:!1}},methods:{closeDialog:function(){this.$emit("modal",!1)},removeDialog:function(t){this.removeDevice=t}}},Bi=qi,Mi=Object(y["a"])(Bi,Ai,Ui,!1,null,null,null),Zi=Mi.exports;w()(Mi,{VBtn:C["a"],VIcon:Bt["a"],VList:gt["a"],VListItem:bt["a"],VListItemTitle:kt["c"],VMenu:gi["a"]});var Ji={name:"DeviceSummary",data:function(){return{device:[],tickets:[],ticketsLoading:!0,page:1,loading:!0}},components:{Ticket:Ei,Device:va,Timeline:ka,DeviceManagement:Zi},methods:{fetchDevice:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.get("/api/device/".concat(this.$route.params.id)).then((function(t){e.device=t.data.data.device,e.loading=!1}));case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getDeviceTickets:function(){var t=this;this.$http.get("/api/device/".concat(this.device.id,"/tickets?page=").concat(this.page)).then((function(e){t.tickets=e.data.data.tickets,t.ticketsLoading=!1}))},initPusher:function(){var t=this,e=this.$pusher.subscribe("device-".concat(this.device.id));e.bind("update",this.fetchDevice),e.bind("tickets",this.getDeviceTickets),e.bind("remove",(function(){t.$router.push("/devices")}))},init:function(){var t=this;this.fetchDevice().then((function(){t.initPusher(),t.getDeviceTickets()}))}},created:function(){this.init()},computed:{ticketsLength:function(){return this.tickets.data?this.tickets.data.length:0}},watch:{page:function(t){this.getDeviceTickets(t)}},destroyed:function(){this.$puhser.unsubscribe("device-".concat(this.device.id))}},Hi=Ji,Ki=Object(y["a"])(Hi,Vi,$i,!1,null,null,null),Wi=Ki.exports;w()(Ki,{VCard:V["a"],VCardTitle:$["c"],VCol:we["a"],VContainer:z["a"],VPagination:xi["a"],VRow:j["a"],VSpacer:Le["a"]});var Gi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-col",{staticClass:"col-12"},[a("v-card",{staticClass:"ma-3",attrs:{elevation:5}},[a("v-card-title",[t._v(" Tworzenie klienta ")])],1)],1),a("v-col",{staticClass:"col-12"},[a("v-card",{staticClass:"ma-3",attrs:{elevation:"5"}},[a("v-tabs",{attrs:{centered:"",grow:"","icons-and-text":"",color:"#202338","background-color":"transparent"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tabs-slider"),a("v-tab",{attrs:{href:"#create"}},[t._v(" Nowy klient "),a("font-awesome-icon",{attrs:{icon:"plus",size:"lg"}})],1),a("v-tab",{attrs:{href:"#check"}},[t._v(" Istniejący "),a("font-awesome-icon",{attrs:{icon:"search-plus",size:"lg"}})],1)],1),a("v-tabs-items",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tab-item",{attrs:{value:"check"}},[a("check-exist")],1),a("v-tab-item",{attrs:{value:"create"}},[a("v-card-text",[a("client-form",{ref:"createForm",on:{valid:t.checkValid}})],1),a("v-card-actions",[a("v-btn",{staticClass:"mx-auto font-weight-bold",attrs:{text:"",disabled:!t.valid},on:{click:t.createClient}},[t._v(" Dodaj klienta ")])],1)],1)],1)],1)],1)],1)],1)},Qi=[],Xi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("v-card-text",[a("check-exist-form",{ref:"checkExistForm",on:{valid:t.checkValid}})],1),a("v-card-actions",[a("v-btn",{staticClass:"mx-auto font-weight-bold",attrs:{text:"",disabled:!t.valid},on:{click:t.addClientByNumber}},[t._v(" Dodaj klienta ")])],1)],1)},Yi=[],tr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-form",{model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-text-field",{attrs:{rules:t.rules.number.required,label:"NIP lub numer klienta",required:""},model:{value:t.credentials.number,callback:function(e){t.$set(t.credentials,"number",e)},expression:"credentials.number"}}),t.isAdmin()?a("agencies-autocomplete",{model:{value:t.credentials.agency_id,callback:function(e){t.$set(t.credentials,"agency_id",e)},expression:"credentials.agency_id"}}):t._e()],1)},er=[],ar={name:"CheckExistForm",components:{AgenciesAutocomplete:ie},data:function(){return{credentials:{},valid:!1,agencies:[],rules:{number:{required:[function(t){return!!t||"Numer seryjny jest wymagany."}]},agency_id:{required:[function(t){return!!t||"Oddział jest wymagany."}]}}}},methods:{setDefault:function(){this.isAdmin()||(this.credentials.agency_id=this.$store.state.currentUser.agency_id)}},created:function(){this.setDefault()},watch:{valid:function(t){this.$emit("valid",t)}}},nr=ar,ir=Object(y["a"])(nr,tr,er,!1,null,null,null),rr=ir.exports;w()(ir,{VForm:S["a"],VTextField:T["a"]});var sr={name:"CheckExist",components:{CheckExistForm:rr},data:function(){return{valid:!1}},methods:{addClientByNumber:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$http.post("/api/client/number",this.$refs.checkExistForm.credentials).then((function(){e.$toasted.show("Dodano klienta do oddziału",{type:"success"})}));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),checkValid:function(t){this.valid=t}}},cr=sr,or=Object(y["a"])(cr,Xi,Yi,!1,null,null,null),lr=or.exports;w()(or,{VBtn:C["a"],VCardActions:$["a"],VCardText:$["b"]});var ur={name:"ClientCreate",components:{ClientForm:on,CheckExist:lr},data:function(){return{valid:!1,tab:null}},methods:{createClient:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$http.post("/api/client",this.$refs.createForm.credentials).then((function(){e.$toasted.show("Utworzono klienta",{type:"success"})}));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),checkValid:function(t){this.valid=t}}},dr=ur,mr=a("71a3"),vr=a("c671"),pr=a("fe57"),hr=a("aac8"),fr=a("9a96"),gr=Object(y["a"])(dr,Gi,Qi,!1,null,null,null),br=gr.exports;w()(gr,{VBtn:C["a"],VCard:V["a"],VCardActions:$["a"],VCardText:$["b"],VCardTitle:$["c"],VCol:we["a"],VContainer:z["a"],VRow:j["a"],VTab:mr["a"],VTabItem:vr["a"],VTabs:pr["a"],VTabsItems:hr["a"],VTabsSlider:fr["a"]});var _r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-col",{staticClass:"col-12"},[a("v-card",{staticClass:"ma-3",attrs:{elevation:5}},[a("v-card-title",[t._v(" Urządzenia "),a("v-spacer"),t.isAdmin()?a("v-btn",{attrs:{icon:"",to:{name:"DeviceCreate"}}},[a("font-awesome-icon",{attrs:{icon:"plus",size:"lg"}})],1):t._e()],1)],1)],1),a("v-col",{staticClass:"col-12"},[a("v-card",{staticClass:"ma-3",attrs:{elevation:"5"}},[a("v-card-title",[a("v-text-field",{attrs:{"append-icon":"search",label:"Szukaj","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("v-data-table",{attrs:{headers:t.headers,items:t.devices,search:t.search,loading:t.loading},scopedSlots:t._u([{key:"item.actions",fn:function(e){var n=e.item;return[a("v-btn",{attrs:{text:"",icon:"",color:"info",to:{name:"DeviceSummary",params:{id:n.id,device:n}},elevation:"2"}},[a("v-icon",[t._v("keyboard_arrow_right")])],1)]}}])})],1)],1)],1)],1)},kr=[],yr={name:"List",loading:!0,data:function(){return{search:"",loading:!0,devices:[],headers:[{text:"Numer seryjny",value:"serial_number",sortable:!1,align:"left"},{text:"Nazwa",value:"name"},{text:"Opis",value:"description"},{value:"actions",sortable:!1,align:"right"}]}},methods:{fetchDevices:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.get("/api/devices").then((function(t){e.devices=t.data.data.devices,e.loading=!1}));case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),initPusher:function(){var t=this.$pusher.subscribe("devices");t.bind("update",this.fetchDevices)},init:function(){var t=this;this.fetchDevices().then((function(){t.initPusher()}))}},created:function(){this.fetchDevices(),this.initPusher()},destroyed:function(){this.$puhser.unsubscribe("devices")}},xr=yr,wr=Object(y["a"])(xr,_r,kr,!1,null,null,null),Cr=wr.exports;w()(wr,{VBtn:C["a"],VCard:V["a"],VCardTitle:$["c"],VCol:we["a"],VContainer:z["a"],VDataTable:Ne["a"],VIcon:Bt["a"],VRow:j["a"],VSpacer:Le["a"],VTextField:T["a"]});var Vr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-col",{staticClass:"col-12"},[a("v-card",{staticClass:"ma-3",attrs:{elevation:5}},[a("v-card-title",[t._v(" Tworzenie urządzenia ")])],1)],1),a("v-col",{staticClass:"col-12"},[a("v-card",{staticClass:"ma-3",attrs:{elevation:"5"}},[a("v-tabs",{attrs:{centered:"",grow:"","icons-and-text":"",color:"#202338","background-color":"transparent"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tabs-slider"),a("v-tab",{attrs:{href:"#create"}},[t._v(" Nowe urządzenie "),a("font-awesome-icon",{attrs:{icon:"plus",size:"lg"}})],1),a("v-tab",{attrs:{href:"#check"}},[t._v(" Istniejące "),a("font-awesome-icon",{attrs:{icon:"search-plus",size:"lg"}})],1)],1),a("v-tabs-items",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tab-item",{attrs:{value:"check"}},[a("check-exist")],1),a("v-tab-item",{attrs:{value:"create"}},[a("v-card-text",[a("device-form",{ref:"createForm",on:{valid:t.checkValid}})],1),a("v-card-actions",[a("v-btn",{staticClass:"mx-auto font-weight-bold",attrs:{text:"",disabled:!t.valid},on:{click:t.createDevice}},[t._v(" Dodaj urządzenie ")])],1)],1)],1)],1)],1)],1)],1)},$r=[],zr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("v-card-text",[a("serial-number-form",{ref:"serialNumberForm",on:{valid:t.checkValid}})],1),a("v-card-actions",[a("v-btn",{staticClass:"mx-auto font-weight-bold",attrs:{text:"",disabled:!t.valid},on:{click:t.addDeviceBySerialNumber},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addDeviceBySerialNumber(e)}}},[t._v(" Dodaj urządzenie ")])],1)],1)},Sr=[],jr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-form",{model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-text-field",{attrs:{rules:t.rules.serial_number.required,label:"Numer seryjny",required:""},model:{value:t.credentials.serial_number,callback:function(e){t.$set(t.credentials,"serial_number",e)},expression:"credentials.serial_number"}}),t.isAdmin()?a("agencies-autocomplete",{model:{value:t.credentials.agency_id,callback:function(e){t.$set(t.credentials,"agency_id",e)},expression:"credentials.agency_id"}}):t._e()],1)},Tr=[],Dr={name:"SerialNumberForm",components:{AgenciesAutocomplete:ie},data:function(){return{credentials:{},agencies:[],valid:!1,rules:{serial_number:{required:[function(t){return!!t||"Numer seryjny jest wymagany."}]},agency_id:{required:[function(t){return!!t||"Oddział jest wymagany."}]}}}},methods:{setDefault:function(){this.isAdmin()||(this.credentials.agency_id=this.$store.state.currentUser.agency_id)}},created:function(){this.setDefault()},watch:{valid:function(t){this.$emit("valid",t)}}},Or=Dr,Er=Object(y["a"])(Or,jr,Tr,!1,null,null,null),Ar=Er.exports;w()(Er,{VForm:S["a"],VTextField:T["a"]});var Ur={name:"CheckExist",components:{SerialNumberForm:Ar},data:function(){return{valid:!1}},methods:{addDeviceBySerialNumber:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$http.post("/api/device/serialNumber",this.$refs.serialNumberForm.credentials).then((function(){e.$toasted.show("Dodano urządzenie do oddziału",{type:"success"})}));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),checkValid:function(t){this.valid=t}}},Rr=Ur,Nr=Object(y["a"])(Rr,zr,Sr,!1,null,null,null),Lr=Nr.exports;w()(Nr,{VBtn:C["a"],VCardActions:$["a"],VCardText:$["b"]});var Ir={name:"ClientCreate",data:function(){return{valid:!1,tab:null}},components:{CheckExist:Lr,DeviceForm:ra},methods:{createDevice:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$http.post("/api/device",this.$refs.createForm.credentials).then((function(){e.$toasted.show("Utworzono urządzenie",{type:"success"})})).catch((function(){e.$toasted.show("Nie udało się utworzyć zgłoszenia",{type:"error"})}));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),checkValid:function(t){this.valid=t}}},Fr=Ir,Pr=Object(y["a"])(Fr,Vr,$r,!1,null,null,null),qr=Pr.exports;w()(Pr,{VBtn:C["a"],VCard:V["a"],VCardActions:$["a"],VCardText:$["b"],VCardTitle:$["c"],VCol:we["a"],VContainer:z["a"],VRow:j["a"],VTab:mr["a"],VTabItem:vr["a"],VTabs:pr["a"],VTabsItems:hr["a"],VTabsSlider:fr["a"]});var Br=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-col",{staticClass:"col-12"},[a("v-card",{staticClass:"ma-3",attrs:{elevation:5}},[a("v-card-title",[t._v(" Klienci "),a("v-spacer"),t.isAdmin()?a("v-btn",{attrs:{icon:"",to:{name:"ClientCreate"}}},[a("font-awesome-icon",{attrs:{icon:"plus",size:"lg"}})],1):t._e()],1)],1)],1),a("v-col",{staticClass:"col-12"},[a("v-card",{staticClass:"ma-3",attrs:{elevation:"5"}},[a("v-card-title",[a("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("v-data-table",{attrs:{headers:t.headers,items:t.clients,search:t.search,loading:t.loading},scopedSlots:t._u([{key:"item.email",fn:function(e){var n=e.item;return[a("a",{staticClass:"route",attrs:{href:"mailto:"+n.email}},[t._v(" "+t._s(n.email)+" ")])]}},{key:"item.phone_number",fn:function(e){var n=e.item;return[a("a",{staticClass:"route",attrs:{href:"tel:"+n.phone_number}},[t._v(" "+t._s(n.phone_number)+" ")])]}},{key:"item.actions",fn:function(e){var n=e.item;return[a("v-btn",{attrs:{text:"",icon:"",color:"info",to:{name:"ClientSummary",params:{id:n.id,client:n}},elevation:"2"}},[a("v-icon",[t._v("keyboard_arrow_right")])],1)]}}])})],1)],1)],1)],1)},Mr=[],Zr={name:"ClientList",loading:!0,data:function(){return{search:"",loading:!0,clients:[],headers:[{text:"Nazwa",value:"name",align:"left"},{text:"Adres",value:"address"},{text:"Email",value:"email"},{text:"Numer Telefonu",value:"phone_number",sortable:!1},{text:"NIP",value:"NIP",sortable:!1},{value:"actions",sortable:!1,align:"right"}]}},methods:{fetchClients:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.get("/api/clients").then((function(t){e.clients=t.data.data.clients,e.loading=!1}));case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),initPusher:function(){var t=this.$pusher.subscribe("clients");t.bind("update",this.fetchClients)},init:function(){var t=this;this.fetchClients().then((function(){t.initPusher()}))}},created:function(){this.init()},destroyed:function(){this.$pusher.unsubscribe("clients")}},Jr=Zr,Hr=(a("a24d"),Object(y["a"])(Jr,Br,Mr,!1,null,null,null)),Kr=Hr.exports;w()(Hr,{VBtn:C["a"],VCard:V["a"],VCardTitle:$["c"],VCol:we["a"],VContainer:z["a"],VDataTable:Ne["a"],VIcon:Bt["a"],VRow:j["a"],VSpacer:Le["a"],VTextField:T["a"]});var Wr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-col",{staticClass:"col-12"},[a("v-card",{staticClass:"ma-3",attrs:{elevation:5}},[a("v-card-title",[t._v(" Informacje o kliencie: "+t._s(t.client.name)+" "),a("v-spacer"),a("client-management",{attrs:{client:t.client}})],1)],1)],1),a("v-col",{staticClass:"col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4"},[a("client",{attrs:{client:t.client,loading:t.loading}})],1),a("v-col",{staticClass:"col-12 col-sm-12 col-md-6 col-lg-8 col-xl-8"},[a("timeline",{attrs:{loading:t.ticketsLoading,title:"Zgłoszenia",itemsCount:t.ticketsLength},scopedSlots:t._u([{key:"pagination",fn:function(){return[a("v-pagination",{attrs:{length:t.tickets.last_page,"total-visible":"7",circle:""},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})]},proxy:!0}])},t._l(t.tickets.data,(function(t){return a("ticket",{key:t.id,attrs:{ticket:t}})})),1)],1)],1)],1)},Gr=[],Qr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("v-menu",{attrs:{bottom:"",left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-btn",t._g({attrs:{icon:""}},n),[a("v-icon",[t._v("mdi-dots-vertical")])],1)]}}])},[a("v-list",[a("v-list-item",{on:{click:function(e){t.removeClient=!0}}},[a("v-list-item-title",{staticClass:"red--text"},[t._v("Usuń")])],1)],1)],1),a("remove-client-dialog",{attrs:{modal:t.removeClient,client:t.client},on:{modal:t.removeDialog}})],1)},Xr=[],Yr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{"max-width":"500px"},on:{"click:outside":function(e){return t.closeDialog()}},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("v-card",[a("v-card-title",[t._v(" Usuń klienta "+t._s(t.client.name)+" ")]),a("v-card-text",[t._v(" Czy napewno chcesz usunąć klienta "),a("strong",[t._v(t._s(t.client.name))]),t._v("oraz jego elementy: "),a("ul",[a("li",[t._v(" Zgłoszenia ")])]),a("br"),a("span",{staticClass:"error--text font-weight-bold text-uppercase mx-auto"},[t._v("Usuniętych elementów nie można przywrócić")])]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(e){return t.removeClient()}}},[t._v("Usuń")]),a("v-btn",{attrs:{color:"darken-1",text:""},on:{click:function(e){return t.closeDialog()}}},[t._v("Anuluj")])],1)],1)],1)},ts=[],es={name:"RemoveClientDialog",props:{modal:{},client:{}},methods:{removeClient:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$http.delete("/api/client/".concat(this.client.id)).then((function(){e.$toasted.show("Usunięto klienta.",{type:"success"}),e.$router.push("/clients")}));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),closeDialog:function(){this.$emit("modal",!1)}}},as=es,ns=Object(y["a"])(as,Yr,ts,!1,null,null,null),is=ns.exports;w()(ns,{VBtn:C["a"],VCard:V["a"],VCardActions:$["a"],VCardText:$["b"],VCardTitle:$["c"],VDialog:si["a"],VSpacer:Le["a"]});var rs={name:"ClientManagement",props:{client:{}},components:{RemoveClientDialog:is},data:function(){return{removeClient:!1}},methods:{closeDialog:function(){this.$emit("modal",!1)},removeDialog:function(t){this.removeClient=t}}},ss=rs,cs=Object(y["a"])(ss,Qr,Xr,!1,null,null,null),os=cs.exports;w()(cs,{VBtn:C["a"],VIcon:Bt["a"],VList:gt["a"],VListItem:bt["a"],VListItemTitle:kt["c"],VMenu:gi["a"]});var ls={name:"ClientSummary",data:function(){return{client:[],tickets:[],loading:!0,ticketsLoading:!0,page:1}},components:{Timeline:ka,Ticket:Ei,Client:fn,ClientManagement:os},methods:{fetchClient:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.get("/api/client/".concat(this.$route.params.id)).then((function(t){e.client=t.data.data.client,e.loading=!1}));case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getClientTickets:function(){var t=this;this.$http.get("/api/client/".concat(this.client.id,"/tickets?page=").concat(this.page)).then((function(e){t.tickets=e.data.data.tickets,t.ticketsLoading=!1}))},initPusher:function(){var t=this,e=this.$pusher.subscribe("client-".concat(this.client.id));e.bind("update",this.fetchClient),e.bind("tickets",this.getClientTickets),e.bind("remove",(function(){t.$router.push("/clients")}))},init:function(){var t=this;this.fetchClient().then((function(){t.getClientTickets(),t.initPusher()}))}},created:function(){this.init()},computed:{ticketsLength:function(){return this.tickets.data?this.tickets.data.length:0}},watch:{page:function(t){this.getClientTickets(t)}},destroyed:function(){this.$puhser.unsubscribe("client-".concat(this.client.id))}},us=ls,ds=Object(y["a"])(us,Wr,Gr,!1,null,null,null),ms=ds.exports;w()(ds,{VCard:V["a"],VCardTitle:$["c"],VCol:we["a"],VContainer:z["a"],VPagination:xi["a"],VRow:j["a"],VSpacer:Le["a"]});var vs=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-col",{staticClass:"col-12"},[a("v-card",{staticClass:"ma-3",attrs:{elevation:5}},[a("v-card-title",[t._v(" Informacje o pracowniku: "+t._s(t.user.name)+" "+t._s(t.user.surname)+" "),a("v-spacer"),a("user-management",{attrs:{user:t.user}})],1)],1),t.user.blocked_at?a("v-alert",{staticClass:"ma-3",attrs:{elevation:"5",prominent:"",icon:"block",type:"error"}},[t._v(" Użytkownik jest zablokowany ")]):t._e()],1),a("v-col",{staticClass:"col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4"},[a("user",{attrs:{user:t.user,loading:t.loading}})],1),a("v-col",{staticClass:"col-12 col-sm-12 col-md-6 col-lg-8 col-xl-8"},[a("timeline",{attrs:{loading:t.loading,title:"Notatki",itemsCount:t.notesLength},scopedSlots:t._u([{key:"pagination",fn:function(){return[a("v-pagination",{attrs:{length:t.notes.last_page,"total-visible":"7",circle:""},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})]},proxy:!0}])},t._l(t.notes.data,(function(t){return a("note",{key:t.id,attrs:{note:t}})})),1)],1)],1)],1)},ps=[],hs=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[t.editUser?a("user-edit",{attrs:{user:t.user},on:{editCard:t.userEdit}}):a("user-details",{attrs:{user:t.user,loading:t.loading},on:{editCard:t.userEdit}})],1)},fs=[],gs=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"ma-3 pa-1",attrs:{elevation:5}},[t.loading?a("loading"):a("span",[a("v-card-title",[t._v(" Dane pracownika "),a("v-spacer"),a("v-btn",{attrs:{icon:"",color:"info"},on:{click:t.changeEditState}},[a("font-awesome-icon",{attrs:{icon:"user-edit",size:"lg"}})],1),t.checkRoute?t._e():a("v-btn",{attrs:{icon:"",to:{name:"UserSummary",params:{id:t.user.id}}}},[a("font-awesome-icon",{attrs:{icon:"external-link-alt",size:"lg"}})],1)],1),a("v-card-text",[a("span",{staticClass:"font-weight-bold"},[t._v(" Imię i nazwisko: ")]),t._v(" "+t._s(t.user.name)+" "+t._s(t.user.surname)+" "),a("br"),a("span",{staticClass:"font-weight-bold"},[t._v(" Email: ")]),a("a",{attrs:{href:"mailto:"+t.user.email}},[t._v(" "+t._s(t.user.email)+" ")]),a("br"),a("span",{staticClass:"font-weight-bold"},[t._v(" Numer telefonu: ")]),a("a",{attrs:{href:"tel:"+t.user.phone_number}},[t._v(" "+t._s(t.user.phone_number)+" ")]),t.isAdmin()?a("span",[a("br"),a("span",{staticClass:"font-weight-bold"},[t._v(" Rola użytkownika: ")]),t._v(" "+t._s(t.user.role.name)+" ")]):t._e()])],1)],1)},bs=[],_s={name:"UserDetails",props:{user:{},loading:{}},components:{Loading:Ot["default"]},methods:{changeEditState:function(){this.$emit("editCard",!0)}},computed:{checkRoute:function(){return"UserSummary"===this.$router.currentRoute.name}}},ks=_s,ys=(a("5b69"),Object(y["a"])(ks,gs,bs,!1,null,null,null)),xs=ys.exports;w()(ys,{VBtn:C["a"],VCard:V["a"],VCardText:$["b"],VCardTitle:$["c"],VSpacer:Le["a"]});var ws=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"ma-3 pa-1",attrs:{elevation:5}},[t.loading?a("loading"):a("span",[a("v-card-title",[t._v(" Edycja użytkownika "),a("v-spacer"),a("v-btn",{attrs:{color:"green",disabled:!t.valid,icon:""},on:{click:t.updateUser}},[a("font-awesome-icon",{attrs:{icon:"save",size:"lg"}})],1),a("v-btn",{attrs:{color:"red",icon:""},on:{click:t.changeEditState}},[a("font-awesome-icon",{attrs:{icon:"times",size:"lg"}})],1)],1),a("v-card-text",[a("user-form",{ref:"editForm",attrs:{user:t.user,edit:!0},on:{valid:t.checkValid}})],1)],1)],1)},Cs=[],Vs=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-form",{model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-text-field",{attrs:{rules:t.rules.user.name,label:"Imię",required:""},model:{value:t.credentials.name,callback:function(e){t.$set(t.credentials,"name",e)},expression:"credentials.name"}}),a("v-text-field",{attrs:{rules:t.rules.user.surname,label:"Nazwisko",required:""},model:{value:t.credentials.surname,callback:function(e){t.$set(t.credentials,"surname",e)},expression:"credentials.surname"}}),a("v-text-field",{attrs:{rules:t.rules.user.password,label:"Hasło",type:"password",required:""},model:{value:t.credentials.password,callback:function(e){t.$set(t.credentials,"password",e)},expression:"credentials.password"}}),a("v-text-field",{attrs:{rules:t.rules.user.phone_number,label:"Numer telefonu",required:""},model:{value:t.credentials.phone_number,callback:function(e){t.$set(t.credentials,"phone_number",e)},expression:"credentials.phone_number"}}),a("v-text-field",{attrs:{rules:t.rules.user.email,label:"Email",required:""},model:{value:t.credentials.email,callback:function(e){t.$set(t.credentials,"email",e)},expression:"credentials.email"}}),t.isAdmin()?a("span",[t.edit?t._e():a("agencies-autocomplete",{model:{value:t.credentials.agency_id,callback:function(e){t.$set(t.credentials,"agency_id",e)},expression:"credentials.agency_id"}}),t.user?a("agency-role-select",{attrs:{agencyRoleId:t.user.agency_role_id},model:{value:t.credentials.agency_role_id,callback:function(e){t.$set(t.credentials,"agency_role_id",e)},expression:"credentials.agency_role_id"}}):a("agency-role-select",{model:{value:t.credentials.agency_role_id,callback:function(e){t.$set(t.credentials,"agency_role_id",e)},expression:"credentials.agency_role_id"}})],1):t._e()],1)},$s=[],zs=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-select",{attrs:{items:t.agencyRoles,rules:t.rules.agency_role_id.required,label:"Rola użytkownika","item-text":"name","item-value":"id"},model:{value:t.agency_role_id,callback:function(e){t.agency_role_id=e},expression:"agency_role_id"}})},Ss=[],js={name:"RolesSelect",props:{agencyRoleId:{default:null}},data:function(){return{agencyRoles:[],agency_role_id:null,rules:{agency_role_id:{required:[function(t){return!!t||"Rola użytkownika jest wymagany."}]}}}},methods:{fetchAgencyRoles:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$http.get("/api/agency/roles").then((function(t){e.agencyRoles=t.data.data.roles}));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},created:function(){this.fetchAgencyRoles(),this.agencyRoleId&&(this.agency_role_id=this.agencyRoleId)},watch:{agency_role_id:function(){this.$emit("input",this.agency_role_id)}}},Ts=js,Ds=Object(y["a"])(Ts,zs,Ss,!1,null,null,null),Os=Ds.exports;w()(Ds,{VSelect:Pn["a"]});var Es={name:"UserForm",props:{user:{},edit:{}},components:{AgenciesAutocomplete:ie,AgencyRoleSelect:Os},data:function(){return{credentials:{},valid:!1,agencyValid:{},agencies:[],agencyRoles:[],rules:{user:{name:[function(t){return!!t||"Imię jest wymagana."}],surname:[function(t){return!!t||"Nazwawisko jest wymagane."}],phone_number:[function(t){return!!t||"Numer telefonu jest wymagany."}],email:[function(t){return/.+@.+/.test(t)||"Wprowawdź prawidłowy adres E-mail"}],agency_id:[function(t){return!!t||"Oddział jest wymagany."}],agency_role_id:[function(t){return!!t||"Rola użytkownika jest wymagany."}]}}}},methods:{parseFormData:function(){this.user&&(this.credentials=JSON.parse(JSON.stringify(this.user)))},fetchAgencyRoles:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.isAdmin()&&this.$http.get("/api/agency/roles").then((function(t){e.agencyRoles=t.data.data.roles}));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),setDefault:function(){this.isAdmin()||(this.credentials.agency_role_id=3,this.credentials.agency_id=this.$store.state.currentUser.agency_id)}},created:function(){this.parseFormData(),this.fetchAgencyRoles(),this.setDefault()},watch:{valid:function(t){this.$emit("valid",t)}}},As=Es,Us=Object(y["a"])(As,Vs,$s,!1,null,null,null),Rs=Us.exports;w()(Us,{VForm:S["a"],VTextField:T["a"]});var Ns={name:"UserEdit",data:function(){return{valid:!1}},props:{user:{},loading:{}},components:{UserForm:Rs,Loading:Ot["default"]},methods:{updateUser:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$http.put("/api/user",this.$refs.editForm.credentials).then((function(){e.$toasted.show("Zedytowano Użytkownika",{type:"success"}),e.changeEditState()}));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),changeEditState:function(){this.$emit("editCard",!1)},checkValid:function(t){this.valid=t}},computed:{checkRoute:function(){return"User"===this.$router.currentRoute.name}}},Ls=Ns,Is=(a("71ff"),Object(y["a"])(Ls,ws,Cs,!1,null,null,null)),Fs=Is.exports;w()(Is,{VBtn:C["a"],VCard:V["a"],VCardText:$["b"],VCardTitle:$["c"],VSpacer:Le["a"]});var Ps={name:"User",props:{user:{},loading:{}},components:{UserDetails:xs,UserEdit:Fs},data:function(){return{editUser:!1}},methods:{userEdit:function(t){this.editUser=t}}},qs=Ps,Bs=Object(y["a"])(qs,hs,fs,!1,null,null,null),Ms=Bs.exports,Zs=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[t.isManager()&&t.currentUser.id!==t.user.id?a("v-menu",{attrs:{bottom:"",left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-btn",t._g({attrs:{icon:""}},n),[a("v-icon",[t._v("mdi-dots-vertical")])],1)]}}],null,!1,2097855828)},[a("v-list",[t.user.blocked_at?a("v-list-item",{on:{click:function(e){t.unblockUser=!0}}},[a("v-list-item-title",[t._v("Odblokuj")])],1):a("v-list-item",{on:{click:function(e){t.blockUser=!0}}},[a("v-list-item-title",[t._v("Zablokuj")])],1),a("v-list-item",{on:{click:function(e){t.removeUser=!0}}},[a("v-list-item-title",{staticClass:"red--text"},[t._v("Usuń")])],1)],1)],1):t._e(),a("remove-user-dialog",{attrs:{modal:t.removeUser,user:t.user},on:{modal:t.removeDialog}}),a("block-user-dialog",{attrs:{modal:t.blockUser,user:t.user},on:{modal:t.blockDialog}}),a("unblock-user-dialog",{attrs:{modal:t.unblockUser,user:t.user},on:{modal:t.unblockDialog}})],1)},Js=[],Hs=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{"max-width":"500px"},on:{"click:outside":function(e){return t.closeDialog()}},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("v-card",[a("v-card-title",[t._v(" Usuń użytkownika "+t._s(t.user.name)+" "+t._s(t.user.surname)+" ")]),a("v-card-text",[t._v(" Czy napewno chcesz usunąć użytkownika "),a("strong",[t._v(t._s(t.user.name)+" "+t._s(t.user.surname))]),t._v("oraz jego elementy: "),a("ul",[a("li",[t._v(" Notatki ")])]),a("br"),a("span",{staticClass:"error--text font-weight-bold text-uppercase mx-auto"},[t._v("Usuniętych elementów nie można przywrócić")])]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(e){return t.removeUser()}}},[t._v("Usuń")]),a("v-btn",{attrs:{color:"darken-1",text:""},on:{click:function(e){return t.closeDialog()}}},[t._v("Anuluj")])],1)],1)],1)},Ks=[],Ws={name:"RemoveUserDialog",props:{modal:{},user:{}},methods:{removeUser:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$http.delete("/api/user/".concat(this.user.id)).then((function(){e.$toasted.show("Usunięto użytkownika.",{type:"success"}),e.$router.push("/users")}));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),closeDialog:function(){this.$emit("modal",!1)}}},Gs=Ws,Qs=Object(y["a"])(Gs,Hs,Ks,!1,null,null,null),Xs=Qs.exports;w()(Qs,{VBtn:C["a"],VCard:V["a"],VCardActions:$["a"],VCardText:$["b"],VCardTitle:$["c"],VDialog:si["a"],VSpacer:Le["a"]});var Ys=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{"max-width":"500px"},on:{"click:outside":function(e){return t.closeDialog()}},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("v-card",[a("v-card-title",[t._v(" Zablokuj użytkownika "+t._s(t.user.name)+" "+t._s(t.user.surname)+" ")]),a("v-card-text",[t._v(" Czy napewno chcesz zablokować użytkownika "),a("strong",[t._v(t._s(t.user.name)+" "+t._s(t.user.surname))]),t._v("? ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(e){return t.blockUser()}}},[t._v("Zablokuj")]),a("v-btn",{attrs:{color:"darken-1",text:""},on:{click:function(e){return t.closeDialog()}}},[t._v("Anuluj")])],1)],1)],1)},tc=[],ec={name:"RemoveUserDialog",props:{modal:{},user:{}},methods:{blockUser:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$http.post("/api/user/".concat(this.user.id,"/block")).then((function(){e.$toasted.show("Zablokowano użytkownika.",{type:"success"})}));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),closeDialog:function(){this.$emit("modal",!1)}}},ac=ec,nc=Object(y["a"])(ac,Ys,tc,!1,null,null,null),ic=nc.exports;w()(nc,{VBtn:C["a"],VCard:V["a"],VCardActions:$["a"],VCardText:$["b"],VCardTitle:$["c"],VDialog:si["a"],VSpacer:Le["a"]});var rc=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{"max-width":"500px"},on:{"click:outside":function(e){return t.closeDialog()}},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("v-card",[a("v-card-title",[t._v(" Odblokuj użytkownika "+t._s(t.user.name)+" "+t._s(t.user.surname)+" ")]),a("v-card-text",[t._v(" Czy napewno chcesz odblokować użytkownika "),a("strong",[t._v(t._s(t.user.name)+" "+t._s(t.user.surname))]),t._v("? ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(e){return t.unblockUser()}}},[t._v("Odblokuj")]),a("v-btn",{attrs:{color:"darken-1",text:""},on:{click:function(e){return t.closeDialog()}}},[t._v("Anuluj")])],1)],1)],1)},sc=[],cc={name:"RemoveUserDialog",props:{modal:{},user:{}},methods:{unblockUser:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$http.post("/api/user/".concat(this.user.id,"/unblock")).then((function(){e.$toasted.show("Odblokowano użytkownika.",{type:"success"})}));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),closeDialog:function(){this.$emit("modal",!1)}}},oc=cc,lc=Object(y["a"])(oc,rc,sc,!1,null,null,null),uc=lc.exports;w()(lc,{VBtn:C["a"],VCard:V["a"],VCardActions:$["a"],VCardText:$["b"],VCardTitle:$["c"],VDialog:si["a"],VSpacer:Le["a"]});var dc={name:"UserManagement",props:{user:{}},components:{RemoveUserDialog:Xs,BlockUserDialog:ic,UnblockUserDialog:uc},data:function(){return{removeUser:!1,blockUser:!1,unblockUser:!1}},methods:{closeDialog:function(){this.$emit("modal",!1)},removeDialog:function(t){this.removeUser=t},blockDialog:function(t){this.blockUser=t},unblockDialog:function(t){this.unblockUser=t}}},mc=dc,vc=Object(y["a"])(mc,Zs,Js,!1,null,null,null),pc=vc.exports;w()(vc,{VBtn:C["a"],VIcon:Bt["a"],VList:gt["a"],VListItem:bt["a"],VListItemTitle:kt["c"],VMenu:gi["a"]});var hc={name:"UserSummary",components:{Timeline:ka,Note:Za,User:Ms,UserManagement:pc},data:function(){return{user:[],notes:[],notesLoading:!0,page:1,loading:!0}},methods:{fetchUser:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.get("/api/user/".concat(this.$route.params.id)).then((function(t){e.user=t.data.data.user,e.loading=!1}));case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getUserNotes:function(){var t=this;this.$http.get("/api/user/".concat(this.user.id,"/notes?page=").concat(this.page)).then((function(e){t.notes=e.data.data.notes,t.notesLoading=!1}))},initPusher:function(){var t=this.$pusher.subscribe("user-".concat(this.user.id));t.bind("update",this.fetchUser),t.bind("notes",this.getUserNotes)},init:function(){var t=this;this.fetchUser().then((function(){t.initPusher(),t.getUserNotes()}))}},created:function(){this.init()},watch:{page:function(t){this.getUserNotes(t)}},computed:{notesLength:function(){return this.notes.data?this.notes.data.length:0}},destroyed:function(){this.$puhser.unsubscribe("user-".concat(this.user.id))}},fc=hc,gc=Object(y["a"])(fc,vs,ps,!1,null,null,null),bc=gc.exports;w()(gc,{VAlert:Te["a"],VCard:V["a"],VCardTitle:$["c"],VCol:we["a"],VContainer:z["a"],VPagination:xi["a"],VRow:j["a"],VSpacer:Le["a"]});var _c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-col",{staticClass:"col-12"},[a("v-card",{staticClass:"ma-3",attrs:{elevation:5}},[a("v-card-title",[t._v(" Tworzenie użytkownika ")])],1)],1),a("v-col",{staticClass:"col-12"},[a("v-card",{staticClass:"ma-3",attrs:{elevation:"5"}},[a("v-card-text",[a("user-form",{ref:"createForm",on:{valid:t.checkValid}})],1),a("v-card-actions",[a("v-btn",{staticClass:"mx-auto font-weight-bold",attrs:{text:"",disabled:!t.valid},on:{click:t.createUser}},[t._v(" Dodaj użytkownika ")])],1)],1)],1)],1)],1)},kc=[],yc={name:"UserCreate",data:function(){return{valid:!1}},components:{UserForm:Rs},methods:{createUser:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$http.post("/api/user",this.$refs.createForm.credentials).then((function(){e.$toasted.show("Utworzono uzytkownika",{type:"success"})})).catch((function(){e.$toasted.show("Nie udało się utworzyć zgłoszenia",{type:"error"})}));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),checkValid:function(t){this.valid=t}}},xc=yc,wc=Object(y["a"])(xc,_c,kc,!1,null,null,null),Cc=wc.exports;w()(wc,{VBtn:C["a"],VCard:V["a"],VCardActions:$["a"],VCardText:$["b"],VCardTitle:$["c"],VCol:we["a"],VContainer:z["a"],VRow:j["a"]});var Vc=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-col",{staticClass:"col-12"},[a("v-card",{staticClass:"ma-3",attrs:{elevation:5}},[a("v-card-title",[t._v(" Pracownicy "),a("v-spacer"),a("v-btn",{attrs:{icon:"",to:{name:"UserCreate"}}},[a("font-awesome-icon",{attrs:{icon:"plus",size:"lg"}})],1)],1)],1)],1),a("v-col",{staticClass:"col-12"},[a("v-card",{staticClass:"ma-3",attrs:{elevation:"5"}},[a("v-card-title",[a("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("v-data-table",{attrs:{headers:t.headers,items:t.users,search:t.search,loading:t.loading},scopedSlots:t._u([{key:"item.email",fn:function(e){var n=e.item;return[a("a",{staticClass:"route",attrs:{href:"mailto:"+n.email}},[t._v(" "+t._s(n.email)+" ")])]}},{key:"item.phone_number",fn:function(e){var n=e.item;return[a("a",{staticClass:"route",attrs:{href:"tel:"+n.phone_number}},[t._v(" "+t._s(n.phone_number)+" ")])]}},{key:"item.actions",fn:function(e){var n=e.item;return[a("v-btn",{attrs:{text:"",icon:"",color:"info",to:{name:"UserSummary",params:{id:n.id,client:n}},elevation:"2"}},[a("v-icon",[t._v("keyboard_arrow_right")])],1)]}},{key:"item.role.name",fn:function(e){var n=e.item;return[a("span",{staticClass:"text-uppercase"},[t._v(" "+t._s(n.role.name)+" ")])]}}])})],1)],1)],1)],1)},$c=[],zc={name:"UsersList",loading:!0,props:{agency:{}},data:function(){return{search:"",loading:!0,users:[],headers:[{text:"Imię",value:"name",align:"left"},{text:"Nazwisko",value:"surname"},{text:"Email",value:"email"},{text:"Numer Telefonu",value:"phone_number",sortable:!1},{text:"Rola",value:"role.name"},{value:"actions",sortable:!1,align:"right"}]}},methods:{fetchUsers:function(){var t=this;this.$http.get("/api/users").then((function(e){t.users=e.data.data.users,t.loading=!1}))},fetchEmployees:function(){var t=this;this.$http.get("/api/agency/".concat(this.$route.params.id,"/employees")).then((function(e){t.users=e.data.data.employees,t.loading=!1}))},fetchData:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.agency){t.next=5;break}return t.next=3,this.fetchEmployees();case 3:t.next=7;break;case 5:return t.next=7,this.fetchUsers();case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),init:function(){var t=this;this.fetchData().then((function(){t.initPusher()}))},initPusher:function(){var t=this.$pusher.subscribe("users");t.bind("update",this.fetchData)}},created:function(){this.init()},destroyed:function(){this.$puhser.unsubscribe("users")}},Sc=zc,jc=(a("7a0c"),Object(y["a"])(Sc,Vc,$c,!1,null,null,null)),Tc=jc.exports;w()(jc,{VBtn:C["a"],VCard:V["a"],VCardTitle:$["c"],VCol:we["a"],VContainer:z["a"],VDataTable:Ne["a"],VIcon:Bt["a"],VRow:j["a"],VSpacer:Le["a"],VTextField:T["a"]});var Dc=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-col",{staticClass:"col-12"},[a("v-card",{staticClass:"ma-3",attrs:{elevation:5}},[a("v-card-title",[t._v(" Oddziały "),a("v-spacer"),t.isAdmin()?a("v-btn",{attrs:{icon:"",to:{name:"AgencyCreate"}}},[a("font-awesome-icon",{attrs:{icon:"plus",size:"lg"}})],1):t._e()],1)],1)],1),a("v-col",{staticClass:"col-12"},[a("v-card",{staticClass:"ma-3",attrs:{elevation:"5"}},[a("v-card-title",[a("v-text-field",{attrs:{"append-icon":"search",label:"Szukaj","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("v-data-table",{attrs:{headers:t.headers,items:t.agencies,search:t.search,loading:t.loading},scopedSlots:t._u([{key:"item.phone_number",fn:function(e){var n=e.item;return[a("a",{staticClass:"route",attrs:{href:"tel:"+n.phone_number}},[t._v(" "+t._s(n.phone_number)+" ")])]}},{key:"item.actions",fn:function(e){var n=e.item;return[a("v-btn",{attrs:{text:"",icon:"",color:"info",to:{name:"AgencySummary",params:{id:n.id}},elevation:"2"}},[a("v-icon",[t._v("keyboard_arrow_right")])],1)]}}])})],1)],1)],1)],1)},Oc=[],Ec={name:"AgenciesList",data:function(){return{search:"",agencies:[],loading:!0,headers:[{text:"Nazwa",value:"name",align:"left"},{text:"Adres",value:"address"},{text:"Numer telefonu",value:"phone_number"},{value:"actions",sortable:!1,align:"right"}]}},methods:{fetchAgencies:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.get("/api/agencies").then((function(t){e.agencies=t.data.data.agencies,e.loading=!1}));case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),init:function(){var t=this;this.fetchAgencies().then((function(){t.initPusher()}))},initPusher:function(){var t=this.$pusher.subscribe("agencies");t.bind("update",this.fetchAgencies)}},created:function(){this.init()},destroyed:function(){this.$pusher.unsubscribe("agencies")}},Ac=Ec,Uc=(a("d251"),Object(y["a"])(Ac,Dc,Oc,!1,null,null,null)),Rc=Uc.exports;w()(Uc,{VBtn:C["a"],VCard:V["a"],VCardTitle:$["c"],VCol:we["a"],VContainer:z["a"],VDataTable:Ne["a"],VIcon:Bt["a"],VRow:j["a"],VSpacer:Le["a"],VTextField:T["a"]});var Nc=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-col",{staticClass:"col-12"},[a("v-card",{staticClass:"ma-3",attrs:{elevation:5}},[a("v-card-title",[t._v(" Tworzenie oddziału ")])],1)],1),a("v-col",{staticClass:"col-12"},[a("v-card",{staticClass:"ma-3",attrs:{elevation:"5"}},[a("v-card-text",[a("agency-form",{ref:"createForm",on:{valid:t.checkValid}})],1),a("v-card-actions",[a("v-btn",{staticClass:"mx-auto font-weight-bold",attrs:{text:"",disabled:!t.valid},on:{click:t.createAgency}},[t._v(" Dodaj oddział ")])],1)],1)],1)],1)],1)},Lc=[],Ic={name:"AgencyCreate",components:{AgencyForm:H},data:function(){return{valid:!1}},methods:{createAgency:function(){var t=this;this.$http.post("/api/agency",this.$refs.createForm.credentials).then((function(){t.$toasted.show("Utworzono oddział",{type:"success"})}))},checkValid:function(t){this.valid=t}}},Fc=Ic,Pc=Object(y["a"])(Fc,Nc,Lc,!1,null,null,null),qc=Pc.exports;w()(Pc,{VBtn:C["a"],VCard:V["a"],VCardActions:$["a"],VCardText:$["b"],VCardTitle:$["c"],VCol:we["a"],VContainer:z["a"],VRow:j["a"]});var Bc=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("v-row",{staticClass:"col-12"},[a("v-col",{staticClass:"col-12"},[a("v-card",{staticClass:"ma-3",attrs:{elevation:5}},[a("v-card-title",[t._v(" Informacje o oddziale: "+t._s(t.agency.name)+" "),a("v-spacer"),a("agency-management",{attrs:{agency:t.agency}})],1)],1)],1),a("v-col",{staticClass:"col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4"},[a("agency",{attrs:{agency:t.agency,loading:t.agencyLoading}})],1),a("v-col",{staticClass:"col-12 col-sm-12 col-md-6 col-lg-8 col-xl-8"},[t.isManager()?a("agency-statistics",{attrs:{statistics:t.statistics,loading:t.statisticsLoading}}):t._e()],1)],1),a("v-row",{staticClass:"col-12"},[t.isManager()&&!t.agencyLoading?a("users-list",{attrs:{agency:!0}}):t._e()],1)],1)},Mc=[],Zc=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[t.editAgency?a("agency-edit",{attrs:{agency:t.agency},on:{editCard:t.agencyEdit}}):a("agency-details",{attrs:{agency:t.agency,loading:t.loading},on:{editCard:t.agencyEdit}})],1)},Jc=[],Hc=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"ma-3 pa-1",attrs:{elevation:5}},[t.loading?a("loading"):a("span",[a("v-card-title",[t._v(" Dane oddziału "),a("v-spacer"),a("v-btn",{attrs:{icon:"",color:"info"},on:{click:t.changeEditState}},[a("font-awesome-icon",{attrs:{icon:"user-edit",size:"lg"}})],1),t.checkRoute?t._e():a("v-btn",{attrs:{icon:"",to:{name:"AgencySummary",params:{id:t.agency.id}}}},[a("font-awesome-icon",{attrs:{icon:"external-link-alt",size:"lg"}})],1)],1),a("v-card-text",[a("span",{staticClass:"font-weight-bold"},[t._v(" Nazwa: ")]),t._v(" "+t._s(t.agency.name)+" "),a("br"),a("span",{staticClass:"font-weight-bold"},[t._v(" Adres: ")]),t._v(" "+t._s(t.agency.address)+" "),a("br"),a("span",{staticClass:"font-weight-bold"},[t._v(" Numer telefonu: ")]),a("a",{attrs:{href:"tel:"+t.agency.phone_number}},[t._v(" "+t._s(t.agency.phone_number)+" ")])])],1)],1)},Kc=[],Wc={name:"AgencyDetails",props:{agency:{},loading:{}},components:{Loading:Ot["default"]},methods:{changeEditState:function(){this.$emit("editCard",!0)}},computed:{checkRoute:function(){return"AgencySummary"===this.$router.currentRoute.name}}},Gc=Wc,Qc=(a("c1f5"),Object(y["a"])(Gc,Hc,Kc,!1,null,null,null)),Xc=Qc.exports;w()(Qc,{VBtn:C["a"],VCard:V["a"],VCardText:$["b"],VCardTitle:$["c"],VSpacer:Le["a"]});var Yc=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"ma-3 pa-1",attrs:{elevation:5}},[t.loading?a("loading"):a("span",[a("v-card-title",[t._v(" Edycja Oddziału "),a("v-spacer"),a("v-btn",{attrs:{color:"green",disabled:!t.valid,icon:""},on:{click:t.updateAgency}},[a("font-awesome-icon",{attrs:{icon:"save",size:"lg"}})],1),a("v-btn",{attrs:{color:"red",icon:""},on:{click:t.changeEditState}},[a("font-awesome-icon",{attrs:{icon:"times",size:"lg"}})],1)],1),a("v-card-text",[a("agency-form",{ref:"editForm",attrs:{agency:t.agency,edit:!0},on:{valid:t.checkValid}})],1)],1)],1)},to=[],eo={name:"AgencyEdit",props:{agency:{},loading:{}},components:{AgencyForm:H,Loading:Ot["default"]},data:function(){return{valid:!1}},methods:{updateAgency:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$http.put("/api/agency",this.$refs.editForm.credentials).then((function(){e.$toasted.show("Zedytowano oddział",{type:"success"}),e.changeEditState()}));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),changeEditState:function(){this.$emit("editCard",!1)},checkValid:function(t){this.valid=t}}},ao=eo,no=Object(y["a"])(ao,Yc,to,!1,null,null,null),io=no.exports;w()(no,{VBtn:C["a"],VCard:V["a"],VCardText:$["b"],VCardTitle:$["c"],VSpacer:Le["a"]});var ro={name:"Agency",props:{agency:{},loading:{}},components:{AgencyDetails:Xc,AgencyEdit:io},data:function(){return{editAgency:!1}},methods:{agencyEdit:function(t){this.editAgency=t}}},so=ro,co=Object(y["a"])(so,Zc,Jc,!1,null,null,null),oo=co.exports,lo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[t.isAdmin()?a("v-menu",{attrs:{bottom:"",left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-btn",t._g({attrs:{icon:""}},n),[a("v-icon",[t._v("mdi-dots-vertical")])],1)]}}],null,!1,2097855828)},[a("v-list",[a("v-list-item",{on:{click:function(e){t.removeAgency=!0}}},[a("v-list-item-title",{staticClass:"red--text"},[t._v("Usuń")])],1)],1)],1):t._e(),a("remove-agency-dialog",{attrs:{modal:t.removeAgency,agency:t.agency},on:{modal:t.removeDialog}})],1)},uo=[],mo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{"max-width":"500px"},on:{"click:outside":function(e){return t.closeDialog()}},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("v-card",[a("v-card-title",[t._v(" Usuń oddział "+t._s(t.agency.name)+" ")]),a("v-card-text",[t._v(" Czy napewno chcesz usunąć oddział "),a("strong",[t._v(t._s(t.agency.name))]),t._v(" jego elementy: "),a("ul",[a("li",[t._v(" Zgłoszenia ")]),a("li",[t._v(" Notatki ")]),a("li",[t._v(" Klienci ")]),a("li",[t._v(" Urządzenia ")]),a("li",[t._v(" Użytkownicy ")])]),a("br"),a("span",{staticClass:"mt-2"},[t._v("Abu usunąć oddział wpisz: ")]),a("br"),a("span",{staticClass:"font-weight-bold"},[t._v(t._s(t.agency.name)+", "+t._s(t.agency.address))]),a("br"),a("v-text-field",{attrs:{label:"Przepisz tekst",required:"",onCopy:"return false",onDrag:"return false",onDrop:"return false",onPaste:"return false",autocomplete:"off"},model:{value:t.confirmation,callback:function(e){t.confirmation=e},expression:"confirmation"}}),a("span",{staticClass:"error--text font-weight-bold text-uppercase mx-auto"},[t._v("Usuniętych elementów nie można przywrócić")])],1),a("v-card-actions",[a("v-spacer"),t.valid?a("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(e){return t.removeAgency()}}},[t._v("Usuń")]):t._e(),a("v-btn",{attrs:{color:"darken-1",text:""},on:{click:function(e){return t.closeDialog()}}},[t._v("Anuluj")])],1)],1)],1)},vo=[],po=(a("ac1f"),a("5319"),{name:"RemoveAgencyDialog",props:{modal:{},agency:{}},data:function(){return{confirmation:""}},methods:{removeAgency:function(){var t=this;this.$http.delete("/api/agency/".concat(this.agency.id)).then((function(){t.$toasted.show("Usunięto oddział",{type:"success"}),t.$router.push("/agencies")}))},closeDialog:function(){this.confirmation="",this.$emit("modal",!1)}},computed:{valid:function(){return(this.agency.name+", "+this.agency.address).replace(/\n/g," ")===this.confirmation}}}),ho=po,fo=Object(y["a"])(ho,mo,vo,!1,null,null,null),go=fo.exports;w()(fo,{VBtn:C["a"],VCard:V["a"],VCardActions:$["a"],VCardText:$["b"],VCardTitle:$["c"],VDialog:si["a"],VSpacer:Le["a"],VTextField:T["a"]});var bo={name:"AgencyManagement",props:{agency:{}},components:{RemoveAgencyDialog:go},data:function(){return{removeAgency:!1}},methods:{closeDialog:function(){this.$emit("modal",!1)},removeDialog:function(t){this.removeAgency=t}}},_o=bo,ko=Object(y["a"])(_o,lo,uo,!1,null,null,null),yo=ko.exports;w()(ko,{VBtn:C["a"],VIcon:Bt["a"],VList:gt["a"],VListItem:bt["a"],VListItemTitle:kt["c"],VMenu:gi["a"]});var xo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"ma-3 pa-1",attrs:{elevation:5}},[t.loading?a("loading"):a("span",[a("v-card-title",[t._v(" Statystyki oddziału ")]),a("v-card-text",[a("span",{staticClass:"font-weight-bold text--primary"},[t._v(" Liczba pracowników: ")]),t._v(" "+t._s(t.statistics.employees)+" "),a("br"),a("span",{staticClass:"font-weight-bold text--primary"},[t._v(" Liczba klientów: ")]),t._v(" "+t._s(t.statistics.clients)+" "),a("br"),a("span",{staticClass:"font-weight-bold text--primary"},[t._v(" Liczba urządzeń: ")]),t._v(" "+t._s(t.statistics.devices)+" "),a("br"),a("span",{staticClass:"font-weight-bold text--primary"},[t._v(" Liczba zgłoszeń: ")]),t._v(" "+t._s(t.statistics.tickets)+" "),a("ul",{staticClass:"text--primary"},t._l(t.statistics.ticketStatuses,(function(e,n){return a("li",{key:n},[a("span",{staticClass:"font-weight-bold"},[t._v(t._s(n)+":")]),t._v(" "),a("span",{staticClass:"text--secondary"},[t._v(" "+t._s(e)+" ")])])})),0)])],1)],1)},wo=[],Co={name:"AgencyStatistics",props:{statistics:{},loading:{}},components:{Loading:Ot["default"]}},Vo=Co,$o=Object(y["a"])(Vo,xo,wo,!1,null,null,null),zo=$o.exports;w()($o,{VCard:V["a"],VCardText:$["b"],VCardTitle:$["c"]});var So={name:"AgencySummary",components:{Agency:oo,AgencyManagement:yo,UsersList:Tc,AgencyStatistics:zo},data:function(){return{agency:[],statistics:[],agencyLoading:!0,statisticsLoading:!0,note:{credentials:{}}}},methods:{fetchAgency:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.get("/api/agency/".concat(this.$route.params.id)).then((function(t){e.agency=t.data.data.agency,e.agencyLoading=!1}));case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),fetchStatistics:function(){var t=this;this.$http.get("/api/agency/".concat(this.agency.id,"/statistics")).then((function(e){t.statistics=e.data.data,t.statisticsLoading=!1}))},initPusher:function(){var t=this.$pusher.subscribe("agency-".concat(this.agency.id));t.bind("update",this.fetchAgency),t.bind("statistics",this.fetchStatistics)},init:function(){var t=this;this.fetchAgency().then((function(){t.fetchStatistics(),t.initPusher()}))}},created:function(){this.init()},destroyed:function(){this.$pusher.unsubscribe("agency-".concat(this.agency.id))}},jo=So,To=Object(y["a"])(jo,Bc,Mc,!1,null,null,null),Do=To.exports;w()(To,{VCard:V["a"],VCardTitle:$["c"],VCol:we["a"],VContainer:z["a"],VRow:j["a"],VSpacer:Le["a"]}),i["a"].use(Nt["a"]);var Oo=new Nt["a"]({mode:"history",routes:[{path:"/",name:"HomePage",component:Ht},{path:"/login",name:"Login",component:O,meta:{forVisitors:!0}},{path:"/check",name:"TicketCheckStatus",component:Oe},{path:"/ticket/create",name:"TicketCreate",component:Ve,meta:{roles:["administrator","manager","serwisant"]}},{path:"/tickets",name:"TicketsList",component:Fe,meta:{roles:["administrator","manager","serwisant"]}},{path:"/ticket/:id",name:"TicketSummary",component:Ci,props:!0,meta:{roles:["administrator","manager","serwisant"]}},{path:"/client/create",name:"ClientCreate",component:br,meta:{roles:["administrator","manager","serwisant"]}},{path:"/client/:id",name:"ClientSummary",component:ms,props:!0,meta:{roles:["administrator","manager","serwisant"]}},{path:"/clients",name:"ClientList",component:Kr,meta:{roles:["administrator","manager","serwisant"]}},{path:"/devices",name:"DeviceList",component:Cr,meta:{roles:["administrator","manager","serwisant"]}},{path:"/device/create",name:"DeviceCreate",component:qr,meta:{roles:["administrator","manager","serwisant"]}},{path:"/device/:id",name:"DeviceSummary",component:Wi,props:!0,meta:{roles:["administrator","manager","serwisant"]}},{path:"/users",name:"UsersList",component:Tc,meta:{roles:["administrator","manager"]}},{path:"/user/create",name:"UserCreate",component:Cc,meta:{roles:["administrator","manager"]}},{path:"/user/:id",name:"UserSummary",component:bc,props:!0,meta:{roles:["administrator","manager"]}},{path:"/agencies",name:"AgencyList",component:Rc,meta:{roles:["administrator"]}},{path:"/agency/create",name:"AgencyCreate",component:qc,meta:{roles:["administrator"]}},{path:"/agency/:id",name:"AgencySummary",component:Do,props:!0,meta:{roles:["administrator","manager"]}}]}),Eo=a("f309"),Ao=(a("bf40"),a("d1e78"),a("7597"));i["a"].use(Eo["a"]);var Uo=new Eo["a"]({icons:{iconfont:"mdi"},lang:{locales:{pl:Ao["a"]},current:"pl"}}),Ro=a("a7fe"),No=a.n(Ro),Lo=a("2f62");i["a"].use(Lo["a"]);var Io=b(),Fo=new Lo["a"].Store({state:{currentUser:Io,loading:!1,auth_error:null},getters:{isLoading:function(t){return t.loading},currentUser:function(t){return t.currentUser},authError:function(t){return t.auth_error},getToken:function(t){if(t.currentUser)return t.currentUser.token}},mutations:{login:function(t){t.loading=!0,t.auth_error=null},loginSuccess:function(t,e){t.auth_error=null,t.isLoggedIn=!0,t.loading=!1,t.currentUser=Object.assign({},e.data.user,{token:e.data.token}),localStorage.setItem("user",JSON.stringify(t.currentUser)),i["a"].toasted.show("Zalogowano",{type:"success"})},logout:function(t){localStorage.removeItem("user"),t.isLoggedIn=!1,t.currentUser=null,i["a"].toasted.show("Wylogowano",{type:"success"})}},actions:{login:function(t){t.commit("login")}}}),Po=a("a65d"),qo=a.n(Po);i["a"].use(a("2c05"),{api_key:"b523965da7bc10d9d529",options:{cluster:"eu",forceTLS:!0}});var Bo=a("1cf8");a("2b69");i["a"].use(Bo["a"]),i["a"].use(Lo["a"]),i["a"].use(No.a,p.a),i["a"].use(qo.a,{theme:"bubble",position:"top-center",duration:5e3}),i["a"].mixin({data:function(){return{isInitialized:!1}},methods:{isAdmin:function(){if(this.currentUser)return"administrator"===Fo.state.currentUser.role.name},isManager:function(){if(this.currentUser)return"manager"===Fo.state.currentUser.role.name||this.isAdmin()}},computed:{currentUser:function(){return this.$store.getters.currentUser}}}),h(Fo,Oo),new i["a"]({vuetify:Uo,router:Oo,store:Fo,pusher:n,vuelayers:void 0,render:function(t){return t(Rt)}}).$mount("#app")},"5b1a":function(t,e,a){"use strict";var n=a("2ae1"),i=a.n(n);i.a},"5b69":function(t,e,a){"use strict";var n=a("490c"),i=a.n(n);i.a},"5e8b":function(t,e,a){"use strict";var n=a("aef4"),i=a.n(n);i.a},"634e":function(t,e,a){},"63d9":function(t,e,a){},"68a8":function(t,e,a){},"71ff":function(t,e,a){"use strict";var n=a("ff45"),i=a.n(n);i.a},"7a0c":function(t,e,a){"use strict";var n=a("3486"),i=a.n(n);i.a},"7ce9":function(t,e,a){},"89ea":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-row",[a("v-progress-circular",{staticClass:"mx-auto",attrs:{size:80,indeterminate:"",color:"primary"}})],1)],1)},i=[];a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return i}))},9152:function(t,e,a){},"9e62":function(t,e,a){"use strict";var n=a("dc08"),i=a.n(n);i.a},a0c3:function(t,e){},a24d:function(t,e,a){"use strict";var n=a("9152"),i=a.n(n);i.a},a334:function(t,e,a){},aef4:function(t,e,a){},b5e0:function(t,e,a){t.exports=a.p+"img/hero.1bb14944.png"},c1f5:function(t,e,a){"use strict";var n=a("634e"),i=a.n(n);i.a},c615:function(t,e,a){"use strict";var n=a("2848"),i=a.n(n);i.a},cf05:function(t,e,a){t.exports=a.p+"img/logo.504687b9.png"},d251:function(t,e,a){"use strict";var n=a("63d9"),i=a.n(n);i.a},d6f1:function(t,e,a){t.exports=a.p+"img/spacer.3ba1b129.png"},dc08:function(t,e,a){},e9fa:function(t,e,a){"use strict";var n=a("a0c3"),i=a.n(n);e["default"]=i.a},ec53:function(t,e,a){"use strict";var n=a("7ce9"),i=a.n(n);i.a},f9a2:function(t,e,a){"use strict";var n=a("89ea"),i=a("e9fa"),r=a("2877"),s=a("6544"),c=a.n(s),o=a("a523"),l=a("490a"),u=a("0fd9"),d=Object(r["a"])(i["default"],n["a"],n["b"],!1,null,"7da7f7ad",null);e["default"]=d.exports,c()(d,{VContainer:o["a"],VProgressCircular:l["a"],VRow:u["a"]})},fa6f:function(t,e,a){"use strict";var n=a("01a1"),i=a.n(n);i.a},fa89:function(t,e,a){},ff45:function(t,e,a){}});
//# sourceMappingURL=app.d53888d4.js.map