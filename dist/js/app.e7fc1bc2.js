(function(e){function t(t){for(var n,s,c=t[0],o=t[1],l=t[2],d=0,m=[];d<c.length;d++)s=c[d],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&m.push(i[s][0]),i[s]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);u&&u(t);while(m.length)m.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,c=1;c<a.length;c++){var o=a[c];0!==i[o]&&(n=!1)}n&&(r.splice(t--,1),e=s(s.s=a[0]))}return e}var n={},i={app:0},r=[];function s(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=n,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(a,n,function(t){return e[t]}.bind(null,n));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=o;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var n=a("19b3"),i=a.n(n);i.a},"19b3":function(e,t,a){},2042:function(e,t,a){"use strict";var n=a("a334"),i=a.n(n);i.a},2848:function(e,t,a){},"2ae1":function(e,t,a){},3486:function(e,t,a){},"3afa":function(e,t,a){"use strict";var n=a("fa89"),i=a.n(n);i.a},"490c":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);var n={};a.r(n);a("b0c0"),a("e260"),a("e6cf"),a("cca6"),a("a79d");var i=a("2b0e"),r=a("ecee"),s=a("c074"),c=a("f2d1"),o=a("ad3d");r["c"].add(s["a"]),r["c"].add(c["a"]),i["a"].component("font-awesome-icon",o["a"]);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.loading?a("div",[a("v-app",{attrs:{id:"app"}},[a("v-content",{staticClass:"content"},[a("loading")],1)],1)],1):a("div",[e.isInitialized?a("div",[a("Main")],1):a("div",[a("v-app",{attrs:{id:"app"}},[e.currentUser?a("v-content",{staticClass:"content"},[a("initialize",{on:{initialized:e.checkInitialized}})],1):a("v-content",{staticClass:"content"},[a("login")],1)],1)],1)])])},u=[],d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-row",[a("v-card",{staticClass:"col-8 mx-auto",attrs:{raised:"",shaped:""}},[a("v-card-text",[a("p",{staticClass:"display-1 text--primary"},[e._v("Zaloguj")]),a("v-form",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.authenticate()}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-text-field",{attrs:{rules:e.rules.credentials.email,type:"email",label:"Email",required:""},model:{value:e.credentials.email,callback:function(t){e.$set(e.credentials,"email",t)},expression:"credentials.email"}}),a("v-text-field",{attrs:{rules:[e.rules.credentials.password.required,e.rules.credentials.password.min],type:"password",label:"Hasło",required:""},model:{value:e.credentials.password,callback:function(t){e.$set(e.credentials,"password",t)},expression:"credentials.password"}})],1)],1),a("v-card-actions",[a("v-btn",{staticClass:"mx-auto font-weight-bold",attrs:{text:"",disabled:!e.valid},on:{click:e.authenticate}},[e._v(" Zaloguj ")])],1)],1)],1)],1)},m=[],v=(a("d3b7"),a("caad"),a("45fc"),a("2532"),a("bc3a")),p=a.n(v);function f(e,t){t.beforeEach((function(t,a,n){var i=e.state.currentUser;if(!t.meta.forVisitors||!i){if(t.matched.some((function(e){return e.meta.roles}))){if(!i)return n({path:"/login"});if(!t.meta.roles.includes(i.role.name))return n({path:"/"})}return n()}return n({path:"/"})})),p.a.interceptors.request.use((function(e){return e.baseURL="https://backend.sms.sikorski.dev/",e})),p.a.interceptors.response.use(null,(function(a){switch(a.response.status){case 400:i["a"].toasted.show(a.response.data.message,{type:"error"});break;case 401:i["a"].toasted.show(a.response.data.message,{type:"error"}),e.commit("logout"),t.push("/login");break;case 404:t.push("/");break}})),e.getters.currentUser&&h(e.getters.getToken)}function h(e){p.a.defaults.headers.common["Authorization"]="Bearer ".concat(e)}function g(e){return new Promise((function(t){p.a.post("/api/auth/login",e).then((function(e){h(e.data.data.token),t(e.data)}))}))}function _(){var e=localStorage.getItem("user");return e?JSON.parse(e):null}var b={name:"Login",methods:{authenticate:function(){var e=this;this.$store.dispatch("login"),g(this.$data.credentials).then((function(t){e.$store.commit("loginSuccess",t),e.$router.push({path:"/"})}))}},data:function(){return{valid:!1,credentials:{email:"",password:""},rules:{credentials:{email:[function(e){return!!e||"Adres email jest wymagany."},function(e){return/.+@.+/.test(e)||"Wprowawdź prawidłowy adres E-mail"}],password:{required:function(e){return!!e||"Hasło jest wymagane."},min:function(e){return e.length>=6||"Minimum 6 znaków."}}}}}}},k=b,y=a("2877"),w=a("6544"),x=a.n(w),C=a("8336"),V=a("b0af"),$=a("99d9"),z=a("a523"),S=a("4bd4"),j=a("0fd9"),T=a("8654"),D=Object(y["a"])(k,d,m,!1,null,null,null),O=D.exports;x()(D,{VBtn:C["a"],VCard:V["a"],VCardActions:$["a"],VCardText:$["b"],VContainer:z["a"],VForm:S["a"],VRow:j["a"],VTextField:T["a"]});var E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-row",[a("v-stepper",{staticClass:"col-10 mx-auto",model:{value:e.step,callback:function(t){e.step=t},expression:"step"}},[a("v-stepper-header",[a("v-stepper-step",{attrs:{complete:e.step>1,step:"1"}},[e._v("Tworzenie serwisu")]),a("v-divider"),a("v-stepper-step",{attrs:{complete:e.step>2,step:"2"}},[e._v("Tworzenie pierwszego oddziału")]),a("v-divider"),a("v-stepper-step",{attrs:{complete:e.step>3,step:"3"}},[e._v("Gotowe!")])],1),a("v-stepper-items",[a("v-stepper-content",{attrs:{step:"1"}},[a("service-form",{ref:"createServiceForm",on:{valid:e.checkValid}}),a("v-btn",{attrs:{color:"primary",disabled:!e.valid},on:{click:function(t){return e.initializeService()}}},[e._v(" Utwórz serwis ")])],1),a("v-stepper-content",{attrs:{step:"2"}},[a("agency-form",{ref:"createAgencyForm",on:{valid:e.checkValid}}),a("v-btn",{attrs:{color:"primary"},on:{click:function(t){return e.createAgency()}}},[e._v(" Utwórz oddział ")])],1),a("v-stepper-content",{attrs:{step:"3"}},[a("v-btn",{staticClass:"mx-auto",attrs:{color:"primary",block:""},on:{click:function(t){return e.checkInitialized()}}},[e._v(" Aby przejść do panelu odśwież stronę bądź klinij tutaj ")])],1)],1)],1)],1)],1)},U=[],A=(a("96cf"),a("89ba")),R=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-form",{model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-text-field",{attrs:{rules:e.rules.service.name,label:"Nazwa serwisu",required:""},model:{value:e.credentials.name,callback:function(t){e.$set(e.credentials,"name",t)},expression:"credentials.name"}}),a("v-text-field",{attrs:{rules:e.rules.service.address,label:"Adres",required:""},model:{value:e.credentials.address,callback:function(t){e.$set(e.credentials,"address",t)},expression:"credentials.address"}}),a("v-text-field",{attrs:{rules:e.rules.service.NIP,label:"Numer NIP",required:""},model:{value:e.credentials.NIP,callback:function(t){e.$set(e.credentials,"NIP",t)},expression:"credentials.NIP"}}),a("v-text-field",{attrs:{rules:e.rules.service.phone_number,label:"Numer telefonu",required:""},model:{value:e.credentials.phone_number,callback:function(t){e.$set(e.credentials,"phone_number",t)},expression:"credentials.phone_number"}}),a("v-text-field",{attrs:{rules:e.rules.service.description,label:"Opis",required:""},model:{value:e.credentials.description,callback:function(t){e.$set(e.credentials,"description",t)},expression:"credentials.description"}})],1)},N=[],L={name:"ServiceForm",props:{service:{}},data:function(){return{valid:!1,credentials:{},rules:{service:{name:[function(e){return!!e||"Nazwa jest wymagana."}],address:[function(e){return!!e||"Adres jest wymagany."}],description:[function(e){return!!e||"Opis jest wymagany."}],phone_number:[function(e){return!!e||"Numer telefonu jest wymagany."}],NIP:[function(e){return!!e||"Numer NIP jest wymagany."}]}}}},methods:{parseFormData:function(){this.service&&(this.credentials=JSON.parse(JSON.stringify(this.service)))}},created:function(){this.parseFormData()},watch:{valid:function(e){this.$emit("valid",e)}}},I=L,F=Object(y["a"])(I,R,N,!1,null,null,null),B=F.exports;x()(F,{VForm:S["a"],VTextField:T["a"]});var q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-form",{model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-text-field",{attrs:{rules:e.rules.agency.name,label:"Nazwa oddziału",required:""},model:{value:e.credentials.name,callback:function(t){e.$set(e.credentials,"name",t)},expression:"credentials.name"}}),a("v-text-field",{attrs:{rules:e.rules.agency.address,label:"Adres",required:""},model:{value:e.credentials.address,callback:function(t){e.$set(e.credentials,"address",t)},expression:"credentials.address"}}),a("v-text-field",{attrs:{rules:e.rules.agency.phone_number,label:"Numer telefonu",required:""},model:{value:e.credentials.phone_number,callback:function(t){e.$set(e.credentials,"phone_number",t)},expression:"credentials.phone_number"}})],1)},P=[],M={name:"AgencyForm",props:{agency:{}},data:function(){return{valid:!1,credentials:{},rules:{agency:{name:[function(e){return!!e||"Nazwa jest wymagana."}],address:[function(e){return!!e||"Adres jest wymagany."}],phone_number:[function(e){return!!e||"Numer telefonu jest wymagany."}]}}}},methods:{parseFormData:function(){this.agency&&(this.credentials=JSON.parse(JSON.stringify(this.agency)))}},created:function(){this.parseFormData()},watch:{valid:function(e){this.$emit("valid",e)}}},Z=M,J=Object(y["a"])(Z,q,P,!1,null,null,null),H=J.exports;x()(J,{VForm:S["a"],VTextField:T["a"]});var K={name:"ServiceInitialize",components:{ServiceForm:B,AgencyForm:H},props:{loading:{}},data:function(){return{step:1,valid:!1}},methods:{initializeService:function(){var e=Object(A["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$http.post("/api/service/initialize",this.$refs.createServiceForm.credentials).then((function(e){e.data.success&&(t.step=2)}));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),createAgency:function(){var e=Object(A["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$http.post("/api/agency",this.$refs.createAgencyForm.credentials).then((function(){t.$toasted.show("Utworzono oddział",{type:"success"}),t.step=3}));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),checkService:function(){var e=this;this.$http.get("/api/service").then((function(t){t.data.data.service.length&&(e.checkAgency(),e.step=2)}))},checkAgency:function(){var e=this;this.$http.get("/api/agencies").then((function(t){t.data.data.agencies.length&&(e.step=3)}))},checkInitialized:function(){this.$emit("initialized")},checkValid:function(e){this.valid=e}},created:function(){this.checkService()}},W=K,G=(a("3afa"),a("ce7e")),Q=a("7e85"),X=a("e516"),Y=a("9c54"),ee=a("56a4"),te=Object(y["a"])(W,E,U,!1,null,null,null),ae=te.exports;x()(te,{VBtn:C["a"],VContainer:z["a"],VDivider:G["a"],VRow:j["a"],VStepper:Q["a"],VStepperContent:X["a"],VStepperHeader:Y["a"],VStepperItems:Y["b"],VStepperStep:ee["a"]});var ne=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",{attrs:{id:"app"}},[a("v-navigation-drawer",{attrs:{app:"",clipped:"",dark:"",color:"#202338"},scopedSlots:e._u([{key:"append",fn:function(){return[e.currentUser?a("v-list-item",{attrs:{link:"",ripple:{class:"red-text"}},on:{click:e.logout}},[a("v-list-item-action",[a("font-awesome-icon",{staticClass:"red--text",attrs:{icon:"sign-out-alt",size:"lg"}})],1),a("v-list-item-content",[a("v-list-item-title",{staticClass:"red--text"},[e._v("Wyloguj")])],1)],1):a("router-link",{staticClass:"route",attrs:{to:{name:"Login"}}},[a("v-list-item",{attrs:{link:"",ripple:{class:"green-text"}}},[a("v-list-item-action",[a("font-awesome-icon",{staticClass:"green--text",attrs:{icon:"sign-in-alt",size:"lg"}})],1),a("v-list-item-content",[a("v-list-item-title",{staticClass:"green--text"},[e._v("Zaloguj")])],1)],1)],1)]},proxy:!0}]),model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[e.currentUser?a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",{staticClass:"title"},[e._v(" "+e._s(e.currentUser.name)+" "+e._s(e.currentUser.surname)+" ")]),a("v-list-item-subtitle",[e._v(" "+e._s(e.currentUser.role.name)+" ")])],1)],1):e._e(),a("NavigationDrawerItems")],1),a("Toolbar",[a("v-app-bar-nav-icon",{on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}})],1),a("v-content",{staticClass:"content"},[a("router-view")],1)],1)},ie=[],re=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app-bar",{attrs:{app:"",dense:"","clipped-left":"",dark:"",color:"#60687b"}},[e._t("default"),a("v-toolbar-title",[e._v(e._s(e.applicationName))])],2)},se=[],ce={data:function(){return{drawer:null,applicationName:"Service Management System"}}},oe=ce,le=a("40dc"),ue=a("2a7f"),de=Object(y["a"])(oe,re,se,!1,null,"5c4926c4",null),me=de.exports;x()(de,{VAppBar:le["a"],VToolbarTitle:ue["a"]});var ve=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-list",{attrs:{dense:"",shaped:""}},[e.isManager()&&e.currentUser.agency_id?a("v-list-item",{staticClass:"route",attrs:{ripple:"",link:"",to:{name:"AgencySummary",params:{id:e.currentUser.agency_id}},"active-class":"item-active",exact:""}},[a("v-list-item-action",[a("font-awesome-icon",{attrs:{icon:"toolbox",size:"lg"}})],1),a("v-list-item-content",[a("v-list-item-title",[e._v(" Oddział ")])],1)],1):e._e(),e._l(e.categories,(function(t){return a("span",{key:t.name},[e.categoryAvailable(t)?a("v-subheader",{staticClass:"mt-4 white--text font-weight-bold text--darken-1"},[e._v(e._s(t.name))]):e._e(),e._l(t.links,(function(t){return a("span",{key:t.route},[e.checkPermitted(t.route)?a("v-list-item",{staticClass:"route",attrs:{ripple:"",link:"",to:{name:t.route},"active-class":"item-active",exact:""}},[a("v-list-item-action",[a("font-awesome-icon",{attrs:{icon:t.icon,size:"lg"}})],1),a("v-list-item-content",[a("v-list-item-title",[e._v(" "+e._s(t.label)+" ")])],1)],1):e._e()],1)}))],2)}))],2)},pe=[],fe=(a("4160"),a("159b"),{data:function(){return{drawer:null,applicationName:"Service Management System",logged:!0,categories:[{name:"Główne",available:0,links:[{route:"HomePage",label:"Strona głowna",icon:"home"}]},{name:"Zgłoszenia",available:0,links:[{route:"TicketCheckStatus",label:"Sprawdź status zgłoszenia",icon:"clipboard-check"},{route:"TicketsList",label:"Lista zgłoszeń",icon:"clipboard-list"},{route:"TicketCreate",label:"Dodaj zgłoszenie",icon:"plus"}]},{name:"Klienci",available:0,links:[{route:"ClientList",label:"Lista klientów",icon:"users"},{route:"ClientCreate",label:"Dodaj klienta",icon:"user-plus"}]},{name:"Urządzenia",available:0,links:[{route:"DeviceList",label:"Lista urządzeń",icon:"laptop"},{route:"DeviceCreate",label:"Dodaj urządzenie",icon:"laptop-medical"}]},{name:"Użytkownicy",available:0,links:[{route:"UsersList",label:"Lista użytkowników",icon:"users"},{route:"UserCreate",label:"Dodaj użytkownika",icon:"user-plus"}]},{name:"Oddziały",available:0,links:[{route:"AgencyList",label:"Lista oddziałów",icon:"city"},{route:"AgencyCreate",label:"Dodaj oddział",icon:"clinic-medical"}]}]}},methods:{checkPermitted:function(e){return!this.$router.resolve({name:e}).route.meta.roles||!!this.$store.state.currentUser&&this.$router.resolve({name:e}).route.meta.roles.includes(this.$store.state.currentUser.role.name)},categoryAvailable:function(e){var t=this,a=0;return e.links.forEach((function(e){t.checkPermitted(e.route)&&a++})),a}}}),he=fe,ge=(a("ec53"),a("8860")),_e=a("da13"),be=a("1800"),ke=a("5d23"),ye=a("e0c7"),we=Object(y["a"])(he,ve,pe,!1,null,"01b0aaf9",null),xe=we.exports;x()(we,{VList:ge["a"],VListItem:_e["a"],VListItemAction:be["a"],VListItemContent:ke["a"],VListItemTitle:ke["c"],VSubheader:ye["a"]});var Ce={name:"MainLayout",components:{Toolbar:me,NavigationDrawerItems:xe},data:function(){return{drawer:null,service:{}}},methods:{fetchService:function(){var e=this;this.$http.get("/api/service").then((function(t){e.service=t.data.data.service,document.title=e.service.name}))},logout:function(){this.$store.commit("logout"),this.$router.push("/login")}},created:function(){this.fetchService()}},Ve=Ce,$e=(a("fa60"),a("7496")),ze=a("5bc1"),Se=a("a75b"),je=a("f774"),Te=Object(y["a"])(Ve,ne,ie,!1,null,"50e0f732",null),De=Te.exports;x()(Te,{VApp:$e["a"],VAppBarNavIcon:ze["a"],VContent:Se["a"],VListItem:_e["a"],VListItemAction:be["a"],VListItemContent:ke["a"],VListItemSubtitle:ke["b"],VListItemTitle:ke["c"],VNavigationDrawer:je["a"]});var Oe=a("f9a2"),Ee={data:function(){return{service:[],logged:!1,loading:!0}},components:{Main:De,Login:O,Initialize:ae,Loading:Oe["default"]},methods:{checkInitialized:function(){var e=this;this.$http.get("/api/service/initialized").then((function(t){e.isInitialized=t.data.data.initialized,e.loading=!1}))}},created:function(){this.checkInitialized()}},Ue=Ee,Ae=(a("034f"),Object(y["a"])(Ue,l,u,!1,null,null,null)),Re=Ae.exports;x()(Ae,{VApp:$e["a"],VContent:Se["a"]});var Ne=a("8c4f"),Le=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-btn",{attrs:{color:"info"}},[e._v("info")])],1)},Ie=[],Fe={name:"HomePage"},Be=Fe,qe=Object(y["a"])(Be,Le,Ie,!1,null,null,null),Pe=qe.exports;x()(qe,{VBtn:C["a"],VContainer:z["a"]});var Me=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-col",{staticClass:"col-12"},[a("v-card",{staticClass:"ma-3",attrs:{elevation:5}},[a("v-card-title",[e._v(" Tworzenie zgłoszenia ")])],1)],1),a("v-col",{staticClass:"col-12"},[a("v-card",{staticClass:"ma-3",attrs:{elevation:"5"}},[a("v-card-text",[a("ticket-form",{ref:"createForm",on:{valid:e.checkValid}})],1),a("v-card-actions",[a("v-btn",{staticClass:"mx-auto font-weight-bold",attrs:{text:"",disabled:!e.valid},on:{click:e.createTicket}},[e._v(" Dodaj zgłoszenie ")])],1)],1)],1)],1)],1)},Ze=[],Je=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-form",{model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-text-field",{attrs:{rules:e.rules.ticket.description,label:"Opis zgłoszenia",required:""},model:{value:e.credentials.description,callback:function(t){e.$set(e.credentials,"description",t)},expression:"credentials.description"}}),a("v-text-field",{attrs:{label:"Dodatkowe informacje",required:""},model:{value:e.credentials.additional_information,callback:function(t){e.$set(e.credentials,"additional_information",t)},expression:"credentials.additional_information"}}),e.edit?e._e():[e.isAdmin()?a("agencies-autocomplete",{model:{value:e.agency_id,callback:function(t){e.agency_id=t},expression:"agency_id"}}):e._e(),a("clients-autocomplete",{attrs:{agency_id:e.agency_id},model:{value:e.credentials.client_id,callback:function(t){e.$set(e.credentials,"client_id",t)},expression:"credentials.client_id"}}),a("devices-autocomplete",{attrs:{agency_id:e.agency_id},model:{value:e.credentials.device_id,callback:function(t){e.$set(e.credentials,"device_id",t)},expression:"credentials.device_id"}})],e.edit?[a("v-text-field",{attrs:{label:"Wiadomość zwrotna."},model:{value:e.credentials.message,callback:function(t){e.$set(e.credentials,"message",t)},expression:"credentials.message"}})]:e._e(),a("ticket-statuses-select",{attrs:{ticket_status_id:e.credentials.ticket_status_id},model:{value:e.credentials.ticket_status_id,callback:function(t){e.$set(e.credentials,"ticket_status_id",t)},expression:"credentials.ticket_status_id"}})],2)},He=[],Ke=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-autocomplete",{attrs:{items:e.agencies,rules:e.rules.agency_id.required,label:"Oddział","item-text":"agencyString","item-value":"id",required:""},scopedSlots:e._u([{key:"item",fn:function(t){return[a("v-list-item-content",[a("v-list-item-title",[e._v(e._s(t.item.name))]),a("v-list-item-subtitle",[e._v(e._s(t.item.address))])],1)]}}]),model:{value:e.agency_id,callback:function(t){e.agency_id=t},expression:"agency_id"}})},We=[],Ge={name:"AgenciesAutocomplete",data:function(){return{agencies:[],agency_id:null,rules:{agency_id:{required:[function(e){return!!e||"Oddział jest wymagany."}]}}}},methods:{createAgenciesString:function(){this.agencies.forEach((function(e){e["agencyString"]=e.name+" "+e.address}))},fetchAgencies:function(){var e=Object(A["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$http.get("/api/agencies").then((function(e){t.agencies=e.data.data.agencies,t.createAgenciesString()}));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},created:function(){this.fetchAgencies()},watch:{agency_id:function(e){this.$emit("input",e)}}},Qe=Ge,Xe=a("c6a6"),Ye=Object(y["a"])(Qe,Ke,We,!1,null,null,null),et=Ye.exports;x()(Ye,{VAutocomplete:Xe["a"],VListItemContent:ke["a"],VListItemSubtitle:ke["b"],VListItemTitle:ke["c"]});var tt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-autocomplete",{attrs:{disabled:!(e.agency_id||e.devices.length),items:e.devices,rules:e.rules.device_id.required,label:"Urządzenie","item-text":"deviceString","item-value":"id"},scopedSlots:e._u([{key:"item",fn:function(t){return[a("v-list-item-content",[a("v-list-item-title",[e._v(e._s(t.item.name))]),a("v-list-item-subtitle",[e._v(e._s(t.item.serial_number))])],1)]}}]),model:{value:e.device_id,callback:function(t){e.device_id=t},expression:"device_id"}})},at=[],nt={name:"DevicesAutocomplete",props:{agency_id:{}},data:function(){return{device_id:null,devices:[],rules:{device_id:{required:[function(e){return!!e||"Urządzenie jest wymagane."}]}}}},methods:{createDevicesString:function(){this.devices.forEach((function(e){e["deviceString"]=e.name+" "+e.serial_number}))},getUrl:function(){return this.isAdmin()?this.agency_id?"/api/agency/".concat(this.agency_id,"/devices"):void 0:"/api/devices"},fetchDevices:function(){var e=Object(A["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.getUrl()&&this.$http.get(this.getUrl()).then((function(e){t.devices=e.data.data.devices,t.createDevicesString()}));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},created:function(){this.fetchDevices()},watch:{device_id:function(e){this.$emit("input",e)},agency_id:function(){this.fetchDevices()}}},it=nt,rt=Object(y["a"])(it,tt,at,!1,null,null,null),st=rt.exports;x()(rt,{VAutocomplete:Xe["a"],VListItemContent:ke["a"],VListItemSubtitle:ke["b"],VListItemTitle:ke["c"]});var ct=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-autocomplete",{attrs:{disabled:!(e.agency_id||e.clients.length),items:e.clients,rules:e.rules.client_id.required,label:"Klient","item-text":"clientString","item-value":"id"},scopedSlots:e._u([{key:"item",fn:function(t){return[a("v-list-item-content",[a("v-list-item-title",[e._v(e._s(t.item.name))]),a("v-list-item-subtitle",[e._v(e._s(t.item.address))])],1)]}}]),model:{value:e.client_id,callback:function(t){e.client_id=t},expression:"client_id"}})},ot=[],lt={name:"ClientsAutocomplete",props:{agency_id:{}},data:function(){return{client_id:null,clients:[],rules:{client_id:{required:[function(e){return!!e||"Urządzenie jest wymagane."}]}}}},methods:{createClientsString:function(){this.clients.forEach((function(e){e["clientString"]=e.name+" "+e.address}))},getUrl:function(){return this.isAdmin()?this.agency_id?"/api/agency/".concat(this.agency_id,"/clients"):void 0:"/api/clients"},fetchClients:function(){var e=Object(A["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.getUrl()&&this.$http.get(this.getUrl()).then((function(e){t.clients=e.data.data.clients,t.createClientsString()}));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},created:function(){this.fetchClients()},watch:{client_id:function(e){this.$emit("input",e)},agency_id:function(){this.fetchClients()}}},ut=lt,dt=Object(y["a"])(ut,ct,ot,!1,null,null,null),mt=dt.exports;x()(dt,{VAutocomplete:Xe["a"],VListItemContent:ke["a"],VListItemSubtitle:ke["b"],VListItemTitle:ke["c"]});var vt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-select",{attrs:{items:e.ticketStatuses,rules:e.rules.ticket_status_id.required,label:"Status zgłoszenia","item-text":"name","item-value":"id"},model:{value:e.ticketStatusId,callback:function(t){e.ticketStatusId=t},expression:"ticketStatusId"}})},pt=[],ft={name:"TicketStatusesSelect",props:{ticket_status_id:{default:null}},data:function(){return{ticketStatuses:[],ticketStatusId:{},rules:{ticket_status_id:{required:[function(e){return!!e||"Status zgłoszenia jest wymagany."}]}}}},methods:{fetchTicketStatuses:function(){var e=Object(A["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$http.get("/api/ticketStatuses").then((function(e){t.ticketStatuses=e.data.data.ticket_statuses,t.ticket_status_id&&t.setTicketStatusId(t.ticket_status_id)}));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),setTicketStatusId:function(e){this.ticketStatusId=e}},created:function(){this.fetchTicketStatuses()},watch:{ticketStatusId:function(e){this.setTicketStatusId(e),this.$emit("input",this.ticketStatusId)}}},ht=ft,gt=a("b974"),_t=Object(y["a"])(ht,vt,pt,!1,null,null,null),bt=_t.exports;x()(_t,{VSelect:gt["a"]});var kt={name:"TicketForm",props:{ticket:{},edit:{}},components:{AgenciesAutocomplete:et,DevicesAutocomplete:st,ClientsAutocomplete:mt,TicketStatusesSelect:bt},data:function(){return{agency_id:null,valid:!1,credentials:{description:""},rules:{ticket:{description:[function(e){return!!e||"Opis jest wymagany."}],client_id:[function(e){return!!e||"Klient jest wymagany."}],agency_id:[function(e){return!!e||"Oddział jest wymagany."}],device_id:[function(e){return!!e||"Urządzenie jest wymagane."}],ticket_status_id:[function(e){return!!e||"Status zgłoszenia jest wymagany."}]}}}},methods:{parseFormData:function(){this.ticket&&(this.credentials=JSON.parse(JSON.stringify(this.ticket)))}},created:function(){this.parseFormData()},watch:{valid:function(e){this.$emit("valid",e)}}},yt=kt,wt=Object(y["a"])(yt,Je,He,!1,null,null,null),xt=wt.exports;x()(wt,{VForm:S["a"],VTextField:T["a"]});var Ct={name:"TicketCreate",data:function(){return{valid:!1}},components:{TicketForm:xt},methods:{createTicket:function(){var e=Object(A["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$http.post("/api/ticket",this.$refs.createForm.credentials).then((function(){t.$toasted.show("Utworzono zgłoszenie",{type:"success"})})).catch((function(){t.$toasted.show("Nie udało się utworzyć zgłoszenia",{type:"error"})}));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),checkValid:function(e){this.valid=e}}},Vt=Ct,$t=a("62ad"),zt=Object(y["a"])(Vt,Me,Ze,!1,null,null,null),St=zt.exports;x()(zt,{VBtn:C["a"],VCard:V["a"],VCardActions:$["a"],VCardText:$["b"],VCardTitle:$["c"],VCol:$t["a"],VContainer:z["a"],VRow:j["a"]});var jt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-row",[a("v-card",{staticClass:"col-8 mx-auto",attrs:{raised:"",shaped:""}},[a("v-card-text",[a("p",{staticClass:"display-1 text--primary"},[e._v("Sprawdź status zgłoszenia")]),a("v-form",{model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-text-field",{attrs:{rules:e.rules.ticket.token,counter:15,label:"Numer zgłoszenia",required:""},model:{value:e.token,callback:function(t){e.token=t},expression:"token"}})],1),e.status?a("v-alert",{attrs:{border:"left","colored-border":"",color:e.status.color,elevation:"2"}},[e._v(" Status zgłoszenia: "+e._s(e.status.name)+" ")]):e._e(),e.loading?a("loading"):e._e()],1),a("v-card-actions",[a("v-btn",{staticClass:"mx-auto font-weight-bold",attrs:{text:"",disabled:!e.valid},on:{click:e.checkStatus}},[e._v(" Sprawdź status ")])],1)],1)],1)],1)},Tt=[],Dt={name:"CheckStatus",components:{Loading:Oe["default"]},data:function(){return{valid:!1,token:"",loading:!1,status:null,rules:{ticket:{token:[function(e){return!!e||"Numer zgłoszenia jest wymagany."},function(e){return 15===e.length||"Numer zgłoszenia składa się z 15 znaków."}]}}}},methods:{checkStatus:function(){var e=this;this.loading=!0,this.status=null,this.$http.get("/api/ticket/".concat(this.token,"/status")).then((function(t){e.status=t.data.data.status,e.loading=!1}))}}},Ot=Dt,Et=a("0798"),Ut=Object(y["a"])(Ot,jt,Tt,!1,null,null,null),At=Ut.exports;x()(Ut,{VAlert:Et["a"],VBtn:C["a"],VCard:V["a"],VCardActions:$["a"],VCardText:$["b"],VContainer:z["a"],VForm:S["a"],VRow:j["a"],VTextField:T["a"]});var Rt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-col",{staticClass:"col-12"},[a("v-card",{staticClass:"ma-3",attrs:{elevation:5}},[a("v-card-title",[e._v(" Zgłoszenia "),a("v-spacer"),e.isAdmin()?a("v-btn",{attrs:{icon:"",to:{name:"TicketCreate"}}},[a("font-awesome-icon",{attrs:{icon:"plus",size:"lg"}})],1):e._e()],1)],1)],1),a("v-col",{staticClass:"col-12"},[a("v-card",{staticClass:"ma-3",attrs:{elevation:"5"}},[a("v-card-title",[a("v-text-field",{attrs:{"append-icon":"search",label:"Szukaj","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-data-table",{attrs:{headers:e.headers,items:e.tickets,search:e.search,loading:e.loading},scopedSlots:e._u([{key:"item.client.name",fn:function(t){var n=t.item;return[a("router-link",{staticClass:"route",attrs:{to:{name:"ClientSummary",params:{id:n.client.id}}}},[e._v(" "+e._s(n.client.name)+" ")])]}},{key:"item.device.name",fn:function(t){var n=t.item;return[a("router-link",{staticClass:"route",attrs:{text:"",to:{name:"DeviceSummary",params:{id:n.device.id}}}},[e._v(" "+e._s(n.device.name)+" ")])]}},{key:"item.ticket_status.name",fn:function(t){var n=t.item;return[a("span",{class:n.ticket_status.color+"--text"},[e._v(" "+e._s(n.ticket_status.name)+" ")])]}},{key:"item.actions",fn:function(t){var n=t.item;return[a("v-btn",{attrs:{text:"",icon:"",color:"info",to:{name:"TicketSummary",params:{id:n.id}},elevation:"2"}},[a("v-icon",[e._v("keyboard_arrow_right")])],1)]}}])})],1)],1)],1)],1)},Nt=[],Lt={name:"List",data:function(){return{search:"",loading:!0,tickets:[],headers:[{text:"Token",value:"token",align:"left",sortable:!1},{text:"Klient",value:"client.name"},{text:"Urządzenie",value:"device.name"},{text:"Numer seryjny",value:"device.serial_number"},{text:"Status",value:"ticket_status.name"},{value:"actions",sortable:!1,align:"right"}]}},methods:{fetchTickets:function(){var e=this;this.$http.get("/api/tickets").then((function(t){e.tickets=t.data.data.tickets,e.loading=!1}))},initPusher:function(){var e=this;this.channel=this.$pusher.subscribe("tickets"),this.channel.bind("ticketsListUpdated",(function(){e.fetchTickets()}))}},created:function(){this.fetchTickets(),this.initPusher()}},It=Lt,Ft=(a("5b1a"),a("8fea")),Bt=a("132d"),qt=a("2fa4"),Pt=Object(y["a"])(It,Rt,Nt,!1,null,null,null),Mt=Pt.exports;x()(Pt,{VBtn:C["a"],VCard:V["a"],VCardTitle:$["c"],VCol:$t["a"],VContainer:z["a"],VDataTable:Ft["a"],VIcon:Bt["a"],VRow:j["a"],VSpacer:qt["a"],VTextField:T["a"]});var Zt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-row",{staticClass:"col-12"},[a("v-col",{staticClass:"col-12"},[a("v-card",{staticClass:"ma-3",attrs:{elevation:5}},[a("v-card-title",[e._v(" Informacje o zgłoszeniu: "+e._s(e.ticket.token)+" "),a("v-spacer"),a("ticket-management",{attrs:{ticket:e.ticket}})],1)],1)],1),a("v-col",{staticClass:"col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4"},[a("ticket",{attrs:{ticket:e.ticket,loading:e.loading}}),a("device",{attrs:{device:e.ticket.device,loading:e.loading}}),a("client",{attrs:{client:e.ticket.client,loading:e.loading}})],1),a("v-col",{staticClass:"col-12 col-sm-12 col-md-6 col-lg-8 col-xl-8"},[e.notesLength?a("timeline",{attrs:{loading:e.notesLoading,title:"Notatki",itemsCount:e.notesLength},scopedSlots:e._u([{key:"createForm",fn:function(){return[a("notes-create",{attrs:{ticket_id:e.ticket.id}})]},proxy:!0},{key:"pagination",fn:function(){return[a("v-pagination",{attrs:{length:e.notes.last_page,"total-visible":"7",circle:""},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})]},proxy:!0}],null,!1,3094289335)},e._l(e.notes.data,(function(e){return a("note",{key:e.id,attrs:{note:e}})})),1):e._e()],1)],1)],1)},Jt=[],Ht=(a("99af"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[e.editDevice?a("device-edit",{attrs:{device:e.device},on:{editCard:e.deviceEdit}}):a("device-details",{attrs:{device:e.device,loading:e.loading},on:{editCard:e.deviceEdit}})],1)}),Kt=[],Wt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticClass:"ma-3 pa-1",attrs:{elevation:5}},[e.loading?a("loading"):a("span",[a("v-card-title",[e._v(" Dane urządzenia "),a("v-spacer"),a("v-btn",{attrs:{icon:"",color:"info"},on:{click:e.changeEditState}},[a("font-awesome-icon",{attrs:{icon:"pen",size:"lg"}})],1),e.checkRoute?e._e():a("v-btn",{attrs:{icon:"",to:{name:"DeviceSummary",params:{id:e.device.id}}}},[a("font-awesome-icon",{attrs:{icon:"external-link-alt",size:"lg"}})],1)],1),a("v-card-text",[a("span",{staticClass:"font-weight-bold"},[e._v(" Nazwa: ")]),e._v(" "+e._s(e.device.name)+" "),a("br"),a("span",{staticClass:"font-weight-bold"},[e._v(" Numer seryjny: ")]),e._v(" "+e._s(e.device.serial_number)+" "),a("br"),a("span",{staticClass:"font-weight-bold"},[e._v(" Opis: ")]),e._v(" "+e._s(e.device.description)+" ")])],1)],1)},Gt=[],Qt={name:"Details",components:{Loading:Oe["default"]},props:{device:{},loading:{}},methods:{changeEditState:function(){this.$emit("editCard",!0)}},computed:{checkRoute:function(){return"DeviceSummary"===this.$router.currentRoute.name}}},Xt=Qt,Yt=Object(y["a"])(Xt,Wt,Gt,!1,null,null,null),ea=Yt.exports;x()(Yt,{VBtn:C["a"],VCard:V["a"],VCardText:$["b"],VCardTitle:$["c"],VSpacer:qt["a"]});var ta=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticClass:"ma-3 pa-1",attrs:{elevation:5}},[e.loading?a("loading"):a("span",[a("v-card-title",[e._v(" Edycja urządzenia "),a("v-spacer"),a("v-btn",{attrs:{color:"green",disabled:!e.valid,icon:""},on:{click:e.updateDevice}},[a("font-awesome-icon",{attrs:{icon:"save",size:"lg"}})],1),a("v-btn",{attrs:{color:"red",icon:""},on:{click:e.changeEditState}},[a("font-awesome-icon",{attrs:{icon:"times",size:"lg"}})],1)],1),a("v-card-text",[a("device-form",{ref:"editForm",attrs:{device:e.device,edit:!0},on:{valid:e.checkValid}})],1)],1)],1)},aa=[],na=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-form",{model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-text-field",{attrs:{rules:e.rules.device.serial_number,label:"Numer seryjny",required:""},model:{value:e.credentials.serial_number,callback:function(t){e.$set(e.credentials,"serial_number",t)},expression:"credentials.serial_number"}}),a("v-text-field",{attrs:{rules:e.rules.device.name,label:"Nazwa urządzenia",required:""},model:{value:e.credentials.name,callback:function(t){e.$set(e.credentials,"name",t)},expression:"credentials.name"}}),a("v-textarea",{attrs:{label:"Opis"},model:{value:e.credentials.description,callback:function(t){e.$set(e.credentials,"description",t)},expression:"credentials.description"}}),e.isAdmin()&&!e.edit?a("agencies-autocomplete",{model:{value:e.credentials.agency_id,callback:function(t){e.$set(e.credentials,"agency_id",t)},expression:"credentials.agency_id"}}):e._e()],1)},ia=[],ra={name:"DeviceForm",components:{AgenciesAutocomplete:et},props:{device:{},edit:{}},data:function(){return{credentials:{},valid:!1,agencies:[],rules:{device:{name:[function(e){return!!e||"Nazwa jest wymagana."}],serial_number:[function(e){return!!e||"Numer seryjny jest wymagany."}]}}}},methods:{parseFormData:function(){this.device&&(this.credentials=JSON.parse(JSON.stringify(this.device)))},checkValid:function(e){this.agencyValid=e}},created:function(){this.parseFormData()},computed:{formValid:function(){return this.valid&&this.agencyValid}},watch:{valid:function(e){this.$emit("valid",e)}}},sa=ra,ca=a("a844"),oa=Object(y["a"])(sa,na,ia,!1,null,null,null),la=oa.exports;x()(oa,{VForm:S["a"],VTextField:T["a"],VTextarea:ca["a"]});var ua={name:"Edit",data:function(){return{valid:!1}},props:{device:{},loading:{}},components:{DeviceForm:la,Loading:Oe["default"]},methods:{updateDevice:function(){var e=Object(A["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$http.put("/api/device",this.$refs.editForm.credentials).then((function(){t.$toasted.show("Zedytowano Urządzenie",{type:"success"})})).catch((function(){t.$toasted.show("Nie udało się utworzyć zgłoszenia",{type:"error"})}));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),changeEditState:function(){this.$emit("editCard",!1)},checkValid:function(e){this.valid=e}},computed:{checkRoute:function(){return"Device"===this.$router.currentRoute.name}}},da=ua,ma=(a("9e62"),Object(y["a"])(da,ta,aa,!1,null,null,null)),va=ma.exports;x()(ma,{VBtn:C["a"],VCard:V["a"],VCardText:$["b"],VCardTitle:$["c"],VSpacer:qt["a"]});var pa={name:"Device",data:function(){return{editDevice:!1}},props:{device:{},loading:{}},components:{DeviceDetails:ea,DeviceEdit:va},methods:{deviceEdit:function(e){this.editDevice=e}}},fa=pa,ha=Object(y["a"])(fa,Ht,Kt,!1,null,null,null),ga=ha.exports,_a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticClass:"ma-3 pa-1",attrs:{elevation:5}},[e.loading?e._e():a("span",[a("v-card-title",[e._v(" "+e._s(e.title)+" ")]),a("v-card-text",[e._t("createForm"),e.itemsCount?a("v-timeline",{attrs:{dense:""}},[e._t("default")],2):a("v-alert",{attrs:{border:"bottom",color:"#202338",dark:""}},[e._v(" Brak ")])],2)],1),e.itemsCount?a("v-card-actions",[e._t("pagination")],2):a("v-progress-circular",{staticClass:"mx-auto",attrs:{size:80,indeterminate:"",color:"primary"}})],1)},ba=[],ka={name:"Timeline",props:{loading:{},title:{},itemsCount:{}}},ya=ka,wa=a("490a"),xa=a("8414"),Ca=Object(y["a"])(ya,_a,ba,!1,null,null,null),Va=Ca.exports;x()(Ca,{VAlert:Et["a"],VCard:V["a"],VCardActions:$["a"],VCardText:$["b"],VCardTitle:$["c"],VProgressCircular:wa["a"],VTimeline:xa["a"]});var $a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-timeline-item",{attrs:{color:"green lighten-2",icon:"assignment"}},[e.editNote?a("note-edit",{attrs:{note:e.note},on:{editCard:e.noteEdit}}):a("note",{attrs:{note:e.note},on:{editCard:e.noteEdit}})],1)},za=[],Sa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-title",{staticClass:"subtitle-2",attrs:{dense:""}},[e.isAdmin()||e.isManager()&&!e.checkRoute?a("router-link",{staticClass:"route",attrs:{to:{name:"UserSummary",params:{id:e.note.author.id}}}},[a("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.note.author.name)+" "+e._s(e.note.author.surname)+" ")]),a("v-spacer")],1):a("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.note.author.name)+" "+e._s(e.note.author.surname)+" ")]),a("v-spacer"),e.currentUser.id===e.note.author.id?a("v-btn",{attrs:{icon:"",color:"info"},on:{click:e.changeEditState}},[a("font-awesome-icon",{attrs:{icon:"pen"}})],1):e._e()],1),a("v-card-text",{staticClass:"white text--primary"},[e._v(" "+e._s(e.note.content)+" ")]),a("v-card-actions",{staticClass:"text--secondary"},[e.note.ticket?a("router-link",{staticClass:"route",attrs:{to:{name:"TicketSummary",params:{id:e.note.ticket.id}}}},[a("span",{staticClass:"text--secondary"},[e._v("Numer zgłoszenia: ")]),e._v(" "+e._s(e.note.ticket.token)+" ")]):e._e(),a("v-spacer"),e._v(" "+e._s(e.note.created_at)+" ")],1)],1)},ja=[],Ta={name:"Note",props:{note:{}},methods:{changeEditState:function(){this.$emit("editCard",!0)}},computed:{checkRoute:function(){return"UserSummary"===this.$router.currentRoute.name}}},Da=Ta,Oa=Object(y["a"])(Da,Sa,ja,!1,null,null,null),Ea=Oa.exports;x()(Oa,{VBtn:C["a"],VCard:V["a"],VCardActions:$["a"],VCardText:$["b"],VCardTitle:$["c"],VSpacer:qt["a"]});var Ua=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-title",{staticClass:"subtitle-2",attrs:{dense:""}},[e._v(" Edytuj notatkę "),a("v-spacer"),a("v-btn",{attrs:{color:"green",disabled:!e.valid,icon:""},on:{click:e.editNote}},[a("font-awesome-icon",{attrs:{icon:"save",size:"lg"}})],1),a("v-btn",{attrs:{color:"red",icon:""},on:{click:e.changeEditState}},[a("font-awesome-icon",{attrs:{icon:"times",size:"lg"}})],1)],1),a("v-card-text",{staticClass:"white text--primary"},[a("edit-form",{ref:"editForm",attrs:{ticket_id:e.currentUser.id,note:e.note},on:{valid:e.checkValid}})],1)],1)},Aa=[],Ra=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-form",{model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-text-field",{staticClass:"mb-2",attrs:{"hide-details":"",label:"Treść notatki",rules:e.rules.note.content,rows:"1"},model:{value:e.credentials.content,callback:function(t){e.$set(e.credentials,"content",t)},expression:"credentials.content"}})],1)},Na=[],La={name:"NoteForm",props:{note:{},edit:{},ticket_id:{},author_id:{}},data:function(){return{valid:!1,credentials:{content:""},rules:{note:{content:[function(e){return!!e||"Treść jest wymagana."}]}}}},methods:{parseFormData:function(){this.credentials=JSON.parse(JSON.stringify(this.note))},init:function(){this.note?this.parseFormData():(this.credentials.ticket_id=this.ticket_id,this.credentials.author_id=this.currentUser.id)}},created:function(){this.init()},watch:{valid:function(e){this.$emit("valid",e)}}},Ia=La,Fa=Object(y["a"])(Ia,Ra,Na,!1,null,null,null),Ba=Fa.exports;x()(Fa,{VForm:S["a"],VTextField:T["a"]});var qa={name:"Notes",components:{EditForm:Ba},data:function(){return{valid:!1}},props:{note:{}},methods:{editNote:function(){var e=Object(A["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$http.put("/api/note",this.$refs.editForm.credentials).then((function(){t.$toasted.show("Zedytowano zgłoszenie",{type:"success"})}));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),changeEditState:function(){this.$emit("editCard",!1)},checkValid:function(e){this.valid=e}}},Pa=qa,Ma=Object(y["a"])(Pa,Ua,Aa,!1,null,null,null),Za=Ma.exports;x()(Ma,{VBtn:C["a"],VCard:V["a"],VCardText:$["b"],VCardTitle:$["c"],VSpacer:qt["a"]});var Ja={name:"Notes",data:function(){return{editNote:!1}},props:{note:{}},components:{Note:Ea,NoteEdit:Za},methods:{noteEdit:function(e){this.editNote=e}},computed:{checkRoute:function(){return"UserSummary"===this.$router.currentRoute.name}}},Ha=Ja,Ka=a("1e06"),Wa=Object(y["a"])(Ha,$a,za,!1,null,null,null),Ga=Wa.exports;x()(Wa,{VTimelineItem:Ka["a"]});var Qa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[e.editClient?a("client-edit",{attrs:{client:e.client},on:{editCard:e.clientEdit}}):a("client-details",{attrs:{client:e.client,loading:e.loading},on:{editCard:e.clientEdit}})],1)},Xa=[],Ya=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticClass:"ma-3 pa-1",attrs:{elevation:5}},[e.loading?a("loading"):a("span",[a("v-card-title",[e._v(" Dane klienta "),a("v-spacer"),a("v-btn",{attrs:{icon:"",color:"info"},on:{click:e.changeEditState}},[a("font-awesome-icon",{attrs:{icon:"user-edit",size:"lg"}})],1),e.checkRoute?e._e():a("v-btn",{attrs:{icon:"",to:{name:"ClientSummary",params:{id:e.client.id}}}},[a("font-awesome-icon",{attrs:{icon:"external-link-alt",size:"lg"}})],1)],1),a("v-card-text",[a("span",{staticClass:"font-weight-bold"},[e._v(" Nazwa: ")]),e._v(" "+e._s(e.client.name)+" "),a("br"),a("span",{staticClass:"font-weight-bold"},[e._v(" Adres: ")]),e._v(" "+e._s(e.client.address)+" "),e.client.NIP?a("span",[a("br"),a("span",{staticClass:"font-weight-bold"},[e._v(" NIP: ")]),e._v(" "+e._s(e.client.NIP)+" ")]):e._e(),a("br"),a("span",{staticClass:"font-weight-bold"},[e._v(" Email: ")]),a("a",{attrs:{href:"mailto:"+e.client.email}},[e._v(" "+e._s(e.client.email)+" ")]),a("br"),a("span",{staticClass:"font-weight-bold"},[e._v(" Numer telefonu: ")]),a("a",{attrs:{href:"tel:"+e.client.phone_number}},[e._v(" "+e._s(e.client.phone_number)+" ")]),a("br"),a("span",{staticClass:"font-weight-bold"},[e._v(" Opis: ")]),e._v(" "+e._s(e.client.description)+" ")])],1)],1)},en=[],tn={name:"ClientDetails",components:{Loading:Oe["default"]},props:{client:{},loading:{}},methods:{changeEditState:function(){this.$emit("editCard",!0)}},computed:{checkRoute:function(){return"ClientSummary"===this.$router.currentRoute.name}}},an=tn,nn=(a("c615"),Object(y["a"])(an,Ya,en,!1,null,null,null)),rn=nn.exports;x()(nn,{VBtn:C["a"],VCard:V["a"],VCardText:$["b"],VCardTitle:$["c"],VSpacer:qt["a"]});var sn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticClass:"ma-3 pa-1",attrs:{elevation:5}},[e.loading?a("loading"):a("span",[a("v-card-title",[e._v(" Edycja klienta "),a("v-spacer"),a("v-btn",{attrs:{color:"green",disabled:!e.valid,icon:""},on:{click:e.updateClient}},[a("font-awesome-icon",{attrs:{icon:"save",size:"lg"}})],1),a("v-btn",{attrs:{color:"red",icon:""},on:{click:e.changeEditState}},[a("font-awesome-icon",{attrs:{icon:"times",size:"lg"}})],1)],1),a("v-card-text",[a("client-form",{ref:"editForm",attrs:{client:e.client,edit:!0},on:{valid:e.checkValid}})],1)],1)],1)},cn=[],on=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-form",{model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-text-field",{attrs:{rules:e.rules.client.name,label:"Nazwa klienta",required:""},model:{value:e.credentials.name,callback:function(t){e.$set(e.credentials,"name",t)},expression:"credentials.name"}}),a("v-text-field",{attrs:{rules:e.rules.client.address,label:"Adres",required:"","aria-multiline":"true"},model:{value:e.credentials.address,callback:function(t){e.$set(e.credentials,"address",t)},expression:"credentials.address"}}),a("v-text-field",{attrs:{label:"Numer NIP",required:""},model:{value:e.credentials.NIP,callback:function(t){e.$set(e.credentials,"NIP",t)},expression:"credentials.NIP"}}),a("v-text-field",{attrs:{rules:e.rules.client.phone_number,label:"Numer telefonu",required:""},model:{value:e.credentials.phone_number,callback:function(t){e.$set(e.credentials,"phone_number",t)},expression:"credentials.phone_number"}}),a("v-text-field",{attrs:{rules:e.rules.client.email,label:"Email",required:""},model:{value:e.credentials.email,callback:function(t){e.$set(e.credentials,"email",t)},expression:"credentials.email"}}),a("v-textarea",{attrs:{label:"Opis"},model:{value:e.credentials.description,callback:function(t){e.$set(e.credentials,"description",t)},expression:"credentials.description"}}),e.isAdmin()&&!e.edit?a("agencies-autocomplete",{model:{value:e.credentials.agency_id,callback:function(t){e.$set(e.credentials,"agency_id",t)},expression:"credentials.agency_id"}}):e._e()],1)},ln=[],un={name:"ClientForm",props:{client:{},edit:{}},components:{AgenciesAutocomplete:et},data:function(){return{credentials:{},valid:!1,rules:{client:{description:[function(e){return!!e||"Opis jest wymagany."}],name:[function(e){return!!e||"Nazwa jest wymagana."}],address:[function(e){return!!e||"Adres jest wymagany."}],phone_number:[function(e){return!!e||"Numer telefonu jest wymagany."}],email:[function(e){return/.+@.+/.test(e)||"Wprowawdź prawidłowy adres E-mail"}]}}}},methods:{parseFormData:function(){this.client&&(this.credentials=JSON.parse(JSON.stringify(this.client)))}},created:function(){this.parseFormData()},watch:{valid:function(e){this.$emit("valid",e)}}},dn=un,mn=Object(y["a"])(dn,on,ln,!1,null,null,null),vn=mn.exports;x()(mn,{VForm:S["a"],VTextField:T["a"],VTextarea:ca["a"]});var pn={name:"ClientEdit",data:function(){return{valid:!1}},props:{client:{},loading:{}},components:{ClientForm:vn,Loading:Oe["default"]},methods:{updateClient:function(){var e=Object(A["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$http.put("/api/client",this.$refs.editForm.credentials).then((function(){t.$toasted.show("Zedytowano Klienta",{type:"success"})}));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),changeEditState:function(){this.$emit("editCard",!1)},checkValid:function(e){this.valid=e}},computed:{checkRoute:function(){return"Client"===this.$router.currentRoute.name}}},fn=pn,hn=(a("2042"),Object(y["a"])(fn,sn,cn,!1,null,null,null)),gn=hn.exports;x()(hn,{VBtn:C["a"],VCard:V["a"],VCardText:$["b"],VCardTitle:$["c"],VSpacer:qt["a"]});var _n={name:"Client",data:function(){return{editClient:!1}},props:{client:{},loading:{}},components:{ClientDetails:rn,ClientEdit:gn},methods:{clientEdit:function(e){this.editClient=e}}},bn=_n,kn=Object(y["a"])(bn,Qa,Xa,!1,null,null,null),yn=kn.exports,wn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[e.editTicket?a("ticket-edit",{attrs:{ticket:e.ticket},on:{editCard:e.ticketEdit}}):a("ticket-details",{attrs:{ticket:e.ticket,loading:e.loading},on:{editCard:e.ticketEdit}})],1)},xn=[],Cn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticClass:"ma-3 pa-1",attrs:{elevation:5}},[e.loading?a("Loading"):a("span",[a("v-card-title",[e._v(" Dane zgłoszenia "),a("v-spacer"),a("v-btn",{attrs:{icon:"",color:"info"},on:{click:e.changeEditState}},[a("font-awesome-icon",{attrs:{icon:"user-edit",size:"lg"}})],1),e.checkRoute?e._e():a("v-btn",{attrs:{icon:"",to:{name:"TicketSummary",params:{id:e.ticket.id}}}},[a("font-awesome-icon",{attrs:{icon:"external-link-alt",size:"lg"}})],1)],1),a("v-card-text",[a("span",{staticClass:"font-weight-bold"},[e._v(" Numer: ")]),e._v(" "+e._s(e.ticket.token)+" "),a("br"),a("span",{staticClass:"font-weight-bold"},[e._v(" Opis: ")]),e._v(" "+e._s(e.ticket.description)+" "),a("br"),a("span",{staticClass:"font-weight-bold"},[e._v(" Dodatkowe informacje: ")]),e._v(" "+e._s(e.ticket.additional_information)+" "),e.ticket.message?a("span",[a("br"),a("span",{staticClass:"font-weight-bold"},[e._v(" Wiadomość zwrotna: ")]),e._v(" "+e._s(e.ticket.message)+" ")]):e._e(),a("br"),a("span",{staticClass:"font-weight-bold"},[e._v(" Status zgłoszenia: ")]),e._v(" "+e._s(e.ticket.ticket_status.name)+" ")])],1)],1)},Vn=[],$n={name:"TicketDetails",components:{Loading:Oe["default"]},props:{ticket:{},loading:{}},methods:{changeEditState:function(){this.$emit("editCard",!0)}},computed:{checkRoute:function(){return"TicketSummary"===this.$router.currentRoute.name}}},zn=$n,Sn=(a("5e8b"),Object(y["a"])(zn,Cn,Vn,!1,null,null,null)),jn=Sn.exports;x()(Sn,{VBtn:C["a"],VCard:V["a"],VCardText:$["b"],VCardTitle:$["c"],VSpacer:qt["a"]});var Tn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticClass:"ma-3 pa-1",attrs:{elevation:5}},[e.loading?a("loading"):a("span",[a("v-card-title",[e._v(" Edycja Zgłoszenia "),a("v-spacer"),a("v-btn",{attrs:{color:"green",disabled:!e.valid,icon:""},on:{click:e.updateTicket}},[a("font-awesome-icon",{attrs:{icon:"save",size:"lg"}})],1),a("v-btn",{attrs:{color:"red",icon:""},on:{click:e.changeEditState}},[a("font-awesome-icon",{attrs:{icon:"times",size:"lg"}})],1)],1),a("v-card-text",[a("ticket-form",{ref:"editForm",attrs:{ticket:e.ticket,edit:!0},on:{valid:e.checkValid}})],1)],1)],1)},Dn=[],On={name:"TicketEdit",data:function(){return{valid:!1}},props:{ticket:{},loading:{}},components:{TicketForm:xt,Loading:Oe["default"]},methods:{updateTicket:function(){var e=Object(A["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$http.put("/api/ticket",this.$refs.editForm.credentials).then((function(){t.$toasted.show("Zedytowano zgłoszenie",{type:"success"})}));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),changeEditState:function(){this.$emit("editCard",!1)},checkValid:function(e){this.valid=e}}},En=On,Un=Object(y["a"])(En,Tn,Dn,!1,null,null,null),An=Un.exports;x()(Un,{VBtn:C["a"],VCard:V["a"],VCardText:$["b"],VCardTitle:$["c"],VSpacer:qt["a"]});var Rn={name:"Client",data:function(){return{editTicket:!1}},props:{ticket:{},loading:{}},components:{TicketDetails:jn,TicketEdit:An},methods:{ticketEdit:function(e){this.editTicket=e}}},Nn=Rn,Ln=Object(y["a"])(Nn,wn,xn,!1,null,null,null),In=Ln.exports,Fn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[a("note-form",{ref:"createForm",attrs:{ticket_id:e.ticket_id},on:{valid:e.checkValid}}),a("v-btn",{staticClass:"mb-3",attrs:{block:"",disabled:!e.valid},on:{click:function(t){return e.addNote()}}},[e._v(" Dodaj notatkę ")])],1)},Bn=[],qn={name:"NoteCreate",props:{ticket_id:{}},data:function(){return{valid:!1}},components:{NoteForm:Ba},methods:{addNote:function(){var e=Object(A["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$http.post("/api/note",this.$refs.createForm.credentials).then((function(){t.$toasted.show("Dodano notatkę.",{type:"success"})}));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),checkValid:function(e){this.valid=e}}},Pn=qn,Mn=Object(y["a"])(Pn,Fn,Bn,!1,null,null,null),Zn=Mn.exports;x()(Mn,{VBtn:C["a"]});var Jn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[a("v-menu",{attrs:{bottom:"",left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-btn",e._g({attrs:{icon:""}},n),[a("v-icon",[e._v("mdi-dots-vertical")])],1)]}}])},[a("v-list",[a("v-list-item",{on:{click:function(t){e.removeTicket=!0}}},[a("v-list-item-title",{staticClass:"red--text"},[e._v("Usuń")])],1)],1)],1),a("remove-ticket-dialog",{attrs:{modal:e.removeTicket,ticket:e.ticket},on:{modal:e.removeDialog}})],1)},Hn=[],Kn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{"max-width":"500px"},on:{"click:outside":function(t){return e.closeDialog()}},model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[a("v-card",[a("v-card-title",[e._v(" Usuń zgłoszenie "+e._s(e.ticket.token)+" ")]),a("v-card-text",[e._v(" Czy napewno chcesz usunąć zgłoszenie "),a("strong",[e._v(e._s(e.ticket.token))]),e._v("? "),a("br"),a("span",{staticClass:"error--text font-weight-bold text-uppercase mx-auto"},[e._v("Usuniętych elementów nie można przywrócić")])]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(t){return e.removeTicket()}}},[e._v("Usuń")]),a("v-btn",{attrs:{color:"darken-1",text:""},on:{click:function(t){return e.closeDialog()}}},[e._v("Anuluj")])],1)],1)],1)},Wn=[],Gn={name:"RemoveTicketDialog",props:{modal:{default:{}},ticket:{}},methods:{removeTicket:function(){var e=Object(A["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$http.delete("/api/ticket/".concat(this.ticket.id)).then((function(){t.$toasted.show("Usunięto zgloszenie.",{type:"success"}),t.$router.push("/tickets")}));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),closeDialog:function(){this.$emit("modal",!1)}}},Qn=Gn,Xn=a("169a"),Yn=Object(y["a"])(Qn,Kn,Wn,!1,null,null,null),ei=Yn.exports;x()(Yn,{VBtn:C["a"],VCard:V["a"],VCardActions:$["a"],VCardText:$["b"],VCardTitle:$["c"],VDialog:Xn["a"],VSpacer:qt["a"]});var ti={name:"ClientManagement",components:{RemoveTicketDialog:ei},data:function(){return{removeTicket:!1}},props:{ticket:{}},methods:{closeDialog:function(){this.$emit("modal",!1)},removeDialog:function(e){this.removeTicket=e}}},ai=ti,ni=a("e449"),ii=Object(y["a"])(ai,Jn,Hn,!1,null,null,null),ri=ii.exports;x()(ii,{VBtn:C["a"],VIcon:Bt["a"],VList:ge["a"],VListItem:_e["a"],VListItemTitle:ke["c"],VMenu:ni["a"]});var si={name:"TicketSummary",data:function(){return{ticket:[],notes:[],notesLoading:!0,page:1,loading:!0,note:{credentials:{}}}},components:{Device:ga,Client:yn,Timeline:Va,Note:Ga,Ticket:In,NotesCreate:Zn,TicketManagement:ri},methods:{fetchData:function(){var e=this;this.$http.get("/api/ticket/".concat(this.$route.params.id)).then((function(t){e.ticket=t.data.data.ticket,e.loading=!1,e.loadDefault()})),this.getTicketNotes(1)},getTicketNotes:function(e){var t=this;this.$http.get("/api/ticket/".concat(this.$route.params.id,"/notes?page=").concat(e)).then((function(e){t.notes=e.data.data.notes,t.notesLoading=!1}))},addNote:function(){var e=Object(A["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$http.post("/api/note",this.note.credentials).then((function(){t.$toasted.show("Utworzono notatkę",{type:"success"})}));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),loadDefault:function(){this.note.credentials.ticket_id=this.ticket.id}},created:function(){this.fetchData()},computed:{notesLength:function(){return this.notes.data?this.notes.data.length:0}},watch:{page:function(e){this.getTicketNotes(e)}}},ci=si,oi=a("891e"),li=Object(y["a"])(ci,Zt,Jt,!1,null,null,null),ui=li.exports;x()(li,{VCard:V["a"],VCardTitle:$["c"],VCol:$t["a"],VContainer:z["a"],VPagination:oi["a"],VRow:j["a"],VSpacer:qt["a"]});var di=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-col",{staticClass:"col-12"},[a("v-card",{staticClass:"ma-3",attrs:{elevation:5}},[a("v-card-title",[e._v(" Informacje o urządzeniu: "+e._s(e.device.name)+" "),a("v-spacer"),a("device-management",{attrs:{device:e.device}})],1)],1)],1),a("v-col",{staticClass:"col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4"},[a("device",{attrs:{device:e.device,loading:e.loading}})],1),a("v-col",{staticClass:"col-12 col-sm-12 col-md-6 col-lg-8 col-xl-8"},[e.ticketsLength?a("timeline",{attrs:{loading:e.loading,title:"Zgłoszenia",itemsCount:e.ticketsLength},scopedSlots:e._u([{key:"pagination",fn:function(){return[a("v-pagination",{attrs:{length:e.tickets.last_page,"total-visible":"7",circle:""},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})]},proxy:!0}],null,!1,3849502279)},e._l(e.tickets.data,(function(e){return a("ticket",{key:e.id,attrs:{ticket:e}})})),1):e._e()],1)],1)],1)},mi=[],vi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-timeline-item",{attrs:{color:e.ticket.ticket_status.color},scopedSlots:e._u([{key:"icon",fn:function(){return[a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("font-awesome-icon",e._g({attrs:{icon:"sticky-note",size:"lg",color:"white"}},n))]}}])},[a("span",[e._v(" "+e._s(e.ticket.ticket_status.name)+" ")])])]},proxy:!0}])},[[a("router-link",{staticClass:"route",attrs:{to:{name:"TicketSummary",params:{id:e.ticket.id}}}},[a("span",{staticClass:"font-weight-bold text--primary"},[e._v("Numer zgłoszenia: ")]),e._v(" "+e._s(e.ticket.token)+" ")])],a("v-card",{staticClass:"elevation-2"},[a("v-card-text",{staticClass:"text--primary"},[e._v(" "+e._s(e.ticket.description)+" ")]),a("v-card-actions",{staticClass:"text--secondary"},[a("v-spacer"),e._v(" "+e._s(e.ticket.created_at)+" ")],1)],1)],2)},pi=[],fi={name:"Ticket",props:{ticket:{}}},hi=fi,gi=a("3a2f"),_i=Object(y["a"])(hi,vi,pi,!1,null,null,null),bi=_i.exports;x()(_i,{VCard:V["a"],VCardActions:$["a"],VCardText:$["b"],VSpacer:qt["a"],VTimelineItem:Ka["a"],VTooltip:gi["a"]});var ki=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[a("v-menu",{attrs:{bottom:"",left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-btn",e._g({attrs:{icon:""}},n),[a("v-icon",[e._v("mdi-dots-vertical")])],1)]}}])},[a("v-list",[a("v-list-item",{on:{click:function(t){e.removeDevice=!0}}},[a("v-list-item-title",{staticClass:"red--text"},[e._v("Usuń")])],1)],1)],1),a("remove-device-dialog",{attrs:{modal:e.removeDevice,device:e.device},on:{modal:e.removeDialog}})],1)},yi=[],wi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{"max-width":"500px"},on:{"click:outside":function(t){return e.closeDialog()}},model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[a("v-card",[a("v-card-title",[e._v(" Usuń urządzenie "+e._s(e.device.name)+" ")]),a("v-card-text",[e._v(" Czy napewno chcesz usunąć urządzenie "),a("strong",[e._v(e._s(e.device.name))]),e._v("oraz jego elementy: "),a("ul",[a("li",[e._v(" Zgłoszenia ")])]),a("br"),a("span",{staticClass:"error--text font-weight-bold text-uppercase mx-auto"},[e._v("Usuniętych elementów nie można przywrócić")])]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(t){return e.removeDevice()}}},[e._v("Usuń")]),a("v-btn",{attrs:{color:"darken-1",text:""},on:{click:function(t){return e.closeDialog()}}},[e._v("Anuluj")])],1)],1)],1)},xi=[],Ci={name:"RemoveDeviceDialog",props:{modal:{default:{}},device:{}},methods:{removeDevice:function(){var e=Object(A["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$http.delete("/api/device/".concat(this.device.id)).then((function(){t.$toasted.show("Usunięto urządzenie.",{type:"success"}),t.$router.push("/devices")}));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),closeDialog:function(){this.$emit("modal",!1)}}},Vi=Ci,$i=Object(y["a"])(Vi,wi,xi,!1,null,null,null),zi=$i.exports;x()($i,{VBtn:C["a"],VCard:V["a"],VCardActions:$["a"],VCardText:$["b"],VCardTitle:$["c"],VDialog:Xn["a"],VSpacer:qt["a"]});var Si={name:"DeviceManagement",components:{RemoveDeviceDialog:zi},data:function(){return{removeDevice:!1}},props:{device:{}},methods:{closeDialog:function(){this.$emit("modal",!1)},removeDialog:function(e){this.removeDevice=e}}},ji=Si,Ti=Object(y["a"])(ji,ki,yi,!1,null,null,null),Di=Ti.exports;x()(Ti,{VBtn:C["a"],VIcon:Bt["a"],VList:ge["a"],VListItem:_e["a"],VListItemTitle:ke["c"],VMenu:ni["a"]});var Oi={name:"DeviceSummary",data:function(){return{device:[],tickets:[],ticketsLoading:!0,page:1,loading:!0}},components:{Ticket:bi,Device:ga,Timeline:Va,DeviceManagement:Di},methods:{fetchDevice:function(){var e=Object(A["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$http.get("/api/device/".concat(this.$route.params.id)).then((function(e){t.device=e.data.data.device,t.loading=!1})),this.getDeviceTickets(1);case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getDeviceTickets:function(e){var t=this;this.$http.get("/api/device/".concat(this.$route.params.id,"/tickets?page=").concat(e)).then((function(e){t.tickets=e.data.data.tickets,t.ticketsLoading=!1}))}},created:function(){this.fetchDevice()},computed:{ticketsLength:function(){return this.tickets.data?this.tickets.data.length:0}},watch:{page:function(e){this.getDeviceTickets(e)}}},Ei=Oi,Ui=Object(y["a"])(Ei,di,mi,!1,null,null,null),Ai=Ui.exports;x()(Ui,{VCard:V["a"],VCardTitle:$["c"],VCol:$t["a"],VContainer:z["a"],VPagination:oi["a"],VRow:j["a"],VSpacer:qt["a"]});var Ri=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-col",{staticClass:"col-12"},[a("v-card",{staticClass:"ma-3",attrs:{elevation:5}},[a("v-card-title",[e._v(" Tworzenie klienta ")])],1)],1),a("v-col",{staticClass:"col-12"},[a("v-card",{staticClass:"ma-3",attrs:{elevation:"5"}},[a("v-tabs",{attrs:{centered:"",grow:"","icons-and-text":"",color:"#202338","background-color":"transparent"},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("v-tabs-slider"),a("v-tab",{attrs:{href:"#create"}},[e._v(" Nowy klient "),a("font-awesome-icon",{attrs:{icon:"plus",size:"lg"}})],1),a("v-tab",{attrs:{href:"#check"}},[e._v(" Istniejący "),a("font-awesome-icon",{attrs:{icon:"search-plus",size:"lg"}})],1)],1),a("v-tabs-items",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("v-tab-item",{attrs:{value:"check"}},[a("check-exist")],1),a("v-tab-item",{attrs:{value:"create"}},[a("v-card-text",[a("client-form",{ref:"createForm",on:{valid:e.checkValid}})],1),a("v-card-actions",[a("v-btn",{staticClass:"mx-auto font-weight-bold",attrs:{text:"",disabled:!e.valid},on:{click:e.createClient}},[e._v(" Dodaj klienta ")])],1)],1)],1)],1)],1)],1)],1)},Ni=[],Li=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[a("v-card-text",[a("check-exist-form",{ref:"checkExistForm",on:{valid:e.checkValid}})],1),a("v-card-actions",[a("v-btn",{staticClass:"mx-auto font-weight-bold",attrs:{text:"",disabled:!e.valid},on:{click:e.addClientByNumber}},[e._v(" Dodaj klienta ")])],1)],1)},Ii=[],Fi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-form",{model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-text-field",{attrs:{rules:e.rules.number.required,label:"NIP lub numer klienta",required:""},model:{value:e.credentials.number,callback:function(t){e.$set(e.credentials,"number",t)},expression:"credentials.number"}}),e.isAdmin()?a("agencies-autocomplete",{model:{value:e.credentials.agency_id,callback:function(t){e.$set(e.credentials,"agency_id",t)},expression:"credentials.agency_id"}}):e._e()],1)},Bi=[],qi={name:"CheckExistForm",components:{AgenciesAutocomplete:et},data:function(){return{credentials:{},valid:!1,agencies:[],rules:{number:{required:[function(e){return!!e||"Numer seryjny jest wymagany."}]},agency_id:{required:[function(e){return!!e||"Oddział jest wymagany."}]}}}},methods:{setDefault:function(){this.isAdmin()||(this.credentials.agency_id=this.$store.state.currentUser.agency_id)}},created:function(){this.setDefault()},watch:{valid:function(e){this.$emit("valid",e)}}},Pi=qi,Mi=Object(y["a"])(Pi,Fi,Bi,!1,null,null,null),Zi=Mi.exports;x()(Mi,{VForm:S["a"],VTextField:T["a"]});var Ji={name:"CheckExist",components:{CheckExistForm:Zi},data:function(){return{valid:!1}},methods:{addClientByNumber:function(){var e=Object(A["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$http.post("/api/client/number",this.$refs.checkExistForm.credentials).then((function(){t.$toasted.show("Dodano klienta do oddziału",{type:"success"})}));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),checkValid:function(e){this.valid=e}}},Hi=Ji,Ki=Object(y["a"])(Hi,Li,Ii,!1,null,null,null),Wi=Ki.exports;x()(Ki,{VBtn:C["a"],VCardActions:$["a"],VCardText:$["b"]});var Gi={name:"ClientCreate",data:function(){return{valid:!1,tab:null}},components:{ClientForm:vn,CheckExist:Wi},methods:{createClient:function(){var e=Object(A["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$http.post("/api/client",this.$refs.createForm.credentials).then((function(){t.$toasted.show("Utworzono klienta",{type:"success"})}));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),checkValid:function(e){this.valid=e}}},Qi=Gi,Xi=a("71a3"),Yi=a("c671"),er=a("fe57"),tr=a("aac8"),ar=a("9a96"),nr=Object(y["a"])(Qi,Ri,Ni,!1,null,null,null),ir=nr.exports;x()(nr,{VBtn:C["a"],VCard:V["a"],VCardActions:$["a"],VCardText:$["b"],VCardTitle:$["c"],VCol:$t["a"],VContainer:z["a"],VRow:j["a"],VTab:Xi["a"],VTabItem:Yi["a"],VTabs:er["a"],VTabsItems:tr["a"],VTabsSlider:ar["a"]});var rr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-col",{staticClass:"col-12"},[a("v-card",{staticClass:"ma-3",attrs:{elevation:5}},[a("v-card-title",[e._v(" Urządzenia "),a("v-spacer"),e.isAdmin()?a("v-btn",{attrs:{icon:"",to:{name:"DeviceCreate"}}},[a("font-awesome-icon",{attrs:{icon:"plus",size:"lg"}})],1):e._e()],1)],1)],1),a("v-col",{staticClass:"col-12"},[a("v-card",{staticClass:"ma-3",attrs:{elevation:"5"}},[a("v-card-title",[a("v-text-field",{attrs:{"append-icon":"search",label:"Szukaj","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-data-table",{attrs:{headers:e.headers,items:e.devices,search:e.search,loading:e.loading},scopedSlots:e._u([{key:"item.actions",fn:function(t){var n=t.item;return[a("v-btn",{attrs:{text:"",icon:"",color:"info",to:{name:"DeviceSummary",params:{id:n.id,device:n}},elevation:"2"}},[a("v-icon",[e._v("keyboard_arrow_right")])],1)]}}])})],1)],1)],1)],1)},sr=[],cr={name:"List",loading:!0,data:function(){return{search:"",loading:!0,devices:[],headers:[{text:"Numer seryjny",value:"serial_number",sortable:!1,align:"left"},{text:"Nazwa",value:"name"},{text:"Opis",value:"description"},{value:"actions",sortable:!1,align:"right"}]}},methods:{fetchDevices:function(){var e=this;this.$http.get("/api/devices").then((function(t){e.devices=t.data.data.devices,e.loading=!1}))},initPusher:function(){var e=this;this.channel=this.$pusher.subscribe("devices"),this.channel.bind("devicesListUpdated",(function(){e.fetchDevices()}))}},created:function(){this.fetchDevices(),this.initPusher()}},or=cr,lr=Object(y["a"])(or,rr,sr,!1,null,null,null),ur=lr.exports;x()(lr,{VBtn:C["a"],VCard:V["a"],VCardTitle:$["c"],VCol:$t["a"],VContainer:z["a"],VDataTable:Ft["a"],VIcon:Bt["a"],VRow:j["a"],VSpacer:qt["a"],VTextField:T["a"]});var dr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-col",{staticClass:"col-12"},[a("v-card",{staticClass:"ma-3",attrs:{elevation:5}},[a("v-card-title",[e._v(" Tworzenie urządzenia ")])],1)],1),a("v-col",{staticClass:"col-12"},[a("v-card",{staticClass:"ma-3",attrs:{elevation:"5"}},[a("v-tabs",{attrs:{centered:"",grow:"","icons-and-text":"",color:"#202338","background-color":"transparent"},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("v-tabs-slider"),a("v-tab",{attrs:{href:"#create"}},[e._v(" Nowe urządzenie "),a("font-awesome-icon",{attrs:{icon:"plus",size:"lg"}})],1),a("v-tab",{attrs:{href:"#check"}},[e._v(" Istniejące "),a("font-awesome-icon",{attrs:{icon:"search-plus",size:"lg"}})],1)],1),a("v-tabs-items",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("v-tab-item",{attrs:{value:"check"}},[a("check-exist")],1),a("v-tab-item",{attrs:{value:"create"}},[a("v-card-text",[a("device-form",{ref:"createForm",on:{valid:e.checkValid}})],1),a("v-card-actions",[a("v-btn",{staticClass:"mx-auto font-weight-bold",attrs:{text:"",disabled:!e.valid},on:{click:e.createDevice}},[e._v(" Dodaj urządzenie ")])],1)],1)],1)],1)],1)],1)],1)},mr=[],vr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[a("v-card-text",[a("serial-number-form",{ref:"serialNumberForm",on:{valid:e.checkValid}})],1),a("v-card-actions",[a("v-btn",{staticClass:"mx-auto font-weight-bold",attrs:{text:"",disabled:!e.valid},on:{click:e.addDeviceBySerialNumber}},[e._v(" Dodaj urządzenie ")])],1)],1)},pr=[],fr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-form",{model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-text-field",{attrs:{rules:e.rules.serial_number.required,label:"Numer seryjny",required:""},model:{value:e.credentials.serial_number,callback:function(t){e.$set(e.credentials,"serial_number",t)},expression:"credentials.serial_number"}}),e.isAdmin()?a("agencies-autocomplete",{model:{value:e.credentials.agency_id,callback:function(t){e.$set(e.credentials,"agency_id",t)},expression:"credentials.agency_id"}}):e._e()],1)},hr=[],gr={name:"SerialNumberForm",components:{AgenciesAutocomplete:et},data:function(){return{credentials:{},agencies:[],valid:!1,rules:{serial_number:{required:[function(e){return!!e||"Numer seryjny jest wymagany."}]},agency_id:{required:[function(e){return!!e||"Oddział jest wymagany."}]}}}},methods:{setDefault:function(){this.isAdmin()||(this.credentials.agency_id=this.$store.state.currentUser.agency_id)}},created:function(){this.setDefault()},watch:{valid:function(e){this.$emit("valid",e)}}},_r=gr,br=Object(y["a"])(_r,fr,hr,!1,null,null,null),kr=br.exports;x()(br,{VForm:S["a"],VTextField:T["a"]});var yr={name:"CheckExist",components:{SerialNumberForm:kr},data:function(){return{valid:!1}},methods:{addDeviceBySerialNumber:function(){var e=Object(A["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$http.post("/api/device/serialNumber",this.$refs.serialNumberForm.credentials).then((function(){t.$toasted.show("Dodano urządzenie do oddziału",{type:"success"})}));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),checkValid:function(e){this.valid=e}}},wr=yr,xr=Object(y["a"])(wr,vr,pr,!1,null,null,null),Cr=xr.exports;x()(xr,{VBtn:C["a"],VCardActions:$["a"],VCardText:$["b"]});var Vr={name:"ClientCreate",data:function(){return{valid:!1,tab:null}},components:{CheckExist:Cr,DeviceForm:la},methods:{createDevice:function(){var e=Object(A["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$http.post("/api/device",this.$refs.createForm.credentials).then((function(){t.$toasted.show("Utworzono urządzenie",{type:"success"})})).catch((function(){t.$toasted.show("Nie udało się utworzyć zgłoszenia",{type:"error"})}));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),checkValid:function(e){this.valid=e}}},$r=Vr,zr=Object(y["a"])($r,dr,mr,!1,null,null,null),Sr=zr.exports;x()(zr,{VBtn:C["a"],VCard:V["a"],VCardActions:$["a"],VCardText:$["b"],VCardTitle:$["c"],VCol:$t["a"],VContainer:z["a"],VRow:j["a"],VTab:Xi["a"],VTabItem:Yi["a"],VTabs:er["a"],VTabsItems:tr["a"],VTabsSlider:ar["a"]});var jr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-col",{staticClass:"col-12"},[a("v-card",{staticClass:"ma-3",attrs:{elevation:5}},[a("v-card-title",[e._v(" Klienci "),a("v-spacer"),e.isAdmin()?a("v-btn",{attrs:{icon:"",to:{name:"ClientCreate"}}},[a("font-awesome-icon",{attrs:{icon:"plus",size:"lg"}})],1):e._e()],1)],1)],1),a("v-col",{staticClass:"col-12"},[a("v-card",{staticClass:"ma-3",attrs:{elevation:"5"}},[a("v-card-title",[a("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-data-table",{attrs:{headers:e.headers,items:e.clients,search:e.search,loading:e.loading},scopedSlots:e._u([{key:"item.email",fn:function(t){var n=t.item;return[a("a",{staticClass:"route",attrs:{href:"mailto:"+n.email}},[e._v(" "+e._s(n.email)+" ")])]}},{key:"item.phone_number",fn:function(t){var n=t.item;return[a("a",{staticClass:"route",attrs:{href:"tel:"+n.phone_number}},[e._v(" "+e._s(n.phone_number)+" ")])]}},{key:"item.actions",fn:function(t){var n=t.item;return[a("v-btn",{attrs:{text:"",icon:"",color:"info",to:{name:"ClientSummary",params:{id:n.id,client:n}},elevation:"2"}},[a("v-icon",[e._v("keyboard_arrow_right")])],1)]}}])})],1)],1)],1)],1)},Tr=[],Dr={name:"ClientList",loading:!0,data:function(){return{search:"",loading:!0,clients:[],headers:[{text:"Nazwa",value:"name",align:"left"},{text:"Adres",value:"address"},{text:"Email",value:"email"},{text:"Numer Telefonu",value:"phone_number",sortable:!1},{text:"NIP",value:"NIP",sortable:!1},{value:"actions",sortable:!1,align:"right"}]}},methods:{fetchClients:function(){var e=Object(A["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$http.get("/api/clients").then((function(e){t.clients=e.data.data.clients,t.loading=!1}));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},created:function(){this.fetchClients()}},Or=Dr,Er=(a("a24d"),Object(y["a"])(Or,jr,Tr,!1,null,null,null)),Ur=Er.exports;x()(Er,{VBtn:C["a"],VCard:V["a"],VCardTitle:$["c"],VCol:$t["a"],VContainer:z["a"],VDataTable:Ft["a"],VIcon:Bt["a"],VRow:j["a"],VSpacer:qt["a"],VTextField:T["a"]});var Ar=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-col",{staticClass:"col-12"},[a("v-card",{staticClass:"ma-3",attrs:{elevation:5}},[a("v-card-title",[e._v(" Informacje o kliencie: "+e._s(e.client.name)+" "),a("v-spacer"),a("client-management",{attrs:{client:e.client}})],1)],1)],1),a("v-col",{staticClass:"col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4"},[a("client",{attrs:{client:e.client,loading:e.loading}})],1),a("v-col",{staticClass:"col-12 col-sm-12 col-md-6 col-lg-8 col-xl-8"},[e.ticketsLength?a("timeline",{attrs:{loading:e.ticketsLoading,title:"Zgłoszenia",itemsCount:e.ticketsLength},scopedSlots:e._u([{key:"pagination",fn:function(){return[a("v-pagination",{attrs:{length:e.tickets.last_page,"total-visible":"7",circle:""},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})]},proxy:!0}],null,!1,3849502279)},e._l(e.tickets.data,(function(e){return a("ticket",{key:e.id,attrs:{ticket:e}})})),1):e._e()],1)],1)],1)},Rr=[],Nr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[a("v-menu",{attrs:{bottom:"",left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-btn",e._g({attrs:{icon:""}},n),[a("v-icon",[e._v("mdi-dots-vertical")])],1)]}}])},[a("v-list",[a("v-list-item",{on:{click:function(t){e.removeClient=!0}}},[a("v-list-item-title",{staticClass:"red--text"},[e._v("Usuń")])],1)],1)],1),a("remove-client-dialog",{attrs:{modal:e.removeClient,client:e.client},on:{modal:e.removeDialog}})],1)},Lr=[],Ir=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{"max-width":"500px"},on:{"click:outside":function(t){return e.closeDialog()}},model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[a("v-card",[a("v-card-title",[e._v(" Usuń klienta "+e._s(e.client.name)+" ")]),a("v-card-text",[e._v(" Czy napewno chcesz usunąć klienta "),a("strong",[e._v(e._s(e.client.name))]),e._v("oraz jego elementy: "),a("ul",[a("li",[e._v(" Zgłoszenia ")])]),a("br"),a("span",{staticClass:"error--text font-weight-bold text-uppercase mx-auto"},[e._v("Usuniętych elementów nie można przywrócić")])]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(t){return e.removeClient()}}},[e._v("Usuń")]),a("v-btn",{attrs:{color:"darken-1",text:""},on:{click:function(t){return e.closeDialog()}}},[e._v("Anuluj")])],1)],1)],1)},Fr=[],Br={name:"RemoveClientDialog",props:{modal:{default:{}},client:{}},methods:{removeClient:function(){var e=Object(A["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$http.delete("/api/client/".concat(this.client.id)).then((function(){t.$toasted.show("Usunięto klienta.",{type:"success"}),t.$router.push("/clients")}));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),closeDialog:function(){this.$emit("modal",!1)}}},qr=Br,Pr=Object(y["a"])(qr,Ir,Fr,!1,null,null,null),Mr=Pr.exports;x()(Pr,{VBtn:C["a"],VCard:V["a"],VCardActions:$["a"],VCardText:$["b"],VCardTitle:$["c"],VDialog:Xn["a"],VSpacer:qt["a"]});var Zr={name:"ClientManagement",components:{RemoveClientDialog:Mr},data:function(){return{removeClient:!1}},props:{client:{}},methods:{closeDialog:function(){this.$emit("modal",!1)},removeDialog:function(e){this.removeClient=e}}},Jr=Zr,Hr=Object(y["a"])(Jr,Nr,Lr,!1,null,null,null),Kr=Hr.exports;x()(Hr,{VBtn:C["a"],VIcon:Bt["a"],VList:ge["a"],VListItem:_e["a"],VListItemTitle:ke["c"],VMenu:ni["a"]});var Wr={name:"ClientSummary",data:function(){return{client:[],tickets:[],loading:!0,ticketsLoading:!0,page:1}},components:{Timeline:Va,Ticket:bi,Client:yn,ClientManagement:Kr},methods:{fetchClient:function(){var e=Object(A["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$http.get("/api/client/".concat(this.$route.params.id)).then((function(e){t.client=e.data.data.client,t.loading=!1})),this.getClientTickets(1);case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getClientTickets:function(e){var t=this;this.$http.get("/api/client/".concat(this.$route.params.id,"/tickets?page=").concat(e)).then((function(e){t.tickets=e.data.data.tickets,t.ticketsLoading=!1}))}},created:function(){this.fetchClient()},computed:{ticketsLength:function(){return this.tickets.data?this.tickets.data.length:0}},watch:{page:function(e){this.getClientTickets(e)}}},Gr=Wr,Qr=Object(y["a"])(Gr,Ar,Rr,!1,null,null,null),Xr=Qr.exports;x()(Qr,{VCard:V["a"],VCardTitle:$["c"],VCol:$t["a"],VContainer:z["a"],VPagination:oi["a"],VRow:j["a"],VSpacer:qt["a"]});var Yr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-col",{staticClass:"col-12"},[a("v-card",{staticClass:"ma-3",attrs:{elevation:5}},[a("v-card-title",[e._v(" Informacje o pracowniku: "+e._s(e.user.name)+" "+e._s(e.user.surname)+" "),a("v-spacer"),a("user-management",{attrs:{user:e.user}})],1)],1),e.user.blocked_at?a("v-alert",{staticClass:"ma-3",attrs:{elevation:"5",prominent:"",icon:"block",type:"error"}},[e._v(" Użytkownik jest zablokowany ")]):e._e()],1),a("v-col",{staticClass:"col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4"},[a("user",{attrs:{user:e.user,loading:e.loading}})],1),a("v-col",{staticClass:"col-12 col-sm-12 col-md-6 col-lg-8 col-xl-8"},[e.notesLength?a("timeline",{attrs:{loading:e.loading,title:"Notatki",itemsCount:e.notesLength},scopedSlots:e._u([{key:"pagination",fn:function(){return[a("v-pagination",{attrs:{length:e.notes.last_page,"total-visible":"7",circle:""},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})]},proxy:!0}],null,!1,3083487891)},e._l(e.notes.data,(function(e){return a("note",{key:e.id,attrs:{note:e}})})),1):e._e()],1)],1)],1)},es=[],ts=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[e.editUser?a("user-edit",{attrs:{user:e.user},on:{editCard:e.userEdit}}):a("user-details",{attrs:{user:e.user,loading:e.loading},on:{editCard:e.userEdit}})],1)},as=[],ns=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticClass:"ma-3 pa-1",attrs:{elevation:5}},[e.loading?a("loading"):a("span",[a("v-card-title",[e._v(" Dane pracownika "),a("v-spacer"),a("v-btn",{attrs:{icon:"",color:"info"},on:{click:e.changeEditState}},[a("font-awesome-icon",{attrs:{icon:"user-edit",size:"lg"}})],1),e.checkRoute?e._e():a("v-btn",{attrs:{icon:"",to:{name:"UserSummary",params:{id:e.user.id}}}},[a("font-awesome-icon",{attrs:{icon:"external-link-alt",size:"lg"}})],1)],1),a("v-card-text",[a("span",{staticClass:"font-weight-bold"},[e._v(" Imię i nazwisko: ")]),e._v(" "+e._s(e.user.name)+" "+e._s(e.user.surname)+" "),a("br"),a("span",{staticClass:"font-weight-bold"},[e._v(" Email: ")]),a("a",{attrs:{href:"mailto:"+e.user.email}},[e._v(" "+e._s(e.user.email)+" ")]),a("br"),a("span",{staticClass:"font-weight-bold"},[e._v(" Numer telefonu: ")]),a("a",{attrs:{href:"tel:"+e.user.phone_number}},[e._v(" "+e._s(e.user.phone_number)+" ")]),e.isAdmin()?a("span",[a("br"),a("span",{staticClass:"font-weight-bold"},[e._v(" Rola użytkownika: ")]),e._v(" "+e._s(e.user.role.name)+" ")]):e._e()])],1)],1)},is=[],rs={name:"UserDetails",props:{user:{},loading:{}},components:{Loading:Oe["default"]},methods:{changeEditState:function(){this.$emit("editCard",!0)}},computed:{checkRoute:function(){return"UserSummary"===this.$router.currentRoute.name}}},ss=rs,cs=(a("5b69"),Object(y["a"])(ss,ns,is,!1,null,null,null)),os=cs.exports;x()(cs,{VBtn:C["a"],VCard:V["a"],VCardText:$["b"],VCardTitle:$["c"],VSpacer:qt["a"]});var ls=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticClass:"ma-3 pa-1",attrs:{elevation:5}},[e.loading?a("loading"):a("span",[a("v-card-title",[e._v(" Edycja użytkownika "),a("v-spacer"),a("v-btn",{attrs:{color:"green",disabled:!e.valid,icon:""},on:{click:e.updateUser}},[a("font-awesome-icon",{attrs:{icon:"save",size:"lg"}})],1),a("v-btn",{attrs:{color:"red",icon:""},on:{click:e.changeEditState}},[a("font-awesome-icon",{attrs:{icon:"times",size:"lg"}})],1)],1),a("v-card-text",[a("user-form",{ref:"editForm",attrs:{user:e.user,edit:!0}})],1)],1)],1)},us=[],ds=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-form",{model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-text-field",{attrs:{rules:e.rules.user.name,label:"Imię",required:""},model:{value:e.credentials.name,callback:function(t){e.$set(e.credentials,"name",t)},expression:"credentials.name"}}),a("v-text-field",{attrs:{rules:e.rules.user.surname,label:"Nazwisko",required:""},model:{value:e.credentials.surname,callback:function(t){e.$set(e.credentials,"surname",t)},expression:"credentials.surname"}}),a("v-text-field",{attrs:{rules:e.rules.user.password,label:"Hasło",type:"password",required:""},model:{value:e.credentials.password,callback:function(t){e.$set(e.credentials,"password",t)},expression:"credentials.password"}}),a("v-text-field",{attrs:{rules:e.rules.user.phone_number,label:"Numer telefonu",required:""},model:{value:e.credentials.phone_number,callback:function(t){e.$set(e.credentials,"phone_number",t)},expression:"credentials.phone_number"}}),a("v-text-field",{attrs:{rules:e.rules.user.email,label:"Email",required:""},model:{value:e.credentials.email,callback:function(t){e.$set(e.credentials,"email",t)},expression:"credentials.email"}}),e.isAdmin()?a("span",[e.edit?e._e():a("agencies-autocomplete",{model:{value:e.credentials.agency_id,callback:function(t){e.$set(e.credentials,"agency_id",t)},expression:"credentials.agency_id"}}),e.user?a("agency-role-select",{attrs:{agencyRoleId:e.user.agency_role_id},model:{value:e.credentials.agency_role_id,callback:function(t){e.$set(e.credentials,"agency_role_id",t)},expression:"credentials.agency_role_id"}}):a("agency-role-select",{model:{value:e.credentials.agency_role_id,callback:function(t){e.$set(e.credentials,"agency_role_id",t)},expression:"credentials.agency_role_id"}})],1):e._e()],1)},ms=[],vs=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-select",{attrs:{items:e.agencyRoles,rules:e.rules.agency_role_id.required,label:"Rola użytkownika","item-text":"name","item-value":"id"},model:{value:e.agency_role_id,callback:function(t){e.agency_role_id=t},expression:"agency_role_id"}})},ps=[],fs={name:"RolesSelect",props:{agencyRoleId:{default:null}},data:function(){return{agencyRoles:[],agency_role_id:null,rules:{agency_role_id:{required:[function(e){return!!e||"Rola użytkownika jest wymagany."}]}}}},methods:{fetchAgencyRoles:function(){var e=Object(A["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$http.get("/api/agency/roles").then((function(e){t.agencyRoles=e.data.data.roles}));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},created:function(){this.fetchAgencyRoles(),this.agencyRoleId&&(this.agency_role_id=this.agencyRoleId)},watch:{agency_role_id:function(){this.$emit("input",this.agency_role_id)}}},hs=fs,gs=Object(y["a"])(hs,vs,ps,!1,null,null,null),_s=gs.exports;x()(gs,{VSelect:gt["a"]});var bs={name:"UserForm",props:{user:{},edit:{}},components:{AgenciesAutocomplete:et,AgencyRoleSelect:_s},data:function(){return{credentials:{},valid:!1,agencyValid:{},agencies:[],agencyRoles:[],rules:{user:{name:[function(e){return!!e||"Imię jest wymagana."}],surname:[function(e){return!!e||"Nazwawisko jest wymagane."}],phone_number:[function(e){return!!e||"Numer telefonu jest wymagany."}],email:[function(e){return/.+@.+/.test(e)||"Wprowawdź prawidłowy adres E-mail"}],agency_id:[function(e){return!!e||"Oddział jest wymagany."}],agency_role_id:[function(e){return!!e||"Rola użytkownika jest wymagany."}]}}}},methods:{parseFormData:function(){this.user&&(this.credentials=JSON.parse(JSON.stringify(this.user)))},fetchAgencyRoles:function(){var e=Object(A["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.isAdmin()&&this.$http.get("/api/agency/roles").then((function(e){t.agencyRoles=e.data.data.roles}));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),setDefault:function(){this.isAdmin()||(this.credentials.agency_role_id=3,this.credentials.agency_id=this.$store.state.currentUser.agency_id)}},created:function(){this.parseFormData(),this.fetchAgencyRoles(),this.setDefault()},watch:{valid:function(e){this.$emit("valid",e)}}},ks=bs,ys=Object(y["a"])(ks,ds,ms,!1,null,null,null),ws=ys.exports;x()(ys,{VForm:S["a"],VTextField:T["a"]});var xs={name:"UserEdit",data:function(){return{valid:!1}},props:{user:{},loading:{}},components:{UserForm:ws,Loading:Oe["default"]},methods:{updateUser:function(){var e=Object(A["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$http.put("/api/user",this.$refs.editForm.credentials).then((function(){t.$toasted.show("Zedytowano Użytkownika",{type:"success"})})).catch((function(){t.$toasted.show("Nie udało się utworzyć zgłoszenia",{type:"error"})}));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),changeEditState:function(){this.$emit("editCard",!1)},checkValid:function(e){this.valid=e}},computed:{checkRoute:function(){return"User"===this.$router.currentRoute.name}}},Cs=xs,Vs=(a("71ff"),Object(y["a"])(Cs,ls,us,!1,null,null,null)),$s=Vs.exports;x()(Vs,{VBtn:C["a"],VCard:V["a"],VCardText:$["b"],VCardTitle:$["c"],VSpacer:qt["a"]});var zs={name:"User",data:function(){return{editUser:!1}},props:{user:{},loading:{}},components:{UserDetails:os,UserEdit:$s},methods:{userEdit:function(e){this.editUser=e}}},Ss=zs,js=Object(y["a"])(Ss,ts,as,!1,null,null,null),Ts=js.exports,Ds=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[e.isManager()&&e.currentUser.id!==e.user.id?a("v-menu",{attrs:{bottom:"",left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-btn",e._g({attrs:{icon:""}},n),[a("v-icon",[e._v("mdi-dots-vertical")])],1)]}}],null,!1,2097855828)},[a("v-list",[e.user.blocked_at?a("v-list-item",{on:{click:function(t){e.unblockUser=!0}}},[a("v-list-item-title",[e._v("Odblokuj")])],1):a("v-list-item",{on:{click:function(t){e.blockUser=!0}}},[a("v-list-item-title",[e._v("Zablokuj")])],1),a("v-list-item",{on:{click:function(t){e.removeUser=!0}}},[a("v-list-item-title",{staticClass:"red--text"},[e._v("Usuń")])],1)],1)],1):e._e(),a("remove-user-dialog",{attrs:{modal:e.removeUser,user:e.user},on:{modal:e.removeDialog}}),a("block-user-dialog",{attrs:{modal:e.blockUser,user:e.user},on:{modal:e.blockDialog}}),a("unblock-user-dialog",{attrs:{modal:e.unblockUser,user:e.user},on:{modal:e.unblockDialog}})],1)},Os=[],Es=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{"max-width":"500px"},on:{"click:outside":function(t){return e.closeDialog()}},model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[a("v-card",[a("v-card-title",[e._v(" Usuń użytkownika "+e._s(e.user.name)+" "+e._s(e.user.surname)+" ")]),a("v-card-text",[e._v(" Czy napewno chcesz usunąć użytkownika "),a("strong",[e._v(e._s(e.user.name)+" "+e._s(e.user.surname))]),e._v("oraz jego elementy: "),a("ul",[a("li",[e._v(" Notatki ")])]),a("br"),a("span",{staticClass:"error--text font-weight-bold text-uppercase mx-auto"},[e._v("Usuniętych elementów nie można przywrócić")])]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(t){return e.removeUser()}}},[e._v("Usuń")]),a("v-btn",{attrs:{color:"darken-1",text:""},on:{click:function(t){return e.closeDialog()}}},[e._v("Anuluj")])],1)],1)],1)},Us=[],As={name:"RemoveUserDialog",props:{modal:{default:{}},user:{}},methods:{removeUser:function(){var e=Object(A["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$http.delete("/api/user/".concat(this.user.id)).then((function(){t.$toasted.show("Usunięto użytkownika.",{type:"success"}),t.$router.push("/users")}));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),closeDialog:function(){this.$emit("modal",!1)}}},Rs=As,Ns=Object(y["a"])(Rs,Es,Us,!1,null,null,null),Ls=Ns.exports;x()(Ns,{VBtn:C["a"],VCard:V["a"],VCardActions:$["a"],VCardText:$["b"],VCardTitle:$["c"],VDialog:Xn["a"],VSpacer:qt["a"]});var Is=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{"max-width":"500px"},on:{"click:outside":function(t){return e.closeDialog()}},model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[a("v-card",[a("v-card-title",[e._v(" Zablokuj użytkownika "+e._s(e.user.name)+" "+e._s(e.user.surname)+" ")]),a("v-card-text",[e._v(" Czy napewno chcesz zablokować użytkownika "),a("strong",[e._v(e._s(e.user.name)+" "+e._s(e.user.surname))]),e._v("? ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(t){return e.blockUser()}}},[e._v("Zablokuj")]),a("v-btn",{attrs:{color:"darken-1",text:""},on:{click:function(t){return e.closeDialog()}}},[e._v("Anuluj")])],1)],1)],1)},Fs=[],Bs={name:"RemoveUserDialog",props:{modal:{default:{}},user:{}},methods:{blockUser:function(){var e=Object(A["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$http.post("/api/user/".concat(this.user.id,"/block")).then((function(){t.$toasted.show("Zablokowano użytkownika.",{type:"success"})}));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),closeDialog:function(){this.$emit("modal",!1)}}},qs=Bs,Ps=Object(y["a"])(qs,Is,Fs,!1,null,null,null),Ms=Ps.exports;x()(Ps,{VBtn:C["a"],VCard:V["a"],VCardActions:$["a"],VCardText:$["b"],VCardTitle:$["c"],VDialog:Xn["a"],VSpacer:qt["a"]});var Zs=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{"max-width":"500px"},on:{"click:outside":function(t){return e.closeDialog()}},model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[a("v-card",[a("v-card-title",[e._v(" Odblokuj użytkownika "+e._s(e.user.name)+" "+e._s(e.user.surname)+" ")]),a("v-card-text",[e._v(" Czy napewno chcesz odblokować użytkownika "),a("strong",[e._v(e._s(e.user.name)+" "+e._s(e.user.surname))]),e._v("? ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(t){return e.unblockUser()}}},[e._v("Odblokuj")]),a("v-btn",{attrs:{color:"darken-1",text:""},on:{click:function(t){return e.closeDialog()}}},[e._v("Anuluj")])],1)],1)],1)},Js=[],Hs={name:"RemoveUserDialog",props:{modal:{default:{}},user:{}},methods:{unblockUser:function(){var e=Object(A["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$http.post("/api/user/".concat(this.user.id,"/unblock")).then((function(){t.$toasted.show("Odblokowano użytkownika.",{type:"success"})}));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),closeDialog:function(){this.$emit("modal",!1)}}},Ks=Hs,Ws=Object(y["a"])(Ks,Zs,Js,!1,null,null,null),Gs=Ws.exports;x()(Ws,{VBtn:C["a"],VCard:V["a"],VCardActions:$["a"],VCardText:$["b"],VCardTitle:$["c"],VDialog:Xn["a"],VSpacer:qt["a"]});var Qs={name:"UserManagement",components:{RemoveUserDialog:Ls,BlockUserDialog:Ms,UnblockUserDialog:Gs},data:function(){return{removeUser:!1,blockUser:!1,unblockUser:!1}},props:{user:{}},methods:{closeDialog:function(){this.$emit("modal",!1)},removeDialog:function(e){this.removeUser=e},blockDialog:function(e){this.blockUser=e},unblockDialog:function(e){this.unblockUser=e}}},Xs=Qs,Ys=Object(y["a"])(Xs,Ds,Os,!1,null,null,null),ec=Ys.exports;x()(Ys,{VBtn:C["a"],VIcon:Bt["a"],VList:ge["a"],VListItem:_e["a"],VListItemTitle:ke["c"],VMenu:ni["a"]});var tc={name:"UserSummary",data:function(){return{user:[],notes:[],notesLoading:!0,page:1,loading:!0}},components:{Timeline:Va,Note:Ga,User:Ts,UserManagement:ec},methods:{fetchUser:function(){var e=Object(A["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$http.get("/api/user/".concat(this.$route.params.id)).then((function(e){t.user=e.data.data.user,t.loading=!1})),this.getUserNotes(1);case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getUserNotes:function(e){var t=this;this.$http.get("/api/user/".concat(this.$route.params.id,"/notes?page=").concat(e)).then((function(e){t.notes=e.data.data.notes,t.notesLoading=!1}))}},created:function(){this.fetchUser()},computed:{notesLength:function(){return this.notes.data?this.notes.data.length:0}},watch:{page:function(e){this.getUserNotes(e)}}},ac=tc,nc=Object(y["a"])(ac,Yr,es,!1,null,null,null),ic=nc.exports;x()(nc,{VAlert:Et["a"],VCard:V["a"],VCardTitle:$["c"],VCol:$t["a"],VContainer:z["a"],VPagination:oi["a"],VRow:j["a"],VSpacer:qt["a"]});var rc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-col",{staticClass:"col-12"},[a("v-card",{staticClass:"ma-3",attrs:{elevation:5}},[a("v-card-title",[e._v(" Tworzenie użytkownika ")])],1)],1),a("v-col",{staticClass:"col-12"},[a("v-card",{staticClass:"ma-3",attrs:{elevation:"5"}},[a("v-card-text",[a("user-form",{ref:"createForm",on:{valid:e.checkValid}})],1),a("v-card-actions",[a("v-btn",{staticClass:"mx-auto font-weight-bold",attrs:{text:"",disabled:!e.valid},on:{click:e.createUser}},[e._v(" Dodaj użytkownika ")])],1)],1)],1)],1)],1)},sc=[],cc={name:"UserCreate",data:function(){return{valid:!1}},components:{UserForm:ws},methods:{createUser:function(){var e=Object(A["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$http.post("/api/user",this.$refs.createForm.credentials).then((function(){t.$toasted.show("Utworzono uzytkownika",{type:"success"})})).catch((function(){t.$toasted.show("Nie udało się utworzyć zgłoszenia",{type:"error"})}));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),checkValid:function(e){this.valid=e}}},oc=cc,lc=Object(y["a"])(oc,rc,sc,!1,null,null,null),uc=lc.exports;x()(lc,{VBtn:C["a"],VCard:V["a"],VCardActions:$["a"],VCardText:$["b"],VCardTitle:$["c"],VCol:$t["a"],VContainer:z["a"],VRow:j["a"]});var dc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-col",{staticClass:"col-12"},[a("v-card",{staticClass:"ma-3",attrs:{elevation:5}},[a("v-card-title",[e._v(" Pracownicy "),a("v-spacer"),a("v-btn",{attrs:{icon:"",to:{name:"UserCreate"}}},[a("font-awesome-icon",{attrs:{icon:"plus",size:"lg"}})],1)],1)],1)],1),a("v-col",{staticClass:"col-12"},[a("v-card",{staticClass:"ma-3",attrs:{elevation:"5"}},[a("v-card-title",[a("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-data-table",{attrs:{headers:e.headers,items:e.users,search:e.search,loading:e.loading},scopedSlots:e._u([{key:"item.email",fn:function(t){var n=t.item;return[a("a",{staticClass:"route",attrs:{href:"mailto:"+n.email}},[e._v(" "+e._s(n.email)+" ")])]}},{key:"item.phone_number",fn:function(t){var n=t.item;return[a("a",{staticClass:"route",attrs:{href:"tel:"+n.phone_number}},[e._v(" "+e._s(n.phone_number)+" ")])]}},{key:"item.actions",fn:function(t){var n=t.item;return[a("v-btn",{attrs:{text:"",icon:"",color:"info",to:{name:"UserSummary",params:{id:n.id,client:n}},elevation:"2"}},[a("v-icon",[e._v("keyboard_arrow_right")])],1)]}},{key:"item.role.name",fn:function(t){var n=t.item;return[a("span",{staticClass:"text-uppercase"},[e._v(" "+e._s(n.role.name)+" ")])]}}])})],1)],1)],1)],1)},mc=[],vc={name:"UsersList",loading:!0,props:{agency:{}},data:function(){return{search:"",loading:!0,users:[],headers:[{text:"Imię",value:"name",align:"left"},{text:"Nazwisko",value:"surname"},{text:"Email",value:"email"},{text:"Numer Telefonu",value:"phone_number",sortable:!1},{text:"Rola",value:"role.name"},{value:"actions",sortable:!1,align:"right"}]}},methods:{fetchUsers:function(){var e=Object(A["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$http.get("/api/users").then((function(e){t.users=e.data.data.users,t.loading=!1}));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fetchEmployees:function(){var e=Object(A["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$http.get("/api/agency/".concat(this.$route.params.id,"/employees")).then((function(e){t.users=e.data.data.employees,t.loading=!1}));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fetchData:function(){this.agency?this.fetchEmployees():this.fetchUsers()}},created:function(){this.fetchData()}},pc=vc,fc=(a("7a0c"),Object(y["a"])(pc,dc,mc,!1,null,null,null)),hc=fc.exports;x()(fc,{VBtn:C["a"],VCard:V["a"],VCardTitle:$["c"],VCol:$t["a"],VContainer:z["a"],VDataTable:Ft["a"],VIcon:Bt["a"],VRow:j["a"],VSpacer:qt["a"],VTextField:T["a"]});var gc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-col",{staticClass:"col-12"},[a("v-card",{staticClass:"ma-3",attrs:{elevation:5}},[a("v-card-title",[e._v(" Oddziały "),a("v-spacer"),e.isAdmin()?a("v-btn",{attrs:{icon:"",to:{name:"AgencyCreate"}}},[a("font-awesome-icon",{attrs:{icon:"plus",size:"lg"}})],1):e._e()],1)],1)],1),a("v-col",{staticClass:"col-12"},[a("v-card",{staticClass:"ma-3",attrs:{elevation:"5"}},[a("v-card-title",[a("v-text-field",{attrs:{"append-icon":"search",label:"Szukaj","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-data-table",{attrs:{headers:e.headers,items:e.agencies,search:e.search,loading:e.loading},scopedSlots:e._u([{key:"item.phone_number",fn:function(t){var n=t.item;return[a("a",{staticClass:"route",attrs:{href:"tel:"+n.phone_number}},[e._v(" "+e._s(n.phone_number)+" ")])]}},{key:"item.actions",fn:function(t){var n=t.item;return[a("v-btn",{attrs:{text:"",icon:"",color:"info",to:{name:"AgencySummary",params:{id:n.id}},elevation:"2"}},[a("v-icon",[e._v("keyboard_arrow_right")])],1)]}}])})],1)],1)],1)],1)},_c=[],bc={name:"AgenciesList",data:function(){return{search:"",agencies:[],loading:!0,headers:[{text:"Nazwa",value:"name",align:"left"},{text:"Adres",value:"address"},{text:"Numer telefonu",value:"phone_number"},{value:"actions",sortable:!1,align:"right"}]}},methods:{fetchAgencies:function(){var e=this;this.$http.get("/api/agencies").then((function(t){e.agencies=t.data.data.agencies,e.loading=!1}))}},created:function(){this.fetchAgencies()}},kc=bc,yc=(a("d251"),Object(y["a"])(kc,gc,_c,!1,null,null,null)),wc=yc.exports;x()(yc,{VBtn:C["a"],VCard:V["a"],VCardTitle:$["c"],VCol:$t["a"],VContainer:z["a"],VDataTable:Ft["a"],VIcon:Bt["a"],VRow:j["a"],VSpacer:qt["a"],VTextField:T["a"]});var xc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-col",{staticClass:"col-12"},[a("v-card",{staticClass:"ma-3",attrs:{elevation:5}},[a("v-card-title",[e._v(" Tworzenie oddziału ")])],1)],1),a("v-col",{staticClass:"col-12"},[a("v-card",{staticClass:"ma-3",attrs:{elevation:"5"}},[a("v-card-text",[a("agency-form",{ref:"createForm",on:{valid:e.checkValid}})],1),a("v-card-actions",[a("v-btn",{staticClass:"mx-auto font-weight-bold",attrs:{text:"",disabled:!e.valid},on:{click:e.createAgency}},[e._v(" Dodaj oddział ")])],1)],1)],1)],1)],1)},Cc=[],Vc={name:"AgencyCreate",data:function(){return{valid:!1}},components:{AgencyForm:H},methods:{createAgency:function(){var e=Object(A["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$http.post("/api/agency",this.$refs.createForm.credentials).then((function(){t.$toasted.show("Utworzono oddział",{type:"success"})}));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),checkValid:function(e){this.valid=e}}},$c=Vc,zc=Object(y["a"])($c,xc,Cc,!1,null,null,null),Sc=zc.exports;x()(zc,{VBtn:C["a"],VCard:V["a"],VCardActions:$["a"],VCardText:$["b"],VCardTitle:$["c"],VCol:$t["a"],VContainer:z["a"],VRow:j["a"]});var jc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-row",{staticClass:"col-12"},[a("v-col",{staticClass:"col-12"},[a("v-card",{staticClass:"ma-3",attrs:{elevation:5}},[a("v-card-title",[e._v(" Informacje o oddziale: "+e._s(e.agency.name)+" "),a("v-spacer"),a("agency-management",{attrs:{agency:e.agency}})],1)],1)],1),a("v-col",{staticClass:"col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4"},[a("agency",{attrs:{agency:e.agency,loading:e.agencyLoading}})],1),a("v-col",{staticClass:"col-12 col-sm-12 col-md-6 col-lg-8 col-xl-8"},[e.isManager()?a("agency-statistics",{attrs:{statistics:e.statistics,loading:e.statisticsLoading}}):e._e()],1)],1),a("v-row",{staticClass:"col-12"},[e.isManager()&&!e.agencyLoading?a("users-list",{attrs:{agency:!0}}):e._e()],1)],1)},Tc=[],Dc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[e.editAgency?a("agency-edit",{attrs:{agency:e.agency},on:{editCard:e.agencyEdit}}):a("agency-details",{attrs:{agency:e.agency,loading:e.loading},on:{editCard:e.agencyEdit}})],1)},Oc=[],Ec=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticClass:"ma-3 pa-1",attrs:{elevation:5}},[e.loading?a("loading"):a("span",[a("v-card-title",[e._v(" Dane oddziału "),a("v-spacer"),a("v-btn",{attrs:{icon:"",color:"info"},on:{click:e.changeEditState}},[a("font-awesome-icon",{attrs:{icon:"user-edit",size:"lg"}})],1),e.checkRoute?e._e():a("v-btn",{attrs:{icon:"",to:{name:"AgencySummary",params:{id:e.agency.id}}}},[a("font-awesome-icon",{attrs:{icon:"external-link-alt",size:"lg"}})],1)],1),a("v-card-text",[a("span",{staticClass:"font-weight-bold"},[e._v(" Nazwa: ")]),e._v(" "+e._s(e.agency.name)+" "),a("br"),a("span",{staticClass:"font-weight-bold"},[e._v(" Adres: ")]),e._v(" "+e._s(e.agency.address)+" "),a("br"),a("span",{staticClass:"font-weight-bold"},[e._v(" Numer telefonu: ")]),a("a",{attrs:{href:"tel:"+e.agency.phone_number}},[e._v(" "+e._s(e.agency.phone_number)+" ")])])],1)],1)},Uc=[],Ac={name:"AgencyDetails",props:{agency:{},loading:{}},components:{Loading:Oe["default"]},methods:{changeEditState:function(){this.$emit("editCard",!0)}},computed:{checkRoute:function(){return"AgencySummary"===this.$router.currentRoute.name}}},Rc=Ac,Nc=(a("c1f5"),Object(y["a"])(Rc,Ec,Uc,!1,null,null,null)),Lc=Nc.exports;x()(Nc,{VBtn:C["a"],VCard:V["a"],VCardText:$["b"],VCardTitle:$["c"],VSpacer:qt["a"]});var Ic=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticClass:"ma-3 pa-1",attrs:{elevation:5}},[e.loading?a("loading"):a("span",[a("v-card-title",[e._v(" Edycja Oddziału "),a("v-spacer"),a("v-btn",{attrs:{color:"green",disabled:!e.valid,icon:""},on:{click:e.updateAgency}},[a("font-awesome-icon",{attrs:{icon:"save",size:"lg"}})],1),a("v-btn",{attrs:{color:"red",icon:""},on:{click:e.changeEditState}},[a("font-awesome-icon",{attrs:{icon:"times",size:"lg"}})],1)],1),a("v-card-text",[a("agency-form",{ref:"editForm",attrs:{agency:e.agency,edit:!0},on:{valid:e.checkValid}})],1)],1)],1)},Fc=[],Bc={name:"AgencyEdit",data:function(){return{valid:!1}},props:{agency:{},loading:{}},components:{AgencyForm:H,Loading:Oe["default"]},methods:{updateAgency:function(){var e=Object(A["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$http.put("/api/agency",this.$refs.editForm.credentials).then((function(){t.$toasted.show("Zedytowano oddział",{type:"success"})}));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),changeEditState:function(){this.$emit("editCard",!1)},checkValid:function(e){this.valid=e}}},qc=Bc,Pc=Object(y["a"])(qc,Ic,Fc,!1,null,null,null),Mc=Pc.exports;x()(Pc,{VBtn:C["a"],VCard:V["a"],VCardText:$["b"],VCardTitle:$["c"],VSpacer:qt["a"]});var Zc={name:"Agency",data:function(){return{editAgency:!1}},props:{agency:{},loading:{}},components:{AgencyDetails:Lc,AgencyEdit:Mc},methods:{agencyEdit:function(e){this.editAgency=e}}},Jc=Zc,Hc=Object(y["a"])(Jc,Dc,Oc,!1,null,null,null),Kc=Hc.exports,Wc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[e.isAdmin()?a("v-menu",{attrs:{bottom:"",left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-btn",e._g({attrs:{icon:""}},n),[a("v-icon",[e._v("mdi-dots-vertical")])],1)]}}],null,!1,2097855828)},[a("v-list",[a("v-list-item",{on:{click:function(t){e.removeAgency=!0}}},[a("v-list-item-title",{staticClass:"red--text"},[e._v("Usuń")])],1)],1)],1):e._e(),a("remove-agency-dialog",{attrs:{modal:e.removeAgency,agency:e.agency},on:{modal:e.removeDialog}})],1)},Gc=[],Qc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{"max-width":"500px"},on:{"click:outside":function(t){return e.closeDialog()}},model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[a("v-card",[a("v-card-title",[e._v(" Usuń oddział "+e._s(e.agency.name)+" ")]),a("v-card-text",[e._v(" Czy napewno chcesz usunąć oddział "),a("strong",[e._v(e._s(e.agency.name))]),e._v(" jego elementy: "),a("ul",[a("li",[e._v(" Zgłoszenia ")]),a("li",[e._v(" Notatki ")]),a("li",[e._v(" Klienci ")]),a("li",[e._v(" Urządzenia ")]),a("li",[e._v(" Użytkownicy ")])]),a("br"),a("span",{staticClass:"mt-2"},[e._v("Abu usunąć oddział wpisz: ")]),a("br"),a("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.agency.name)+", "+e._s(e.agency.address))]),a("br"),a("v-text-field",{attrs:{label:"Przepisz tekst",required:"",onCopy:"return false",onDrag:"return false",onDrop:"return false",onPaste:"return false",autocomplete:"off"},model:{value:e.confirmation,callback:function(t){e.confirmation=t},expression:"confirmation"}}),a("span",{staticClass:"error--text font-weight-bold text-uppercase mx-auto"},[e._v("Usuniętych elementów nie można przywrócić")])],1),a("v-card-actions",[a("v-spacer"),e.valid?a("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(t){return e.removeAgency()}}},[e._v("Usuń")]):e._e(),a("v-btn",{attrs:{color:"darken-1",text:""},on:{click:function(t){return e.closeDialog()}}},[e._v("Anuluj")])],1)],1)],1)},Xc=[],Yc=(a("ac1f"),a("5319"),{name:"RemoveAgencyDialog",props:{modal:{default:{}},agency:{}},data:function(){return{confirmation:""}},methods:{removeAgency:function(){var e=Object(A["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$http.delete("/api/agency/".concat(this.agency.id)).then((function(){t.$toasted.show("Usunięto oddział",{type:"success"}),t.$router.push("/agencies")}));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),closeDialog:function(){this.confirmation="",this.$emit("modal",!1)}},computed:{valid:function(){return(this.agency.name+", "+this.agency.address).replace(/\n/g," ")===this.confirmation}}}),eo=Yc,to=Object(y["a"])(eo,Qc,Xc,!1,null,null,null),ao=to.exports;x()(to,{VBtn:C["a"],VCard:V["a"],VCardActions:$["a"],VCardText:$["b"],VCardTitle:$["c"],VDialog:Xn["a"],VSpacer:qt["a"],VTextField:T["a"]});var no={name:"AgencyManagement",components:{RemoveAgencyDialog:ao},data:function(){return{removeAgency:!1}},props:{agency:{}},methods:{closeDialog:function(){this.$emit("modal",!1)},removeDialog:function(e){this.removeAgency=e}}},io=no,ro=Object(y["a"])(io,Wc,Gc,!1,null,null,null),so=ro.exports;x()(ro,{VBtn:C["a"],VIcon:Bt["a"],VList:ge["a"],VListItem:_e["a"],VListItemTitle:ke["c"],VMenu:ni["a"]});var co=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticClass:"ma-3 pa-1",attrs:{elevation:5}},[e.loading?a("loading"):a("span",[a("v-card-title",[e._v(" Statystyki oddziału ")]),a("v-card-text",[a("span",{staticClass:"font-weight-bold text--primary"},[e._v(" Liczba pracowników: ")]),e._v(" "+e._s(e.statistics.employees)+" "),a("br"),a("span",{staticClass:"font-weight-bold text--primary"},[e._v(" Liczba klientów: ")]),e._v(" "+e._s(e.statistics.clients)+" "),a("br"),a("span",{staticClass:"font-weight-bold text--primary"},[e._v(" Liczba urządzeń: ")]),e._v(" "+e._s(e.statistics.devices)+" "),a("br"),a("span",{staticClass:"font-weight-bold text--primary"},[e._v(" Liczba zgłoszeń: ")]),e._v(" "+e._s(e.statistics.tickets)+" "),a("ul",{staticClass:"text--primary"},e._l(e.statistics.ticketStatuses,(function(t,n){return a("li",{key:n},[a("span",{staticClass:"font-weight-bold"},[e._v(e._s(n)+":")]),e._v(" "),a("span",{staticClass:"text--secondary"},[e._v(" "+e._s(t)+" ")])])})),0)])],1)],1)},oo=[],lo={name:"AgencyStatistics",components:{Loading:Oe["default"]},props:{statistics:{},loading:{}}},uo=lo,mo=Object(y["a"])(uo,co,oo,!1,null,null,null),vo=mo.exports;x()(mo,{VCard:V["a"],VCardText:$["b"],VCardTitle:$["c"]});var po={name:"AgencySummary",data:function(){return{agency:[],statistics:[],agencyLoading:!0,statisticsLoading:!0,note:{credentials:{}}}},components:{Agency:Kc,AgencyManagement:so,UsersList:hc,AgencyStatistics:vo},methods:{fetchData:function(){this.fetchAgency(),this.fetchStatistics()},fetchAgency:function(){var e=this;this.$http.get("/api/agency/".concat(this.$route.params.id)).then((function(t){e.agency=t.data.data.agency,e.agencyLoading=!1}))},fetchStatistics:function(){var e=this;this.$http.get("/api/agency/".concat(this.$route.params.id,"/statistics")).then((function(t){e.statistics=t.data.data,e.statisticsLoading=!1}))}},created:function(){this.fetchData()}},fo=po,ho=Object(y["a"])(fo,jc,Tc,!1,null,null,null),go=ho.exports;x()(ho,{VCard:V["a"],VCardTitle:$["c"],VCol:$t["a"],VContainer:z["a"],VRow:j["a"],VSpacer:qt["a"]}),i["a"].use(Ne["a"]);var _o=new Ne["a"]({mode:"history",routes:[{path:"/",name:"HomePage",component:Pe},{path:"/login",name:"Login",component:O,meta:{forVisitors:!0}},{path:"/check",name:"TicketCheckStatus",component:At},{path:"/ticket/create",name:"TicketCreate",component:St,meta:{roles:["administrator","manager","serwisant"]}},{path:"/tickets",name:"TicketsList",component:Mt,meta:{roles:["administrator","manager","serwisant"]}},{path:"/ticket/:id",name:"TicketSummary",component:ui,props:!0,meta:{roles:["administrator","manager","serwisant"]}},{path:"/client/create",name:"ClientCreate",component:ir,meta:{roles:["administrator","manager","serwisant"]}},{path:"/client/:id",name:"ClientSummary",component:Xr,props:!0,meta:{roles:["administrator","manager","serwisant"]}},{path:"/clients",name:"ClientList",component:Ur,meta:{roles:["administrator","manager","serwisant"]}},{path:"/devices",name:"DeviceList",component:ur,meta:{roles:["administrator","manager","serwisant"]}},{path:"/device/create",name:"DeviceCreate",component:Sr,meta:{roles:["administrator","manager","serwisant"]}},{path:"/device/:id",name:"DeviceSummary",component:Ai,props:!0,meta:{roles:["administrator","manager","serwisant"]}},{path:"/users",name:"UsersList",component:hc,meta:{roles:["administrator","manager"]}},{path:"/user/create",name:"UserCreate",component:uc,meta:{roles:["administrator","manager"]}},{path:"/user/:id",name:"UserSummary",component:ic,props:!0,meta:{roles:["administrator","manager"]}},{path:"/agencies",name:"AgencyList",component:wc,meta:{roles:["administrator"]}},{path:"/agency/create",name:"AgencyCreate",component:Sc,meta:{roles:["administrator"]}},{path:"/agency/:id",name:"AgencySummary",component:go,props:!0,meta:{roles:["administrator","manager"]}}]}),bo=a("f309"),ko=(a("bf40"),a("d1e78"),a("7597"));i["a"].use(bo["a"]);var yo=new bo["a"]({icons:{iconfont:"mdi"},lang:{locales:{pl:ko["a"]},current:"pl"}}),wo=a("a7fe"),xo=a.n(wo),Co=a("2f62");i["a"].use(Co["a"]);var Vo=_(),$o=new Co["a"].Store({state:{currentUser:Vo,loading:!1,auth_error:null},getters:{isLoading:function(e){return e.loading},currentUser:function(e){return e.currentUser},authError:function(e){return e.auth_error},getToken:function(e){if(e.currentUser)return e.currentUser.token}},mutations:{login:function(e){e.loading=!0,e.auth_error=null},loginSuccess:function(e,t){e.auth_error=null,e.isLoggedIn=!0,e.loading=!1,e.currentUser=Object.assign({},t.data.user,{token:t.data.token}),localStorage.setItem("user",JSON.stringify(e.currentUser)),i["a"].toasted.show("Zalogowano",{type:"success"})},logout:function(e){localStorage.removeItem("user"),e.isLoggedIn=!1,e.currentUser=null,i["a"].toasted.show("Wylogowano",{type:"success"})}},actions:{login:function(e){e.commit("login")}}}),zo=a("a65d"),So=a.n(zo);i["a"].use(a("2c05"),{api_key:"b523965da7bc10d9d529",options:{cluster:"eu",forceTLS:!0}}),i["a"].use(Co["a"]),i["a"].use(So.a,{theme:"bubble",position:"top-center",duration:5e3}),i["a"].config.productionTip=!1,i["a"].use(xo.a,p.a),i["a"].mixin({data:function(){return{isInitialized:!1}},methods:{isAdmin:function(){if(this.currentUser)return"administrator"===$o.state.currentUser.role.name},isManager:function(){if(this.currentUser)return"manager"===$o.state.currentUser.role.name||this.isAdmin()}},computed:{currentUser:function(){return this.$store.getters.currentUser}}}),f($o,_o),new i["a"]({vuetify:yo,router:_o,store:$o,pusher:n,render:function(e){return e(Re)}}).$mount("#app")},"5b1a":function(e,t,a){"use strict";var n=a("2ae1"),i=a.n(n);i.a},"5b69":function(e,t,a){"use strict";var n=a("490c"),i=a.n(n);i.a},"5e8b":function(e,t,a){"use strict";var n=a("aef4"),i=a.n(n);i.a},"634e":function(e,t,a){},"63d9":function(e,t,a){},"71ff":function(e,t,a){"use strict";var n=a("ff45"),i=a.n(n);i.a},"7a0c":function(e,t,a){"use strict";var n=a("3486"),i=a.n(n);i.a},"7ce9":function(e,t,a){},9152:function(e,t,a){},"9e62":function(e,t,a){"use strict";var n=a("dc08"),i=a.n(n);i.a},a0c3:function(e,t){},a24d:function(e,t,a){"use strict";var n=a("9152"),i=a.n(n);i.a},a334:function(e,t,a){},aef4:function(e,t,a){},c1f5:function(e,t,a){"use strict";var n=a("634e"),i=a.n(n);i.a},c615:function(e,t,a){"use strict";var n=a("2848"),i=a.n(n);i.a},d251:function(e,t,a){"use strict";var n=a("63d9"),i=a.n(n);i.a},d832:function(e,t,a){},dc08:function(e,t,a){},e9d4:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-row",[a("v-progress-circular",{staticClass:"mx-auto",attrs:{size:80,indeterminate:"",color:"primary"}})],1)],1)},i=[];a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i}))},e9fa:function(e,t,a){"use strict";var n=a("a0c3"),i=a.n(n);t["default"]=i.a},ec53:function(e,t,a){"use strict";var n=a("7ce9"),i=a.n(n);i.a},f9a2:function(e,t,a){"use strict";var n=a("e9d4"),i=a("e9fa"),r=a("2877"),s=a("6544"),c=a.n(s),o=a("a523"),l=a("490a"),u=a("0fd9"),d=Object(r["a"])(i["default"],n["a"],n["b"],!1,null,"b41818d8",null);t["default"]=d.exports,c()(d,{VContainer:o["a"],VProgressCircular:l["a"],VRow:u["a"]})},fa60:function(e,t,a){"use strict";var n=a("d832"),i=a.n(n);i.a},fa89:function(e,t,a){},ff45:function(e,t,a){}});
//# sourceMappingURL=app.e7fc1bc2.js.map